var rp=rp||{};rp.Registry=function(){this._storage={}},rp.Registry.prototype.set=function(e,t){"object"!=typeof e?this._storage[e]=t:this.setList(e)},rp.Registry.prototype.get=function(e,t){return t=void 0===t?null:t,this._storage.hasOwnProperty(e)?this._storage[e]:t},rp.Registry.prototype.remove=function(e){delete this._storage[e]},rp.Registry.prototype.setList=function(e){for(var t in e)this.set(t,e[t])},window.console||(window.console={log:function(){},info:function(){},warn:function(){},error:function(){}});var utils,webApp=webApp||{};(utils=utils||{}).date={format:function(e,t){return new Date(e).format(t)},addLeadingZero:function(e){var t=e.toString();return 1==t.length&&(t="0"+t),t},toString:function(e){return e.getFullYear()+"-"+this.addLeadingZero(e.getMonth()+1)+"-"+this.addLeadingZero(e.getDate())},timeZoneDiff:function(e){var t=new Date;return 36e5*(parseInt(e)+t.getTimezoneOffset()/60)},datesDiff:function(e,t){return e.getTime()-t.getTime()},fromString:function(e,t){var i=e.split(" "),r=i[0].split("-"),a=i[1].split(":"),n=new Date(r[0],r[1]-1,r[2],a[0],a[1],0);return n.setTime(n.getTime()-t),n},isDate:function(e){if(/^\d{4}\-\d{2}\-\d{2}$/.test(e)){var t=e.split("-")[0],i=e.split("-")[1],r=e.split("-")[2],a=new Date(t,i-1,r),n=a.getFullYear()==t,s=a.getMonth()+1==i,o=a.getDate()==r;if(n&&s&&o)return!0}return!1},getSynchronizedToServerNow:function(){var e=new Date;return this.getSynchronizedToServerDate(e)},checkTimezoneOverlap:function(){var e,t=new Date,i=t.getTime(),r=new Date;webApp&&webApp.SERVER_TIMESTAMP&&(i+=1e3*(webApp.SERVER_TIMESTAMP-webApp.LOCAL_TIMESTAMP),e=60*r.getTimezoneOffset()*1e3,r.setTime(i+e));return r.getDay()!==t.getDay()},getSynchronizedToServerDate:function(e){var t,i=e.getTime(),r=new Date;webApp&&webApp.SERVER_TIMESTAMP&&(i+=1e3*(webApp.SERVER_TIMESTAMP-webApp.LOCAL_TIMESTAMP),t=60*r.getTimezoneOffset()*1e3,r.setTime(i+t));return r},isValidDaysInMonth:function(e,t,i){var r=t-1,a=new Date(i,r,e);return e==a.getDate()&&r==a.getMonth()&&i==a.getFullYear()},age:function(e){var t=new Date,i=t.getFullYear()-e.getFullYear(),r=t.getMonth()-e.getMonth();return(r<0||0===r&&t.getDate()<e.getDate())&&i--,i},topicFormat:function(e){var t=e.getDate();t=t<10?"0"+t:t;var i=e.getMonth()+1;return t+"-"+(i=i<10?"0"+i:i)+"-"+e.getFullYear()},formatFromString:function(e,t){return this.fromString(e,0).format(t)}},utils.oop={paramsReader:function(e,t){if("object"==typeof t)for(var i in t)e[i]=t[i]},checkParamsLengthAndType:function(e,t){if(utils.type.isObject(t)){for(var i in e){if(!(i in t))return!1;if(utils.type.isString(e[i])){if(!utils.type[e[i]](t[i]))return!1}else if(utils.type.isArray(e[i])){for(var r=!1,a=0;a<e[i].length;a++)if(utils.type[e[i][a]](t[i])){r=!0;break}if(!r)return!1}}return!0}return!1},getKeys:function(e){var t=[];if("object"==typeof e)for(var i in e)t.push(i);return t},sizeOf:function(e){var t=0;for(var i in e)"function"!=typeof e[i]&&t++;return t}},utils.type={isNull:function(e){return null==e},isNumber:function(e){return"number"==typeof e},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isFunction:function(e){return $.isFunction(e)},isArray:function(e){return $.isArray(e)},isObject:function(e){return $.isPlainObject(e)},isEmptyObject:function(e){return!(!this.isObject(e)||!$.isEmptyObject(e))},isjQueryObject:function(e){return e instanceof jQuery}},utils.get_html_translation_table=function(e,t){var i,r,a={},n={},s=0,o={},c={};if(o[0]="HTML_SPECIALCHARS",o[1]="HTML_ENTITIES",c[0]="ENT_NOQUOTES",c[2]="ENT_COMPAT",c[3]="ENT_QUOTES",i=isNaN(e)?e?e.toUpperCase():"HTML_SPECIALCHARS":o[e],r=isNaN(t)?t?t.toUpperCase():"ENT_COMPAT":c[t],"HTML_SPECIALCHARS"!==i&&"HTML_ENTITIES"!==i)throw new Error("Table: "+i+" not supported");for(s in a[38]="&amp;","HTML_ENTITIES"===i&&(a[160]="&nbsp;",a[161]="&iexcl;",a[162]="&cent;",a[163]="&pound;",a[164]="&curren;",a[165]="&yen;",a[166]="&brvbar;",a[167]="&sect;",a[168]="&uml;",a[169]="&copy;",a[170]="&ordf;",a[171]="&laquo;",a[172]="&not;",a[173]="&shy;",a[174]="&reg;",a[175]="&macr;",a[176]="&deg;",a[177]="&plusmn;",a[178]="&sup2;",a[179]="&sup3;",a[180]="&acute;",a[181]="&micro;",a[182]="&para;",a[183]="&middot;",a[184]="&cedil;",a[185]="&sup1;",a[186]="&ordm;",a[187]="&raquo;",a[188]="&frac14;",a[189]="&frac12;",a[190]="&frac34;",a[191]="&iquest;",a[192]="&Agrave;",a[193]="&Aacute;",a[194]="&Acirc;",a[195]="&Atilde;",a[196]="&Auml;",a[197]="&Aring;",a[198]="&AElig;",a[199]="&Ccedil;",a[200]="&Egrave;",a[201]="&Eacute;",a[202]="&Ecirc;",a[203]="&Euml;",a[204]="&Igrave;",a[205]="&Iacute;",a[206]="&Icirc;",a[207]="&Iuml;",a[208]="&ETH;",a[209]="&Ntilde;",a[210]="&Ograve;",a[211]="&Oacute;",a[212]="&Ocirc;",a[213]="&Otilde;",a[214]="&Ouml;",a[215]="&times;",a[216]="&Oslash;",a[217]="&Ugrave;",a[218]="&Uacute;",a[219]="&Ucirc;",a[220]="&Uuml;",a[221]="&Yacute;",a[222]="&THORN;",a[223]="&szlig;",a[224]="&agrave;",a[225]="&aacute;",a[226]="&acirc;",a[227]="&atilde;",a[228]="&auml;",a[229]="&aring;",a[230]="&aelig;",a[231]="&ccedil;",a[232]="&egrave;",a[233]="&eacute;",a[234]="&ecirc;",a[235]="&euml;",a[236]="&igrave;",a[237]="&iacute;",a[238]="&icirc;",a[239]="&iuml;",a[240]="&eth;",a[241]="&ntilde;",a[242]="&ograve;",a[243]="&oacute;",a[244]="&ocirc;",a[245]="&otilde;",a[246]="&ouml;",a[247]="&divide;",a[248]="&oslash;",a[249]="&ugrave;",a[250]="&uacute;",a[251]="&ucirc;",a[252]="&uuml;",a[253]="&yacute;",a[254]="&thorn;",a[255]="&yuml;"),"ENT_NOQUOTES"!==r&&(a[34]="&quot;"),"ENT_QUOTES"===r&&(a[39]="&#39;"),a[60]="&lt;",a[62]="&gt;",a)n[String.fromCharCode(s)]=a[s];return n},utils.htmlspecialchars_decode=function(e,t){var i,r="",a="",n="";if(a=e.toString(),!1===(i=this.get_html_translation_table("HTML_SPECIALCHARS",t)))return!1;for(r in i)n=i[r],a=a.split(n).join(r);return a=a.split("&#039;").join("'")},utils.prepareJSONStr=function(e){return e=(e=e.replace(/\\/g,"\\\\")).replace(/"/g,'\\"')},(utils=utils||{}).numbers={isPositiveInt:function(e){return e.replace(/\D/g,"")==e&&0<=e},getPercentage:function(e,t){var i=!1;return e=parseFloat(e),t=parseFloat(t),0===e&&0===t?i=50:isNaN(e)||isNaN(t)||(i=e/(e+t)*100,i=Math.round(10*i)/10),i},numberToShortString:function(e,t){t=Math.pow(10,t);for(var i=["K","M"],r=i.length-1;0<=r;r--){var a=Math.pow(10,3*(r+1));if(a<=e){1e3==(e=Math.round(e*t/a)/t)&&r<i.length-1&&(e=1,r++),e+=i[r];break}}return e},toFloatMoney:function(e,t){t=t||2;var i,r=e.toString(),a=r.indexOf("."),n=0;return n=-1!=a&&(i=r.length-a)>t?Math.abs(e+Math.pow(10,-i)).toFixed(t):Math.abs(e).toFixed(t),parseFloat(n)},formatMoney:function(e,t){var i=!1===(t=t||{}).currency?"":t.currency||"&pound;";if(null==e||isNaN(e))i+="NA";else{e<0?i="-"+i:0<e&&t.plus&&(i="+"+i);var r=t.precision||2;i+=this.toFloatMoney(e,r).toFixed(2)}return i},factorial:function(e){return 0==e?1:e*this.factorial(e-1)},fixJsFloat:function(e){var t=e.toString(),i=t.indexOf(".");return 3<t.substr(i).length?Math.floor(100*e)/100:e}},namespace("utils.moment"),utils.moment={FORMAT_FULL_DATETIME:"YYYY-MM-DD HH:mm:ss",FORMAT_FULL_DATETIME_NO_SEC:"YYYY-MM-DD HH:mm",FORMAT_FULL_DATETIME_WITH_T:"YYYY-MM-DDTHH:mm:ssZ",FORMAT_FULL_ISO_DATE:"YYYY-MM-DD[T]HH:mm:ss[Z]",FORMAT_DATETIME:"YYYY-MM-DD",FORMAT_DATETIME_STRAIGHT:"DD-MM-YYYY",FORMAT_FULL_DATETIME_SHORT_MONTH:"h:mma, D MMM, YYYY",FORMAT_FULL_DATETIME_SHORT_MONTH_1:"h:mma, D MMM YYYY",FORMAT_FULL_DATETIME_SHORT_MONTH_2:"h:mma D MMM YYYY",FORMAT_DATE_SHORT_MONTH:"D MMM YYYY",FORMAT_TIME_24_HOURS:"HH:mm",FORMAT_TIME_12_HOURS:"h:mm",FORMAT_DAY_MONTH_FULL_WEEKDAY:"dddd, D MMMM",FORMAT_DATE_FULL_MONTH:"MMMM D, YYYY",FORMAT_DATE_SHORT_MONTH_AND_DAY:"MMM D",getSynchronizedToServerNow:function(e,t){var i=e||0,r=t||utils.moment.FORMAT_FULL_DATETIME,a=(new moment).add("seconds",i+60*moment().zone());return!1!==t&&(a=a.format(r)),a},getSynchronizedToServer:function(e,t,i){var r=e||new e,a=(i=i||"+00:00",t||utils.moment.FORMAT_FULL_DATETIME),n=r.add("ms",utils.date.timeZoneDiff(i));return!1!==t&&(n=n.format(a)),n}},(utils=utils||{}).clickReport=function(e,t){this.elementIdSelector="#"+e,this.appletUrl=t,this.image=new Image},utils.clickReport.prototype.init=function(){var r=this;$(this.elementIdSelector).bind("submit",function(e,t){var i=[];i.push(t.pricebox_uid,t.bookmaker_uid,t.outcome_uid,t.decimal_price,t.sport_desc,Math.random(),0,escape(t.page_description),"X","","","",$.cookie("RP_UID"),escape(null===$.cookie("PermRpLogin")?"":$.cookie("PermRpLogin"))),i="9,"+(i=i.join("&")).length+","+i,r.image.src=r.appletUrl+i})},namespace("utils"),utils.string={removeExtraCommas:function(e){e=e||"";return $.trim(e).replace(/\s+/g," ").replace(/(,\s*,)+/g,",").replace(/^(,\s?)+/g,"").replace(/(,\s?)+$/g,"")},diffusionToPascalCase:function(e){return e.replace(/(\w)(\w*)/g,function(e,t,i){return t.toUpperCase()+i.toLowerCase()})},textToDiffusion:function(e){var t=e;return t=t.replace(" ","_").toUpperCase()},addCommas:function(e){x=(e+="").split("."),x1=x[0],x2=1<x.length?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},capitalize:function(e){return(e=String(e)).charAt(0).toUpperCase()+e.substr(1).toLowerCase()},REGEXP_URI:/^(((?:([a-z][a-z0-9\+\-\.]*):)?(?:\/\/([^\/\?#]*))?)([^\?#]*))(?:\?([^#]*))?(?:#(.*))?$/,url:function(e){var t=String(e).match(this.REGEXP_URI);return t&&{href:t[1]||"",origin:t[2]||"",scheme:t[3]||"",authority:t[4]||"",path:t[5]||"",query:t[6]||"",hash:t[7]||""}},convertWhToRpCourseName:function(e){return{Bangor:"Bangor-On-Dee","Epsom Downs":"Epsom","W'Hampton":"Wolverhampton"}[e=$.trim(e)]||e},wordwrap:function(e,t,i,r){i=i||"\n";if(!e)return e;var a=".{1,"+(t=t||75)+"}(\\s|$)"+((r=r||!1)?"|.{"+t+"}|.+$":"|\\S+?(\\s|$)");return e.match(RegExp(a,"g")).join(i)},substring:function(e,t,i){var r=e;i=i||"...";return e&&e.length>t&&(r=r.substr(0,t)+i),r},replaceByCharCodes:function(e,t,i){var r="";if(e&&$.isArray(t)&&$.isArray(i)){var a=e.split("");for(var n in t){var s=String.fromCharCode(t[n]),o=String.fromCharCode(i[n]);for(var c in a){var l=a[c];a[c]=l.replace(s,o)}}r=a.join("")}return r},camelCase:function(e){var t="",i=e?e.split("-"):null;if(i)for(var r in i)t+=utils.string.capitalize(i[r]);return t},parseUrlParams:function(e){var t={},i=e?e.split("&"):null;if(i)for(var r=0;r<i.length;r++){var a=i[r].split("="),n=a.shift();try{t[n]=decodeURIComponent(a.join("="))}catch(e){t[n]=unescape(a.join("="))}}return t},urlCreate:function(e,t){return e=this.url(e||"/"),t=$.extend(this.parseUrlParams(e.query),t),e=e.href,$.isEmptyObject(t)||(e+="?"+$.param(t)),e},isRaceTitleStartsWithRace:function(e){return new RegExp("^Race.*$","i").test(e)},hashCode:function(e){var t=0;if(0==e.length)return t;for(i=0;i<e.length;i++)char=e.charCodeAt(i),t=(t<<5)-t+char,t&=t;return t}};try{if(void 0!==joop)throw new ReferenceError('"joop" is already defined. Failed to load jOOP module.');var joop=function(){var e=this,n={errors:{NOT_OBJECT:"Object expected.",NOT_PLAIN_OBJECT:"Plain object expected.",NOT_FUNCTION:"Function expected.",INVALID_PARENT_METHOD:"Invalid parent method."},specialClassProperties:/^(?:extend|construct)$/},s=function(e){return"object"==typeof e&&null!==e},o=function(e){return"function"==typeof e},c=function(e){if(!s(e))throw new TypeError(n.errors.NOT_OBJECT);var t=function(){};return t.prototype=e,new t};return{version:"3.2",createClass:function(e){var t,i=void 0===e?{}:e;if(!s(t=i)||t.constructor!=Object)throw new TypeError(n.errors.NOT_PLAIN_OBJECT);var r="construct"in i?i.construct:function(){this.$parent.apply(this,arguments)};if(!o(r))throw new TypeError(n.errors.NOT_FUNCTION);for(var a in r._name="constructor",function(e,t){if(!o(t)||!o(e))throw new TypeError(n.errors.NOT_FUNCTION);e.prototype=c(t.prototype),(e.prototype.constructor=e).prototype.parent=t.prototype,e.prototype.$parent=function(){var e=arguments.callee.caller,t=e._class.prototype.parent[e._name];if(!o(t))throw new Error(n.errors.INVALID_PARENT_METHOD+" ["+e._name+"]");return t.apply(this,arguments)}}(r._class=r,"extend"in i?i.extend:Object),i)n.specialClassProperties.test(a)||(r.prototype[a]=i[a],o(r.prototype[a])&&(r.prototype[a]._name=a,r.prototype[a]._class=r));return r},cloneObject:c,expose:function(){this._exposed||(this._exposed=!0,e.$class=this.createClass,e.$clone=this.cloneObject)}}}()}catch(e){}$.extend({few:function(){for(var e=[],t=0,i=arguments.length;t<i;t++)e.push(arguments[t][0]);return $(e)}}),(utils=utils||{}).localStorage=function(){var i="",r=null,a={};$(document).ready(function(){if("object"==typeof window.localStorage&&null!==window.localStorage)i="local";else{var e=$('<div id="ieDOMstorage" style="display:none;"></div>');$("body").append(e),r=e.get(0),i=r.addBehavior&&void 0!==r.load?(r.addBehavior("#default#userData"),r.load("namespace"),"dom"):"cookie"}try{s("isSupportStorage","y")}catch(e){i="cookie"}if("cookie"==i){var t=$.cookie("cookieStorage");t&&t.match(/^[\{\[]+.*[\}\]]+$/gi)&&(a=JSON.parse(t))}});var n=function(){$.cookie("cookieStorage",JSON.stringify(a),{expires:24,path:"/"})},s=function(e,t){e&&(void 0===t?t=!0:($.isArray(t)||"object"==$.type(t))&&(t=JSON.stringify(t)),"local"==i?window.localStorage.setItem(e,t):"dom"==i?(r.setAttribute(e,t),r.save("namespace")):(a[e]=t,n()))};return{set:function(e,t){s(e,t)},get:function(e){return function(e){if(!e)return null;var t=null;return"false"==(t="local"==i?window.localStorage.getItem(e):"dom"==i?r.getAttribute(e):a.hasOwnProperty(e)?a[e]:null)?t=!1:"true"==t?t=!0:"string"==typeof t&&t.match(/^[\{\[]+.*[\}\]]+$/gi)&&(t=JSON.parse(t)),t}(e)},remove:function(e){var t;(t=e)&&("local"==i?window.localStorage.removeItem(t):"dom"==i?(r.removeAttribute(t),r.save("namespace")):a.hasOwnProperty(t)&&(delete a[t],n()))},removeAll:function(){!function(){if("local"==i)window.localStorage.clear();else if("dom"==i)for(var e=r.XMLDocument.documentElement.attributes,t=0;t<e.length;t++)r.removeAttribute(e.name),r.save("namespace");else a={},n()}()},setVersion:function(e){var t=this.get("storageVersion");parseInt(t)!=parseInt(e)&&(this.removeAll(),this.set("storageVersion",e))}}}(),function(i){i.fn.limitMaxLength=function(t){i(this).keydown(function(e){i(this).val().length>=t&&i(this).val(i(this).val().substr(0,t))}),i(this).keyup(function(e){i(this).val().length>=t&&i(this).val(i(this).val().substr(0,t))})}}(jQuery),(utils=utils||{}).userPreferences=utils.userPreferences||{},$.extend(utils.userPreferences,{COOKIE_NAME_SITE_PREFERENCE:"RP_PREFERRED_SITE",SITE_TYPE_FULL:"FS",SITE_TYPE_MOBILE:"MOB",SITE_TYPE_IGNORE:"IGNORE",IS_DEVICE_ON_HOLD:0,cookieName:"COM_PREF_VALUE",stateName:"userPref",load:function(){var e=utils.stat.getCookie(this.stateName),t=",";!1===e&&(e=$.cookie(this.cookieName),t="|");var i={bookmakerId:null,rating:null,odds:null};if(e){var r=e.split(t);3<=r.length&&(i.rating=r[0],i.odds=r[1],i.bookmakerId=r[2])}return i},save:function(e){"object"==typeof e&&utils.stat.saveCookie(this.stateName,e.rating+","+e.odds+","+e.bookmakerId)},hightlightLabel:function(e){$(e).parents("ol:first").find("li").removeClass("active"),$(e).parents("li:first").addClass("active")},chooseFullSite:function(){return this._setSitePreferenceCookie(this.SITE_TYPE_FULL)},chooseMobileSite:function(){return this._setSitePreferenceCookie(this.SITE_TYPE_MOBILE,365)},_setSitePreferenceCookie:function(e,t){return 1===parseInt(this.IS_DEVICE_ON_HOLD,10)?$.cookie(this.COOKIE_NAME_SITE_PREFERENCE,e,{domain:this._getCookieDomain(),path:"/",expires:t}):$.cookie(this.COOKIE_NAME_SITE_PREFERENCE,this.SITE_TYPE_IGNORE,{domain:this._getCookieDomain(),path:"/",expires:0}),!0},_getCookieDomain:function(){var e=window.location.hostname,t=e.split(".");return 2<t.length&&(e="."+(t=t.slice(1)).join(".")),e}}),namespace("diffusion.utils"),diffusion.utils.common={apostropheRegexp:new RegExp("'","g"),PRICE_TYPE_DECIMAL:1,PRICE_TYPE_FRACTIONAL:2,drawPriceButton:function(e,t){var i,r,a=this.correctAllPrices(e.price);if(a=this.formatAllPrices(a),(void 0!==t.showOdds?t.showOdds:a.oddsType==this.PRICE_TYPE_DECIMAL&&0<a.decimal?this.PRICE_TYPE_DECIMAL:this.PRICE_TYPE_FRACTIONAL)==this.PRICE_TYPE_DECIMAL)i=a.decimal,r=a.decimalHist;else for(var n in"1"!=(i=a.fraction)&&"1/1"!=i||(i="Evs"),r=a.fractionHist)"1"!=r[n]&&"1/1"!=r[n]||(r[n]="Evs");if(void 0!==i&&""!=i){var s=[];if(a.suspend&&s.push("<em>"+i+"</em>"),t.showHistory&&void 0!==a.decimalHist){var o=0;for(var c in a.decimalHist){if(r[c]){var l=r[c];s.push("<em>"+l+"</em>"),o++}if(4==o)break}}t.showBookie=e.bookieId;var u,h,p=this.getOnClick(t,e.price);if(!a.suspend&&"betTemplate"in t?u=$.tmpl(t.betTemplate,{bet:i,bookmaker:bookiesData[e.bookieId].name,history:s.join(""),bookmakerId:e.bookieId}):(u=a.suspend?'<strong class="noBetting">No betting</strong>':this._getBetButtonCode({betPrice:i,bookiesData:bookiesData,data:e}),u+=s.join("")),e.betBlock.html(u),!a.suspend)h="betTag"in t?t.betTag:"button",$(h,e.betBlock).click(p);var d="h"+e.outcomeUid;"undefined"!=typeof horsesData&&d in horsesData&&(horsesData[d][t.showBookie]="SP"==e.price.fraction?9999:e.price.decimal)}},_getBetButtonCode:function(e){var t=this.correctPrice(e.betPrice),i=e.bookiesData,r=e.data,a=this.correctAllPrices(r.price);return['<button type="button" class="btn btnBet btnLight" data-price-decimal="'+a.decimal+'" data-price-fraction="'+a.fraction+'" title="',t," with ",i[r.bookieId].name,' - Click to bet">',t,"</button>"].join("")},_prepareBetBlock:function(e,i,r,a){if(e.length)if(1<e.length){var n=this;$.each(e,function(e,t){n._insertBetContent(t,i,r,a)})}else this._insertBetContent(e[0],i,r,a)},_insertBetContent:function(e,t,i,r){var a=t;i.length&&(a+=i.join("")),e.innerHTML=a,$(e).find("button").click(r)},getOnClick:function(t,i){if(void 0!==i){return function(){var e=void 0!==t.pageRef?t.pageRef:"";return bookiesData.bet(i,t.showBookie,e),!1}}},convertDate:function(e){var t=e.split("-");return t[2]+"-"+t[1]+"-"+t[0]},convertTime:function(e){var t=e.split(".");2!=t.length&&(t=e.split(":"));var i=parseInt(t[0]);return(i=11<i?i:i+12)+t[1]},convertStrToDiff:function(e){return e.replace(/(^\s+)|(\s+$)/g,"").replace(/ /g,"_").replace(/&acute;/gi,"").replace(/&rsquo;/gi,"").toUpperCase().replace(/[^\d\w:\-]/gi,"").replace(/_aw$/i,"").replace(/_ire$/i,"")},convertHorseNameToDiff:function(e){return e.replace(/(^\s+)|(\s+$)/g,"").replace(/ /g,"_").replace(/&acute;/g,"").replace(/&rsquo;/g,"").toUpperCase().replace(/[^\d\w:\-]/gi,"")},convertCourseNameToDiff:function(e){return e.replace(/(^\s+)|(\s+$)/g,"").replace(/ /g,"_").replace(/&acute;/g,"").toUpperCase().replace(/[^\d\w:\-]/gi,"").replace(/_aw/i,"")},bookiesCached:{},getBookieIdByName:function(e){if(void 0===e)return null;if(void 0!==this.bookiesCached[e])return this.bookiesCached[e];var t=e.replace(/_/g," ").toUpperCase(),i=null;for(var r in bookiesData)if(0==r.indexOf("B")&&bookiesData[r].betName.toUpperCase()==t){i=this.bookiesCached[e]=r;break}return i},getEachWayTerms:function(){return diffusion.eachWay||(diffusion.eachWay={}),diffusion.eachWay},correctAllPrices:function(e){return void 0!==e.decimal&&(e.decimal=this.correctPrice(e.decimal)),void 0!==e.fraction&&(e.fraction=this.correctPrice(e.fraction)),void 0!==e.decimalHist&&(e.decimalHist=this.correctHistPrices(e.decimalHist)),void 0!==e.fractionHist&&(e.fractionHist=this.correctHistPrices(e.fractionHist)),e},correctHistPrices:function(e){for(i in e)""!=e[i]&&(e[i]=this.correctPrice(e[i]));return e},correctPrice:function(e){return"string"!=typeof e&&(e=e.toString()),".0"==e.substr(e.length-2)?e=e.substr(0,e.length-2):"/1"==e.substr(e.length-2)&&(e=e.substr(0,e.length-2)),e},formatAllPrices:function(e){return void 0!==e.decimal&&(e.decimal=this.formatDecimalPrice(e.decimal)),void 0!==e.decimalHist&&(e.decimalHist=this.formatHistPrices(e.decimalHist)),e},formatDecimalPrice:function(e){return Math.floor(100*+e)/100},formatHistPrices:function(e){for(i in e)""!=e[i]&&(e[i]=this.formatDecimalPrice(e[i]));return e}},namespace("diffusion.utils"),void 0===diffusion.utils.outcome&&(diffusion.utils.outcome={outcomes:{},competition:{},setData:function(e){for(var t in e){var i=e[t];void 0===this.outcomes[i.name]?this.outcomes[i.name]=this.getOutcome(i,!0):$.extend(this.outcomes[i.name],this.getOutcome(i,!1)),void 0!==i.priceboxId&&(void 0===this.competition[i.priceboxId]?this.competition[i.priceboxId]=[i.outcomeId]:this.competition[i.priceboxId].push(i.outcomeId))}},getOutcome:function(e,t){var i=["priceboxId","outcomeId","id"],r={};for(var a in i)void 0!==e[i[a]]?r[i[a]]=e[i[a]]:t&&(r[i[a]]=0);return r},getDataByName:function(e){var t=this.outcomes[e];return void 0===t&&(t=this.getOutcome({})),t},getOutcomeUidByName:function(e){return this.getDataByName(e).outcomeId},getPriceboxByName:function(e){return this.getDataByName(e).priceboxId},getIdByName:function(e){return this.getDataByName(e).id},getOutcomeUidByRace:function(e){var t=this.competition[e];return void 0===t&&(t=[]),t},getNameByOutcomeId:function(e){var t="";for(var i in this.outcomes)if(this.outcomes[i].outcomeId==e){t=i;break}return t}}),diffusion.utils.topic={PREFERRED_BOOKMAKER:"/PREFERRED_BOOKMAKER",preferredBookmaker:null,setPreferredBookmaker:function(e){this.preferredBookmaker=e},getPreferredBookmaker:function(){return this.preferredBookmaker},prepareTopic:function(e){return this.preferredBookmaker&&(e=this.processPreferredBookmakres(e)),e},processPreferredBookmakres:function(e){if(0<e.indexOf(this.PREFERRED_BOOKMAKER)){var t=this.getPreferredBookmaker(),i=e;"BEST_ODDS"==t&&(t="BOOK_ALL",i=i.replace(/^GENERAL\//,"AGG_GENERAL/")),e=i.replace(this.PREFERRED_BOOKMAKER,"/"+t)}return e}},namespace("diffusion.types"),diffusion.types.AbstractPrice=function(){},function(){this.prefix="",this.prefixEachWay="",this.template="",this.bookmakerId="",this.callbacks="",this.templateNamespace="diffusion-price.",this.mainBookmaker="",this.INDEX_TOPIC_SPORT_NAME=1,this.INDEX_TOPIC_DATE=2,this.INDEX_TOPIC_COMPETITION_NAME=3,this.INDEX_TOPIC_EVENT_NAME=4,this.INDEX_TOPIC_MARKET_NAME=5,this.INDEX_TOPIC_OUTCOME_NAME=6,this.INDEX_TOPIC_BOOKMAKER_NAME=7,this.BEST_ODDS_WWW="BEST_ODDS",this.BEST_ODDS="BEST_ODDS",this.BOOKMAKER_WH="WH_OXI",this.TOPIC_VALUE_EACHWAY="EACH_WAY",this.TOPIC_VALUE_INFO="INFO",this.ACTION_CLEAR=1,this.ACTION_UPDATE=2,this.initCommon=function(e){return this.data=e.data,this.prefix=e.prefix,this.prefixEachWay=e.prefixEachWay,this.prefixInfo=e.prefixInfo,this.useBookmaker=e.useBookmaker,this.preferredFilter=e.preferredFilter,this.storage=e.storage,this.pageRef=e.pageRef,this.mainBookmaker=e.mainBookmaker,!0},this.init=function(e){this.initCommon(e)},this.proceed=function(){},this.getStorageData=function(){return{key:0}},this.getClearKey=function(){return this._getOutcomeName()},this.getBlock=function(){return null},this.render=function(e){if(this.template){var t=this.getBlock();if(t&&t.length){var i=this._getBookmakerName();if(""===this.mainBookmaker){var r=rp.Bookmaker.getPreferredAbbr();if(this.preferredFilter)if(r===this.BEST_ODDS)i=this.BEST_ODDS;else if(r!=i)return!1}else if(i!=this.mainBookmaker)return!1;this._getOutcomeName();var a=[i];for(var n in this._isAddBestOdds(i)&&a.push(this.BEST_ODDS),a){var s=a[n];t=this.getBlock(rp.Bookmaker.getIdByName(s));var o=this._getTemplateParams(s,e);if(o.canShow){var c="";e==this.ACTION_UPDATE&&(c=$.tmpl(this.template,o)),t.html(c);var l=this.getOnclickBlock(t);if(l&&(t=l),t.unbind("click.price"),e==this.ACTION_UPDATE){var u=this._getOnclick(s);"function"==typeof u&&t.bind("click.price",u)}}}}}},this._isAddBestOdds=function(e){return!1},this.clear=function(){this.render(this.ACTION_CLEAR)},this.draw=function(){this.render(this.ACTION_UPDATE)},this._getOutcomeName=function(){return this.data.topic[this.INDEX_TOPIC_OUTCOME_NAME]},this._getOutcomeFormattedName=function(){return this._getOutcomeName().replace(/_/g," ")},this._getOutcomeUcFirstName=function(){this._getOutcomeFormattedName();return this._getOutcomeFormattedName().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},this._getSportName=function(){return this.data.topic[this.INDEX_TOPIC_SPORT_NAME]},this._getEventName=function(){return this.data.topic[this.INDEX_TOPIC_EVENT_NAME]},this._getDate=function(){return this.data.topic[this.INDEX_TOPIC_DATE]},this._getCompetitionName=function(){return this.data.topic[this.INDEX_TOPIC_COMPETITION_NAME]},this.isPriceDecimal=function(){return common.price.isPriceDecimal()},this._getBookmakerName=function(){var e=this.data.topic[this.INDEX_TOPIC_BOOKMAKER_NAME];return e===this.BEST_ODDS_WWW&&(e=this.BEST_ODDS),e},this._getBookmakerId=function(e){var t=e||this._getBookmakerName();return rp.Bookmaker.getIdByName(t)},this._getBookmakerFormattedName=function(e){var t=e||this._getBookmakerName(),i=this._getBookmakerId(t);return i?rp.Bookmaker[i].name:""},this._getTemplateParams=function(){return{canShow:!1}},this._getOnclick=function(){return!1},this.preProcess=function(e){this._callback("preProcess",e)},this.postProcess=function(e){this._callback("postProcess",e)},this.getOnclickBlock=function(e){return this._callback("getOnclickBlock",e)},this._callback=function(e,t){return this.callbacks&&this.callbacks in diffusion.callbacks&&e in diffusion.callbacks[this.callbacks]?diffusion.callbacks[this.callbacks][e](this,t):null},this._getFromStorage=function(e,t,i,r,a){var n=this.storage;return e=e?"d"+e:e,i=i?"e"+i:i,$.each([e,t,i,r,a],function(e,t){n&&t&&(n=n[t])}),n},this.getEventStorage=function(){return this._getFromStorage(this._getDate(),this._getCompetitionName(),this._getEventName())},this.getOutcomeStorage=function(){return this._getFromStorage(this._getDate(),this._getCompetitionName(),this._getEventName(),this._getOutcomeName())},this.getBookmakerStorage=function(){return this._getFromStorage(this._getDate(),this._getCompetitionName(),this._getEventName(),this._getOutcomeName(),this._getBookmakerName())}}.call(diffusion.types.AbstractPrice.prototype),namespace("diffusion.types"),diffusion.types.Price=function(){},extend(diffusion.types.Price,diffusion.types.AbstractPrice,function(e,t){this.INDEX_DATA_FRACTIONAL_PRICE=1,this.INDEX_DATA_DECIMAL_PRICE=2,this.INDEX_DATA_BETSLIP=3,this.INDEX_DATA_IS_SUSPENDED=5,this.INDEX_DATA_DIRECTION=9,this.INDEX_BETSLIP_OUTCOME=0,this.INDEX_BETSLIP_PRICE=2,this.INDEX_BETSLIP_EVENT=3,this.INDEX_BETSLIP_MEETING=4,this.POPUP_TIMEOUT=2e3,this.POPUP_SELECTOR=".has-popup",this.POPUP_TEMPLATE="diffusion-price.price-popup",this.EVENT_BEST_ODDS_BLUR="click.bestOddsBlur",this.betslip=null,this.bestOddsSelector="bestOddsBlock",this.getBlock=function(e){var t=this.prefix+this._getOutcomeName();return this.useBookmaker&&(t+="_"+(e||this._getBookmakerId())),$(t)},this.init=function(e){return!!this.initCommon(e)&&(this.template=e.templates.price?this.templateNamespace+e.templates.price:"",this.templateBestOdds=e.templates.bestOdds?this.templateNamespace+e.templates.bestOdds:"",this.callbacks=e.callbacks.price||{},!0)},this._getTemplateParams=function(e,t){var i,r,a,n;if(t==this.ACTION_CLEAR)return{canShow:!0};if(e==this.BEST_ODDS){var s=this.getOutcomeStorage();if(!(s&&this.BEST_ODDS in s))return{canShow:!1};var o=s[this.BEST_ODDS].decimal;i=this._getPrice(this.isPriceDecimal(),s[this.BEST_ODDS]);var c=[];for(var l in s)l!=this.BEST_ODDS&&-1!=$.inArray(l,diffusion.config.bookmakersAllowed)&&(s[l].suspended||s[l].decimal!=o||c.push(this._getBookmakerFormattedName(l)));r=i+" with "+c.join(", ")+" - Click to bet",a=s[this.BEST_ODDS].suspended,n=s[this.BEST_ODDS].direction}else r=(i=this._getPrice(this.isPriceDecimal()))+" with "+this._getBookmakerFormattedName(e)+" - Click to bet",a=this._isSuspended(),n=this._getDirection();return{bookmakerId:this._getBookmakerId(e),price:i,title:r,suspended:a,direction:n,canShow:!0}},this._getPrice=function(e,t){var i="",r=t?t.decimal:this._getPriceDecimal(),a=t?t.fractional:this._getPriceFractional();return i=e?r:a,"SP"!=a&&"0.0"!=r||(i="SP"),(t?t.suspended:this._isSuspended())&&(i="&mdash;"),i},this._getPriceDecimal=function(){var e=this.data.data[this.INDEX_DATA_DECIMAL_PRICE];return".0"==e.substr(e.length-2)&&(e=e.substr(0,e.length-2)),e},this._getPriceFractional=function(){var e=this.data.data[this.INDEX_DATA_FRACTIONAL_PRICE];return"/1"==e.substr(e.length-2)&&(e=e.substr(0,e.length-2)),"1"==e&&(e="Evs"),e},this._isSuspended=function(e,t){return 1==parseInt(this.data.data[this.INDEX_DATA_IS_SUSPENDED])},this.getStorageData=function(){var e={};return e["d"+this._getDate()]={},e["d"+this._getDate()][this._getCompetitionName()]={},e["d"+this._getDate()][this._getCompetitionName()]["e"+this._getEventName()]={},e["d"+this._getDate()][this._getCompetitionName()]["e"+this._getEventName()][this._getOutcomeName()]={},e["d"+this._getDate()][this._getCompetitionName()]["e"+this._getEventName()][this._getOutcomeName()][this._getBookmakerName()]={decimal:this._getPriceDecimal(),decimalForSort:this._isSuspended()?999999:this._getPriceDecimal(),fractional:this._getPriceFractional(),fraction:this._getPriceFractional(),suspended:this._isSuspended(),direction:this._getDirection(),price:this._getPrice(this.isPriceDecimal()),outcomeTopicID:this._getOutcomeName(),outcomeName:this._getOutcomeFormattedName(),sportTopicID:this._getSportName(),bookiePrice:this._getBookiePrice(),bookieEvent:this._getBookieEvent(),bookieOutcome:this._getBookieOutcome(),bookieMeeting:this._getBookieMeeting(),bookmakerName:this._getBookmakerFormattedName(),bookmakerId:this._getBookmakerId()},e},this._getOnclick=function(n,s){function o(e){for(var t=String(e||"").split("_"),i=0,r=t.length;i<r;i++)t[i]=utils.string.capitalize(t[i]);return t.join(" ")}var e,c=this,l=c._getFromStorage(c._getDate(),c._getCompetitionName(),c._getEventName(),c._getOutcomeName(),n);if(l&&l.suspended)e=!1;else if(RPOST.isIPadWebView)e=function(){var e=c._getFromStorage(c._getDate(),c._getCompetitionName(),c._getEventName(),"EACH_WAY",n),t=l.fraction;-1===t.indexOf("/")&&(t+="/1");var i="rphd://betslip?status=good&corse="+o(c._getCompetitionName())+"&horseId=&raceId=&fraction="+t+"&decimal="+l.decimal+"&horseName="+o(c._getOutcomeName())+"&raceTime="+c._getEventName().replace(/(\d{2})(\d{2})/,"$1:$2")+"&betslip="+l.bookieOutcome+"%7C%7C%7C%7C&raceDate="+c._getDate();e&&(2<=rp.betting.EachWay.create({num:e.ewtOffered[0],den:e.ewtOffered[1],places:e.ewtPlaces}).numberOfPlaces()&&(i+="&eachWay=yes&eachWayData="+e.ewtOffered[0]+"/"+e.ewtOffered[1]+"%7C"+e.ewtPlaces));window.location=i};else if(n==this.BEST_ODDS)e=function(){return diffusion.BestOddsPopup.getInstance().showPopup(this,{outcomeName:c._getOutcomeName(),bookmakers:c._getFromStorage(c._getDate(),c._getCompetitionName(),c._getEventName(),c._getOutcomeName()),eachWay:c._getFromStorage(c._getDate(),c._getCompetitionName(),c._getEventName(),"EACH_WAY"),info:c._getFromStorage(c._getDate(),c._getCompetitionName(),c._getEventName(),"INFO"),listener:c}),!1};else{if(rp.Bookmaker.getProvider(n)){var u,h,t=this.data.topic.slice(0,-1);t[this.INDEX_TOPIC_BOOKMAKER_NAME]=n,t[this.INDEX_TOPIC_OUTCOME_NAME]=this.TOPIC_VALUE_EACHWAY,u=t.join("/"),t[this.INDEX_TOPIC_OUTCOME_NAME]=this.TOPIC_VALUE_INFO,h=t.join("/"),e=function(){if(diffusion.BestOddsPopup.getInstance().hidePopup(),!s){var e=$(this),t=e.find(".bubbleShow"),i=$.tmpl(c.POPUP_TEMPLATE);t.length&&(e=t),e.rpBubble({position:"top",extraClass:"addBubble",insertHTML:i}).rpBubble("show"),"undefined"!=typeof _pricePopupTimerHandler&&clearTimeout(_pricePopupTimerHandler),_pricePopupTimerHandler=setTimeout(function(){e.rpBubble("hide").rpBubble("destroy")},c.POPUP_TIMEOUT)}var r=rp.www.betslip.Application.getInstance(),a=l.fractional;return"function"==typeof RPOST.clickReport&&RPOST.clickReport({pricebox_uid:diffusion.utils.outcome.getPriceboxByName(l.outcomeTopicID),outcome_uid:diffusion.utils.outcome.getOutcomeUidByName(l.outcomeTopicID),bookmaker_uid:c._getBookmakerId(n).substr(1),page_description:"("+RPOST.siteType+") "+c.pageRef,decimal_price:l.decimal,sport_desc:l.sportTopicID}),r.selection({id:l.bookieOutcome,price:"SP"===a?null:a,isSP:"SP"===a,data:{horseName:o(c._getOutcomeName()),courseName:o(c._getCompetitionName()),raceDate:c._getDate(),time:c._getEventName().replace(/(\d{2})(\d{2})/,"$1:$2"),eachWayTopic:u,infoTopic:h}},n),!1}}else e=function(){return diffusion.BestOddsPopup.getInstance().hidePopup(),rp.Bookmaker.bet(l,c._getBookmakerId(n),c.pageRef),!1}}return e},this._getBookiePrice=function(){return this._getBetslip()[this.INDEX_BETSLIP_PRICE]},this._getBookieEvent=function(){return this._getBetslip()[this.INDEX_BETSLIP_EVENT]},this._getBookieOutcome=function(){return this._getBetslip()[this.INDEX_BETSLIP_OUTCOME]},this._getBookieMeeting=function(){return this._getBetslip()[this.INDEX_BETSLIP_MEETING]},this._getBetslip=function(){if(!this.betslip){var e=this.data.data[this.INDEX_DATA_BETSLIP];this.betslip=e.split("|")}return this.betslip},this._getDirection=function(){return this.data.data[this.INDEX_DATA_DIRECTION]},this.proceed=function(){diffusion.BestOddsPopup.getInstance().updatePopup(this.getBlock("B0"),{bookmakers:this.getOutcomeStorage(),eachWay:this._getFromStorage(this._getDate(),this._getCompetitionName(),this._getEventName(),"EACH_WAY"),info:this._getFromStorage(this._getDate(),this._getCompetitionName(),this._getEventName(),"INFO"),listener:this})},this._isAddBestOdds=function(e){return!(e==this.BEST_ODDS||!this.useBookmaker)}}),namespace("diffusion.types"),diffusion.types.PriceHistory=function(){},extend(diffusion.types.PriceHistory,diffusion.types.Price,function(e,r){this.INDEX_DATA_BETSLIP=0,this.INDEX_DATA_IS_SUSPENDED=1,this.INDEX_DATA_FRACTIONAL_PRICE_HISTORY=2,this.INDEX_DATA_DECIMAL_PRICE_HISTORY=7,this.isShowDenominatorOne=!1,this.showEndingZero=!1,this.init=function(e){return!!this.initCommon(e)&&(this.isShowDenominatorOne=e.isShowDenominatorOne||!1,this.showEndingZero=e.showEndingZero||!1,this.template=e.templates.priceHistory?this.templateNamespace+e.templates.priceHistory:"",this.callbacks=e.callbacks.priceHistory||{},!0)},this._getHistory=function(e,t){var i=t?t.historyDecimal:this._getHistoryDecimal(),r=t?t.historyFractional:this._getHistoryFractional(),a=[];for(var n in a=e?i:r)"SP"!=r[n]&&"0.0"!=i[n]||(a[n]="SP");return a},this._getPriceDecimal=function(e){e=e||0;var t=this.data.data[this.INDEX_DATA_DECIMAL_PRICE_HISTORY+e];return this.showEndingZero?t=parseFloat(t).toFixed(2):".0"==t.substr(t.length-2)&&(t=t.substr(0,t.length-2)),t},this._getPriceFractional=function(e){e=e||0;var t=this.data.data[this.INDEX_DATA_FRACTIONAL_PRICE_HISTORY+e];return this.isShowDenominatorOne||"/1"!=t.substr(t.length-2)||(t=t.substr(0,t.length-2)),"1"==t&&(t="Evs"),t},this._getHistoryFractional=function(){for(var e,t=[],i=0;i<5&&(e=this._getPriceFractional(i));i++)t.push(e);return t},this._getHistoryDecimal=function(){for(var e,t=[],i=0;i<5&&(e=this._getPriceDecimal(i));i++)t.push(e);return t},this._getTemplateParams=function(e,t){var i=r._getTemplateParams.apply(this,arguments);return t==this.ACTION_CLEAR?{canShow:i.canShow}:(i.canShow&&(i.historyDecimal=this._getHistoryDecimal(),i.historyFractional=this._getHistoryFractional(),i.priceHistory=this._getHistory(this.isPriceDecimal())),i)}});var rpDates={gsMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],gsDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]};Date.prototype.format=function(e){if(!this.valueOf())return" ";var t=this,i=new RegExp("(yyyy|mmmm|mmm|mm|0mm|dddd|ddd|dd|0dd|hh|nn|mn|ss|a/p)","gi");return e.replace(i,function(e){switch(e.toLowerCase()){case"yyyy":return t.getFullYear();case"mmmm":return rpDates.gsMonthNames[t.getMonth()];case"mmm":return rpDates.gsMonthNames[t.getMonth()].substr(0,3);case"mm":return t.getMonth()+1;case"0mm":return("0"+(t.getMonth()+1)).slice(-2);case"dddd":return rpDates.gsDayNames[t.getDay()];case"ddd":return rpDates.gsDayNames[t.getDay()].substr(0,3);case"dd":return t.getDate();case"0dd":return("0"+t.getDate()).slice(-2);case"hh":return(h=t.getHours()%12)?h:12;case"nn":return t.getMinutes();case"mn":return t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();case"ss":return t.getSeconds();case"a/p":return t.getHours()<12?"a":"p"}})},function(u){var t="ontouchstart"in window,e=t?"touchstart":"mousedown",i=t?"touchend":"mouseup",r=t?"touchmove":"mousemove",h=function(e){return t?e.originalEvent.touches[0]:e};u.event.special.swipe={setup:function(){u(this).bind(e+".startSwap",function(e){e=h(e);var a=u(this),n=e.screenX,s=e.screenY,o=n,c=s,l=(new Date).getTime();u(document).bind(r+".moveSwap",function(e){var t=h(e);o=t.screenX,c=t.screenY,16<Math.abs(n-o)&&e.preventDefault()}).unbind(".endSwap").bind(i+".endSwap",function(){var e=o-n,t=c-s,i=(new Date).getTime()-l;if(60<Math.abs(e)&&Math.abs(t)<50){var r=e<0?"left":"right";a.trigger("swipe",[r,i])}u(document).unbind(".moveSwap").unbind(".endSwap")})})},teardown:function(){u(this).unbind(".startSwap"),u(document).unbind(".moveSwap").unbind(".endSwap")}}}(jQuery),(webApp=webApp||{}).WhErrorHandler=function(e){var t=e||{},i=function(){},n={user:t.user||i,developer:t.developer||i};return{generic:function(e,t){var i=n,r="function"==typeof e.code?e.code():null,a="function"==typeof e.message?e.message():null;1<r&&a?i.user(e.message()):-7==r?i.user('William Hill says: "'+e.message()+'"'):-100==r?i.user("Top up amount is below the minimum required."):r<0&&i.user("Unexpected error connecting to William Hill."),i.developer({statusCode:r,statusMessage:a,errorSource:t})}}},(webApp=webApp||{}).ErrorHandler={actionCore:"Core",actionWh:"WH",_category:"Errors",_errorTracker:null,_ignoreList:["Redirect","Deligate"],setErrorTracker:function(e){this._errorTracker=e},getErrorTracker:function(){return this._errorTracker},process:function(e,t,i){if(i=i||this.actionCore,this._ifShouldProcess(t)){var r=i+": "+e;t&&(r+="\n"+t.stack),this._console(r),this.getErrorTracker().trackEvent(this._category,i,e)}},_ifShouldProcess:function(e){var t=e&&e.name&&0<=$.inArray(e.name,this._ignoreList),i=!0;return(null==this.getErrorTracker()||t)&&(i=!1),i},_console:function(e){console.log(e)}},(webApp=webApp||{}).userSettings=function(){var r;return{set:function(e,t){r.set(e,t)},get:function(e){return"object"==typeof r?r.get(e):null},remove:function(e){r.remove(e)},setStorage:function(e){r=e},setDefaults:function(e){if(this.get("version")!=e){r.removeAll();var t={version:e,odds:"fractional",sortBy:"number",cardTab:"card",cardsListBy:"meetings",showUserBalance:!0};for(var i in t)this.set(i,t[i])}}}}(),(webApp=webApp||{}).mintClient=function(){var t={},i=null,r=null,a=null,n={};return{init:function(e){this.reset(),this.setParams(e)},reset:function(){t={},a=r=i=null,n={}},registerDefaultErrorHandlers:function(){this.registerErrorHandler(-20,this.sessionExpired),this.registerErrorHandler(-21,this.sessionExpired),this.registerErrorHandler(-3,this.sessionExpired),this.registerErrorHandler(106,this.sessionExpired)},registerErrorHandler:function(e,t){n[e]=t},unregisterErrorHandler:function(e){delete n[e]},sessionExpired:function(){if(i){var e=$.extend({},a.getDefaultParams());delete e.token,a.setDefaultParams(e),a.addRequestToQueueStart(a.getLastRequest()),a.unshiftRequest("AuthenticateAccount",{userName:i,password:r},function(){},function(){r=i=null,a.abortAll()})}},saveCredentials:function(e,t){i=e,r=t},getUserName:function(){return i},isLoggedIn:function(){return!!i},request:function(e,t,i,r){a.request(e,t,function(e){if(e){var t="";e.hasOwnProperty("statusCode")?t=e.statusCode:e.hasOwnProperty("status")&&(t=e.status,e.statusCode=t),"1"==t?i(e):t&&("function"==typeof n[t]?n[t](e):r(e))}},r)},setService:function(e){a=e},getService:function(){return a},setParams:function(e){t=e||e},getParams:function(){return t},getErrorHandler:function(e){return n[e]}}}(),function(a){a.fn.switchButton=function(t){return this.each(function(){if(a(this).data("switchButton")){var e=a(this).data("switchButton");if("string"==typeof t)switch(t){case"check":e.check();break;case"uncheck":e.uncheck();break;case"disabled":e.disable();break;case"enabled":e.enable();break;case"highlightPrice":e.highlightPrice()}}else a(this).data("switchButton",new i(this,t))})};var i=function(e,t){this.opt=a.extend({checked:!0,disabled:!1,enableText:"YES",enableId:"",disableText:"NO",disableId:"",activeClass:"switchBtnActive",disabledClass:"switchBtnDisabled",highlightPriceClass:"switchBtnDisabled_highlightPrice",extraClass:""},t),this.$input=a(e),this.$button=null,this.init()};a.extend(i.prototype,{init:function(){this.$input.attr("checked",this.opt.checked),this.createHtml(),this.$input.is(":disabled")||this.opt.disabled?this.disable():this.enable()},createHtml:function(){this.$input.wrap('<label class="switchBtn '+this.opt.extraClass+'"></label>'),this.$button=this.$input.parent(),this.$button.append('<span id="'+this.opt.enableId+'" class="enableText">'+this.opt.enableText+'</span><span id="'+this.opt.disableId+'" class="disableText">'+this.opt.disableText+"</span>"),this.setActiveClass()},addEvents:function(){var i,r=this;this.$button.unbind(".switchButtonClick").bind("click.switchButtonClick",function(e){e.preventDefault();var t=a(this).closest(".bricks").length?0:300;clearTimeout(i),i=setTimeout(function(){var e=!r.$input.attr("checked");r.$input.attr("checked",e).trigger("change",[]),r.setActiveClass(),"function"==typeof r.opt.callback&&r.opt.callback(e,r.$button)},t)})},setActiveClass:function(e){this.$button.toggleClass(this.opt.activeClass,!!this.$input.attr("checked"))},check:function(){this.$input.attr("checked",!0),this.setActiveClass()},uncheck:function(){this.$input.attr("checked",!1),this.setActiveClass()},enable:function(){this.$button.removeClass(this.opt.disabledClass),this.$input.attr("disabled",!1),this.addEvents()},disable:function(){this.$button.addClass(this.opt.disabledClass),this.$input.attr("disabled",!0),this.$button.unbind(".switchButtonClick")},highlightPrice:function(){this.$button.addClass(this.opt.highlightPriceClass)}})}(jQuery),(webApp=webApp||{}).core=function(){var n={},s="",o=[],c={},e="Portrait",t="Landscape",l=$([]),u="",h=$([]);return{init:function(e){n=e||{};var t=this,i=1140<$(window).width();n.dispatchCallback=function(e){webApp.core.dispatch(e)},webApp.isIOS_6&&!webApp.isTablet&&window.scroll(0,1),l=$("body"),this.bindChangeOrientation(),webApp.isTablet?u+=" desktopBrowser":u+=" mobileBrowser",webApp.isMobile||(u+=" desktopPC"),webApp.isTabletScreen&&(u+=" tabletScreen"),webApp.isAndroid&&(u+=" android",webApp.isAndroid_4&&(u+=" android4")),webApp.isIDevice&&(u+=" iOS",webApp.isIOS_5&&(u+=" iOS5")),navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)&&(u+=" ipad_ios7"),webApp.HorseDetailsController||(u+=" greyhoundBet"),l.addClass(u);var r;t.getViewManager();if($(document).on("click.highlight",function(e){h.removeClass("highlight highlightFade");var t=$([]);if("a"==e.target.tagName.toLowerCase())t=$(e.target);else{if(!$(e.target).closest("a").length)return;t=$(e.target).closest("a")}"absolute"!=(h=t).css("position")&&(h.addClass("highlight"),clearTimeout(r),r=setTimeout(function(){h.addClass("highlightFade")},150))}),$("span.btnBack").on("click.backClick",function(){window.history.go(-1)}),$("select").on("change.hideBar blur.hideBar",function(){webApp.viewManager.hideUrlBar()}),void 0!==webApp.prefBookmaker&&webApp.prefBookmaker.set(),webApp.isIDevice&&!webApp.isIPad){var a=t.getOrientation();$(window).bind("resize.fixSize",function(){var e=t.getOrientation();a==e?t.setCssClass():a=e})}webApp.$mainTabs.show(),this.getViewManager().init(n).setHelpers(c),this.getUrlManager().init(n),void 0!==webApp.prefBookmaker&&(webApp.userSettings.get("isDefaultBookieSet")&&webApp.userSettings.get("isLandingJourneyComplete")||$(window).bind("switchpage.landingBox",function(e,t){"news-story"!=t&&(setTimeout(function(){webApp.isDesktop&&!webApp.HorseDetailsController&&i?webApp.landing.initDesktopLanding():webApp.landing.show({template:"landing",callback:webApp.landing.bookieCallback})},200),$(window).unbind("switchpage.landingBox"))}),webApp.prefBookmaker.set())},dispatch:function(e){var t=e[0]||"",i=e[1]||{};if($(window).trigger("changeHistory",[e,s]),sessionStorage.setItem("prevControllerName",s),s!=t){for(var r=0;r<o.length;r++)o[r].destroy();o=[];try{var a=n.controllers[t].include;if(a)for(r=0;r<a.length;r++)o.push(this._setupController(a[r],t));else o.push(this._setupController(t))}catch(e){return void console.log(e.name+": "+e.message+". Controller name: "+t)}$(window).trigger(webApp.EVENT_CHANGE_CONTROLLER,[e]),s=t}$(window).trigger(webApp.EVENT_CHANGE_HASH,[e]);try{for(r=0;r<o.length;r++)o[r].setRequestParams(i).execute()}catch(e){if("Redirect"==e.name)return;console.log("Internal error: "+e.name+': "'+e.message+'" in '+e.fileName+" ("+e.lineNumber+")")}},_setupController:function(e,t){var i=this._getControllerClassName(e),r=this.getControllerConstructor(i);if(!r)throw"error404"!=e&&this.dispatch(["error404",{errorHash:window.location.hash}]),{name:"ParamError",message:'Controller class "'+i+'" doesn`t exists!'};var a=new r(e,$.extend({},n.controllers[e]));return a.setCore(this),t&&(a._parentName=t),a},_getControllerClassName:function(e){for(var t=e.split("-"),i=0;i<t.length;i++){var r=t[i];t[i]=r.charAt(0).toUpperCase()+r.slice(1)}return t.join("")+"Controller"},getControllerNamespaces:function(){return n.controllerNamespaces?n.controllerNamespaces:["webApp"]},getControllerConstructor:function(e){for(var t=this.getControllerNamespaces(),i=0;i<t.length;i++){var r=t[i];if(void 0!==window[r]&&"function"==typeof window[r][e])return window[r][e]}return!1},getAjaxManager:function(){return webApp.ajaxManager},getCacheManager:function(){return webApp.cacheManager},getViewManager:function(){return webApp.viewManager},getUrlManager:function(){return webApp.urlManager},addHelper:function(e,t){return c[e]=t,this},getHelper:function(e){if(!c[e])throw{name:"ParamError",message:'Helper instance "'+e+'" doesn`t exists!'};return c[e]},bindChangeOrientation:function(){var t=this,e=null;webApp.isAndroid?webApp.orientation=this.getOrientationBySize():webApp.orientation=this.getOrientation(),this.setCssClass(),webApp.isIDevice&&!webApp.isMobileEmulation?$(window).bind("orientationchange",function(){clearTimeout(e),e=setTimeout(function(){webApp.orientation=t.getOrientation(),t.setCssClass(),$(window).trigger(webApp.EVENT_CHANGE_ORIENTATION,{orientation:webApp.orientation})},350)}):$(window).bind("resize.webAppOrientation",function(){clearTimeout(e),e=setTimeout(function(){var e=t.getOrientation();e!==webApp.orientation&&(webApp.orientation=e,t.setCssClass(),$(window).trigger(webApp.EVENT_CHANGE_ORIENTATION,{orientation:webApp.orientation}))},240)})},getOrientation:function(){if(!webApp.isMobile||void 0===window.orientation)return this.getOrientationForBrowsers();switch(window.orientation){case-90:case 90:return t;default:return e}},getOrientationBySize:function(){return webApp.isMobile?$(window).width()>$(window).height()?t:e:this.getOrientationForBrowsers()},getOrientationForBrowsers:function(){return webApp.isTablet?$(window).width()<920?e:t:$(window).width()<$(window).height()?e:t},setCssClass:function(){webApp.orientation==e?l.removeClass("orientationLandscape").addClass("orientationPortrait"):l.removeClass("orientationPortrait").addClass("orientationLandscape"),webApp.isIOS_6&&!webApp.isTablet&&window.scroll(0,1),webApp.windowHeight=webApp.viewManager.getHeight()}}}(),(webApp=webApp||{}).ajaxManager=function(){var g={},m={},_=[],b={},v=0,w="Cannot connect to Racing Post.\nPlease check your internet connection and try again.",T="A problem has occurred while getting data from the Racing Post. Please try again later.";return{init:function(e){g=e,$(window).bind(webApp.EVENT_CHANGE_CONTROLLER,function(){for(var e in m)m[e]&&m[e].abort();m={},_=[],b={},v=0})},process:function(n){var e,t,i,r,a,s,o,c,l,u,h,p,d=this,f=n.getName();m[f]&&(m[f].abort(),m[f]=null,_=[],b[f]=null),e=n.getRequestParams(),i=0==(t=function(e){var t=e.getBlocksToLoad(),i=[],r={};for(var a in t){var n=e._getBlockCacheId(a);-1==_.indexOf(n)&&(i.push(a),_.push(n))}return r.blocks=i.join(","),r}(n)).blocks.length,r=g[f],e=$.extend({},e,t),a=function(e){try{if(m[f]=null,v--,n.pushData(e),0==v){for(var t in b)b[t].render(!0);_=[],b={}}}catch(e){console.log(e.name+": "+e.message)}},s=function(e,t,i){if(console.log("Error with GHB call."),v--,"abort"==t)return!0;var r,a;"timeout"==t?(r=d,a=n,confirm(w)?r.process(a):webApp.core.getUrlManager().goBack()):alert(T)},o=function(){m[f]=null},i?n.render():(v++,m[f]=(c=r,l=e,u=a,h=s,p=o,$.ajax({url:c,data:l,type:"GET",dataType:"json",success:u,error:h,complete:p}))),b[f]=n},makeRequest:function(e,t,i,r,a){return $.ajax({url:e,data:t,type:"GET",dataType:"json",success:i,error:r,complete:a})}}}(),(webApp=webApp||{}).cacheManager={_prefix:"cache ",_keysSeparator:"/",_cachedKeysRecordName:"cachedKeys",_cachedSizeRecordName:"cachedSize",_cachedSizeLimit:2e5,_cacheKeyDateLastUpdated:"cacheDateUpdated",_dateFormat:"YYYY-MM-DD",_storage:null,init:function(e,t){this._cachedSizeLimit=t||2e5,this._storage=e||{records:[],getItem:function(e){return this.records[e]||null},setItem:function(e,t){this.records[e]=t},removeItem:function(e){delete this.records[e]}}},_isCacheActual:function(e){var t=e.lifeTime,i=e.created,r=new Date(i),a=utils.date.getSynchronizedToServerNow(),n=t<a.getTime()-i,s=a.getUTCDate()!=r.getUTCDate();return!(n||s)},_clearOldStorageRecord:function(){var e=this._storage.getItem(this._cachedKeysRecordName);if(null!==e&&""!==e){var t=e.split(this._keysSeparator),i=t.filter(function(e){if(-1===webApp.blocksToLeaveCached.indexOf(e))return e}).shift();if(!i){var r=0;for(i in this._storage)-1!==i.indexOf("cache ")&&-1===webApp.blocksToLeaveCached.indexOf(i)?delete this._storage[i]:-1!==webApp.blocksToLeaveCached.indexOf(i)&&(r+=i.length+this._storage.getItem(i).length);return this._storage.setItem(this._cachedSizeRecordName,r),!1}t.splice(t.indexOf(i),1);var a=this._storage.getItem(i).length;this._storage.removeItem(i),console.log("removed from cache: "+i),console.log("available free space obtained: "+a),this._storage.setItem(this._cachedKeysRecordName,t.join(this._keysSeparator));var n=parseInt(this._storage.getItem(this._cachedSizeRecordName)||0);n-=a,this._storage.setItem(this._cachedSizeRecordName,n)}else{for(i in this._storage)-1!==i.indexOf("cache ")&&delete this._storage[i];this._storage.setItem(this._cachedSizeRecordName,0)}},setCache:function(e,t,i,r,a){try{var n=this._createCacheKey(e,i),s=JSON.stringify({data:t,keys:i,lifeTime:r,created:a||(new Date).getTime()}),o=s.length,c=2*o;if(c>parseInt(this._cachedSizeLimit))return console.log("Cache limit is less, than storing object size"),!1;if(parseInt(this._storage.getItem(this._cachedSizeRecordName))+o>parseInt(this._cachedSizeLimit))for(;parseInt(this._storage.getItem(this._cachedSizeRecordName))+c>parseInt(this._cachedSizeLimit)&&0<parseInt(this._storage.getItem(this._cachedSizeRecordName));)this._clearOldStorageRecord();var l=this._storage.getItem(this._cachedKeysRecordName)||"",u=l.length?l.split(this._keysSeparator):[];-1!==u.indexOf(n)?this.clearCache(e,i):(u.push(n),l=u.join(this._keysSeparator)),this._storage.setItem(n,s),this._storage.setItem(this._cachedKeysRecordName,l);var h=parseInt(this._storage.getItem(this._cachedSizeRecordName)||0);h+=o,this._storage.setItem(this._cachedSizeRecordName,h);var p=utils.moment.getSynchronizedToServerNow(0,this._dateFormat);this._storage.setItem(this._cacheKeyDateLastUpdated,p)}catch(e){console.log(e)}return!0},getCache:function(e,t){var i={};return this._storage.getItem(this._createCacheKey(e,t))?(i=JSON.parse(this._storage.getItem(this._createCacheKey(e,t))),$.isArray(i.data)?$.merge([],i.data):$.extend(!0,{},i.data)):null},isCached:function(e,t){var i={},r=!1;return this._storage.getItem(this._createCacheKey(e,t))?(i=JSON.parse(this._storage.getItem(this._createCacheKey(e,t))),this._isCacheActual(i)&&(r=!0),r):null},clearCache:function(e,t){t=t||!1;var i=this._storage.getItem(this._cachedKeysRecordName);if(null!==i){var r=i.split(this._keysSeparator),a=0,n=this._createCacheKey(e);if(t){var s=this._createCacheKey(e,t),o=this._storage.getItem(s);o&&(a+=o.length,this._storage.removeItem(s))}else for(s in r)0===r[s].indexOf(n)&&(a+=this._storage.getItem(r[s]).length,this._storage.removeItem(r[s]),delete r[s]);this._storage.setItem(this._cachedKeysRecordName,r.join(this._keysSeparator))}var c=parseInt(this._storage.getItem(this._cachedSizeRecordName)||0);c-=a,this._storage.setItem(this._cachedSizeRecordName,c)},clearAllCache:function(){var e=this._storage.getItem(this._cachedKeysRecordName);if(null!==e){var t=e.split(this._keysSeparator);for(var i in t)0===t[i].indexOf(this._prefix)&&this._storage.removeItem(t[i])}this._storage.setItem(this._cachedKeysRecordName,""),this._storage.setItem(this._cachedSizeRecordName,0)},showData:function(){console.dir(this._storage)},_createCacheKey:function(e,t){var i=Object.keys(t||{}).map(function(e){return"object"==typeof t[e]?this._hashCode(JSON.stringify(t[e])):t[e]},this),r=i.length?i.join("_"):"";return this._prefix+e+" | "+r},getCacheDateChanged:function(){var e=moment.utc(utils.date.getSynchronizedToServerNow()),t=this._storage.getItem(this._cacheKeyDateLastUpdated);if(!t)return!1;var i=moment.utc(t,this._dateFormat);return e.utc().date()-i.utc().date()||e.utc().month()-i.utc().month()},getCachedDataSize:function(){var e=parseInt(this._storage.getItem(this._cachedSizeRecordName));return isNaN(e)&&(e=0),e},_hashCode:function(e){var t,i,r=0;if(0==e.length)return r;for(t=0,i=e.length;t<i;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r}},(webApp=webApp||{}).history=webApp.history||{},webApp.urlManager=function(){var a,r="",f={},g={},m="",_="",p=!1,b=!1;return{getHash:function(){return window.location.href.replace(/^[^#]+/g,"")},setHash:function(e){window.location.hash=e},setLocation:function(e){window.location=e},replaseHash:function(e){var t=window.location.href,i=t.indexOf("#");-1!=i&&(t=t.substring(0,i)),window.location.replace(t+e)},parseHash:function(e){var t=["",{}];if(!e)return t;var i=(e=(e=e.substring(1)).replace(/^\/*|\/*$/g,"")).split("/");t[0]=decodeURIComponent(i[0]);var r=i[1];if(void 0===r)return t;for(var a in r=r.split("&")){var n=r[a].split("="),s=decodeURIComponent(n[0]),o=decodeURIComponent(n[1]||"");t[1][s]=o}return t},getControllerName:function(){var e=this.getHash();return this.parseHash(e)[0]},getParams:function(){var e=this.getHash();return this.parseHash(e)},processHash:function(e){var t=this.parseHash(e);if(webApp.isTablet){var i=this._config.deviceConfig&&this._config.deviceConfig.tablet||{};if(i.hasOwnProperty(t[0]))return t[1]=i[t[0]][1]?i[t[0]][1]:t[1],t[0]=i[t[0]][0],void this.replaseHash(this.createHash(t))}else{var r=this._config.deviceConfig&&this._config.deviceConfig.phone||{};if(r.hasOwnProperty(t[0]))return t[1]=r[t[0]][1]?r[t[0]][1]:t[1],t[0]=r[t[0]][0],void this.replaseHash(this.createHash(t))}a(t)},createHash:function(e){var t="#"+encodeURIComponent(e[0])+"/",i=[];for(var r in e[1])i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[1][r]));return t+=i.join("&")},changeLink:function(e,t,i){if(1==e.length){var r=this._filterHash(e.attr("href"));for(var a in r=this.parseHash(r),i&&(r[0]=i),t)r[1][a]=t[a];e.attr("href",this.createHash(r))}},changeParams:function(e){var t=this.parseHash(this.getHash());for(var i in e)t[1][i]=e[i];this.replaseHash(this.createHash(t))},goBack:function(){window.history.back()},init:function(e){if(this._config=e,r=e.defaultHash||"","function"!=typeof(a=e.dispatchCallback||null))throw{name:"ParamError",message:'Parameter "dispatchCallback" should be "function"'};var t=this.getHash(),i=this;g=e.tree,t&&"#"!=t||(this.setHash(r),t=r),this.initBack(),this.initBackButtonHandling(),this.processHash(t),$(window).bind("hashchange.webAppHashChange",function(){i.processHash(i.getHash()),!webApp.HorseDetailsController&&webApp.sortOrder&&(webApp.sortOrder={date:"desc",track:"asc",dis:"asc",trp:"asc",split:"asc",pos:"asc",fin:"asc",by:"asc",win:"asc",rem:"asc",wt:"asc",go:"asc",wght:"asc",sp:"asc",grade:"asc",cal:"asc"})})},initBack:function(){if(2==sessionStorage.version&&sessionStorage.backData)f=JSON.parse(sessionStorage.backData);else{for(var e in g)f[e]=[];f.all=[],sessionStorage.version=2}var t,u=this;if(!1===webApp.isMobile&&!webApp.HorseDetailsController){var i=$(".webApp"),r=i.wrap('<div class="mainWrapper clearfix"></div>').parent();r.prepend('<div class="layout-col1"><div class="wrap"></div></div>'),i.wrap('<div class="layout-col2"></div>'),$(".layout-col2").prepend('<div id="mainTabs" class="mainTabs desktop-PC"><div class="contentOverlay"></div><div class="js-ladbAdContainer ladbAdContainer"><div class="js-googleTagAds js-ladbSideAd" id="div-gpt-ad-1445252554342-0"></div></div><ul id="mainMenu" class="mainMenu clearfix"><li class="tab cardsTab"><a href="#meeting-list" id="meetingMenu" class="tabHref cardMenuItem meetingMenu" data-eventid="main_menu_cards"><i>\x3c!-- --\x3e</i> <div class="tabName">Cards</div></a><div class="subCategoryList"><a href="#meeting-list" class="cardsToday subTabHref" data-eventid="side_menu_cards_today"><div>Today</div></a><a href="#meeting-list" class="cardsFuture futureBtn subTabHref" data-eventid="side_menu_cards_future"><div>Future</div></a><a href="#meeting-list/r_date=trapDraws" class="cardsTrapDraws subTabHref" data-eventid="side_menu_cards_trap_draws"><div>Trap Draws</div></a><a href="#advanced-video" target="_blank" class="cardsRpgtv subTabHref" data-test-selector="cardsRpgtv" data-eventid="side_menu_cards_rpgtv"><div>RPGTV</div></a></div></li><li class="tab resultsTab"><a href="#results-list" id="resultsMenu" class="tabHref resultsMenuItem resultsMenu" data-eventid="main_menu_results"><i>\x3c!-- --\x3e</i> <div class="tabName">Results</div></a><div class="subCategoryList"><a href="#results-list" class="resultsToday subTabHref" data-eventid="side_menu_results_today"><div>Today</div></a><a href="#results-list" class="resultsArchive archiveCalendar subTabHref" data-eventid="side_menu_results_archive"><div>Archive</div></a></div></li><li class="tab newsTab"><a href="#news-home" id="newsMenu" class="tabHref newsMenuItem newsMenu" data-eventid="main_menu_news"><i>\x3c!-- --\x3e</i> <div class="tabName">News</div></a></li><li class="tab accountTab"><a href="#account-home" id="accountMenu" class="tabHref accountMenuItem accountMenu" data-eventid="main_menu_account"><i>\x3c!-- --\x3e</i> <div class="tabName">Accounts</div></a><li class="tab betSlipTab"><a href="#bet-slip" id="betslipMenu" class="tabHref betSlipItem betSlipMenu" data-test-selector="betSlipSideMenu"><i>\x3c!-- --\x3e<span class="betSlipCounter betSlipSideCounter betSlipCounter_side" data-test-selector="betSlipSideCounter">1</span></i> <div class="tabName">Bet Slip</div></a></li></ul></div>'),$(".mainTabs").hide(),webApp.$mainTabsLinks=$(".mainTabs").find(".tabHref"),$(".mainWrapper .mainTabs").prepend('<div class="sidebar-header"><div class="logo"></div></div>'),r.append('<div class="layout-col3"><div class="wrap"></div></div>'),$(".layout-col2 .mainTabs").attr("id","mainTabs-sidebar"),$("body > .mainTabs").addClass("desktop-PC"),webApp.mainTabsSubLinks=$(".mainTabs").find(".subTabHref"),webApp.mainTabsSubLinks.bind(webApp.eventTracker.EVENT_CLICK_TRACK_EVENT,function(){webApp.eventTracker.processElem(this)}),webApp.selectionsAlert.setCounter(webApp.SelectionsManager.getSelections().length)}webApp.$mainTabsLinks.bind(webApp.eventTracker.EVENT_CLICK_TRACK_EVENT,function(){webApp.eventTracker.processElem(this)}),webApp.$mainTabsLinks.bind("click.setFlagMenuClick",function(e){webApp.$mainTabsLinks.removeClass("active"),webApp.isDesktop&&!webApp.HorseDetailsController&&webApp.mainTabsSubLinks.removeClass("active"),$(this).addClass("active"),p=!0}),t=this.parseHash(this.getHash())[0],0===f.all.length&&"meeting-list"!==t&&(m=this.findCollection("meeting-list"),u.pushBack(this.parseHash("#meeting-list")));var h=this.parseHash(this.getHash());m=this.findCollection(h[0]);var a=document.querySelectorAll("#"+m+"Menu");$.each(a,function(){$(this).hasClass("active")||(webApp.$mainTabsLinks.removeClass("active"),$(this).addClass("active"))}),this.pushBack(h),$(window).bind("changeHistory.setMainLinks",function(e,t,i){var r=t[0],a=u.findCollection(r),n=!1,s=u.findCollection(i);if(s&&a!=s&&(n=!0),a){u.pushBack(t),p&&(webApp.viewManager.animationType="none",p=!1);var o=document.querySelectorAll("#"+a+"Menu");"card-meeting-result"!==r&&"card-dog"!==r&&"card-video"!==r||(o=document.querySelectorAll("#resultsMenu")),webApp.$mainTabsLinks.removeClass("active"),$.each(o,function(){$(this).addClass("active")}),o=document.querySelectorAll("#"+a+"Menu");var c=g[a].allowOverrideHomeUrl;if(void 0===c||1==c?$.each(o,function(){$(this).attr("href",webApp.urlManager.getHash())}):$.each(o,function(){$(this).attr("href",g[a].homeUrl)}),n)if(g[s].rememberLastVisited){var l=document.querySelectorAll("#"+s+"Menu");$.each(l,function(){$(this).attr("href",u.getLastVisitedCollectionUrl(i))})}h=t,sessionStorage.backData=JSON.stringify(f)}})},initBackButtonHandling:function(){var e=this;$(document).on("click.backBtn",".btnBack, .backBtn",function(){e.setBackBtnClicked()})},setBackBtnClicked:function(){b=!0},pushBack:function(e){var t=this.createHash(e),i=e[0];if(i&&m){var r={controller:i,url:t};2<webApp.urlManager.error404BackCollection.length&&webApp.urlManager.error404BackCollection.shift(),"error404"!==r.controller&&webApp.urlManager.error404BackCollection.push(r.url),f.all.length&&"error404"!==r.controller?(webApp.viewManager.animationType="own",b?(1<f.all.length&&f.all.pop(),f.all[f.all.length-1]=r,webApp.viewManager.animationType="back"):f.all[f.all.length-1].controller==i?f.all[f.all.length-1]=r:f.all.push(r)):"error404"!==r.controller&&f.all.push(r),"error404"===r.controller&&(f.all.pop(),f[m].pop()),6<f.all.length&&f.all.shift();var a=this.findCollection(i),n=a!=m;webApp.isDesktop&&!webApp.HorseDetailsController&&this.subMenuItemsHighlighting(a),n&&(_=m);var s=f[m=a],o=n?_:m,c=f[o],l=!0;if("meeting"!==o&&"search"!==o||-1===["card-meeting-result","card-video","card-dog","form-explained","search"].indexOf(i)||(l=!1),l&&(f[m+"lastVisited"]=r),n&&"meeting"===_)for(var u=0,h=f[o].length;u<h;u++)if("card-meeting-result"===c[u].controller){f[o].splice(u,h);break}if(s.length){var p=!1,d=["card-meeting-result","card-dog","result-meeting-result","results-dog","form-explained","search"];for(u=0;u<s.length;u++)if(s[u].controller==i&&-1!==d.indexOf(i)){if(b){p=!0,s.pop();break}if(u===s.length-1){s[u]=r,p=!0;break}}else if(s[u].controller==i){s[u]=r,u!=s.length-1&&s.splice(u+1,s.length-u),p=!0;break}p||s.push(r),this.parseHash(g[m].homeUrl)[0]==i&&(webApp.viewManager.animationType="back",(s=[]).push(r))}else s.push(r);b=!1,c.length||this.resetTabHref(o)}},resetTabHref:function(e){var t=document.querySelectorAll("#"+e+"Menu"),i=g[e].allowOverrideHomeUrl;void 0!==i&&1!=i||$.each(t,function(){$(this).attr("href",g[e].homeUrl)})},findCollection:function(e){var t="";for(var i in g){if(-1!=g[i].controllers.indexOf(e)){t=i;break}}return t},findBackCollection:function(e){return f[this.findCollection(e)]},getLastVisitedCollectionUrl:function(e){var t=this.findCollection(e)+"lastVisited";return f[t]&&f[t].url},getBackUrl:function(e,t){var i=this.findCollection(e),r=f[i];if(r.length<2&&f.all.length<2)return g[i].homeUrl;if(t){var a=f.all.length-1-t;return-1<a?f.all[a].url:g[i].homeUrl}return("betslip"!==_||"wh-top-up"!==e&&"wh-home"!==e)&&1<r.length?r[r.length-2].url:f.all[f.all.length-2].url},getPrevCollectionUrl:function(){return _?f[_][f[_].length-1].url:g[m].homeUrl},getBackUrlFor:function(e){for(var t=f.all.length-1;-1<t;t--)if(f.all[t].controller==e)return f.all[t].url},_filterHash:function(e){return e.match(/^((http[s]?:\/\/)|(www\.))([a-z0-9-].?)+(:[0-9]+)?(\/.*)?$/gi)&&(e=e.match(/(#.*)/gi).toString()),e},addParamToHash:function(e,t,i){var r=this.parseHash(e);return r[1][t]=i,this.createHash(r)},subMenuItemsHighlighting:function(e){var i=this,t=e,r=this.getControllerName(),a={controllerName:this.getParams()[0],params:this.getParams()[1]}.params.r_date,n=utils.date.getSynchronizedToServerNow().format("yyyy-0mm-0dd"),s={meeting:function(e,t){e?"trapDraws"===e||"trap-draws-races"===r?o($(".cardsTrapDraws")):t<e?o($(".cardsFuture")):e<t?"card-video"===r||"card-meeting-result"===r||"card-dog"===r?o($(".resultsArchive")):o():o($(".cardsToday")):"advanced-video"===r?o($(".cardsRpgtv")):o()},results:function(e,t){i.openDefaultPage=!1,o(e<t?$(".resultsArchive"):$(".resultsToday"))},default:function(){o()}};function o(e){webApp.mainTabsSubLinks.removeClass("active"),e&&e.addClass("active")}s[t]?s[t](a,n):s.default()},isTransitionNotNeeded:function(e){return e===this.getControllerName()},getPreviousCollectionHomeUrl:function(){return g[_].homeUrl},getPreviousCollectionName:function(){return _},rewriteMainTabLink:function(e,t){var i=document.querySelectorAll("#"+e+"Menu");$.each(i,function(){$(this).attr("href",t)})},error404BackCollection:[]}}(),(webApp=webApp||{}).viewManager=function(){var o,f,u={},c=!1,l=$([]),h="",p="",n=null,g=null,d=null,m=!1,a="",_="none",b={left:"right",right:"left",up:"down",down:"up"},v="";return{animationType:"none",setTpls:function(e){for(var t in e)$.template(t,e[t]);return this},setHelpers:function(e){return _helpers=e,this},renderTpl:function(e,t){t=t||{};var i=$($.tmpl(e,t,_helpers));return $(document).trigger(webApp.EVENT_VIEW_RENDER_TPL,{$content:i}),i},init:function(e){u=e,l=$("#pageLoading"),webApp.disableScroll=!0,document.addEventListener("touchmove",function(e){webApp.disableScroll&&e.preventDefault()}),this.resetProcess(),$(window).bind(webApp.EVENT_CHANGE_CONTROLLER+".viewManager",$.proxy(function(e,t){var i=t[0];if(g&&g.name==i)return l.hide(),d.$container.remove(),void this.resetProcess();if(d.name!=i){switch(l.show(),this.resetProcess(),d.name=i,d.$container=this.createPage(i),p,h=p=i,m&&(_="back"==this.animationType?(_=u.controllers[i].animation||"left",b[_]):"none"==this.animationType?"none":u.controllers[i].animation||"left"),_){case"left":d.$container.addClass("webAppPageRight");break;case"right":d.$container.addClass("webAppPageLeft");break;case"up":d.$container.addClass("webAppPageBottom");break;case"down":d.$container.addClass("webAppPageTop");break;case"none":d.$container.addClass("webAppPageNoAnimation")}var r=u.controllers[i].include;if(r){d.$container.empty();for(var a=0;a<r.length;a++)d.pages[r[a]]=this.createPage(r[a]),d.$container.append(d.pages[r[a]]),d.blocks[r[a]]={},d.levels[r[a]]={}}else d.pages[i]=d.$container,d.blocks[i]={},d.levels[i]={}}},this));var t,i,r,a=this,n=webApp.orientation,s=this.getHeight();return $(window).bind("resize",function(){clearTimeout(i),i=setTimeout(function(){a.refreshAllScrolls()},200),webApp.isIDevice&&(webApp.isIOS_6&&!webApp.isTablet?(clearTimeout(r),r=setTimeout(function(){if(n==webApp.orientation)if("frame"==v)s<a.getHeight()&&setTimeout(function(){a.setFrameSize()},250);else{for(var e in g.pages)a.setScrollSize(e);$(window).trigger("updateScroolSize",[])}n=webApp.orientation,s=a.getHeight()},500)):webApp.isIOS_8&&"frame"===v||$(window).scrollTop(0))}),$(window).bind("changeorientaion",function(){clearTimeout(t);var e=$("input:focus");t=e.length?(e.attr("readonly","readonly"),e.attr("disabled","true"),setTimeout(function(){e.blur(),e.removeAttr("readonly"),e.removeAttr("disabled"),e=$([]),setTimeout(function(){if(m){for(var e in g.pages)a.setScrollSize(e);a.setFrameSize(),$(window).trigger("updateScroolSize",[])}},350)},450)):setTimeout(function(){if(m){for(var e in g.pages)a.setScrollSize(e);a.setFrameSize(),$(window).trigger("updateScroolSize",[])}},100)}),webApp.isIDevice&&$(window).on("resize",function(e){window.innerHeight!=$(window).height()&&$(window).trigger("orientationchange")}),0<webApp.$appContainer.length&&void 0!==webApp.$appContainer.get(0).style[webApp.vendor+"Transition"]&&(c=!0),webApp.$appContainer.bind("webkitTransitionEnd transitionend",function(e){"webApp"==e.target.id&&(clearTimeout(o),o=setTimeout(function(){a.clearAnimation()},50))}),webApp.$appContainer.height(s-webApp.$mainTabs.outerHeight()),!1===webApp.isMobile&&this.resizeWindow(),this},resizeWindow:function(){var o=this;!1!==webApp.isMobile||webApp.HorseDetailsController||$(window).on("resize.viewm",function(){var e=$(".webAppPage"),t=$(window).height(),i=$(window).width(),r=$(".whAdContainer").is(":visible")?$(".whAdContainer").outerHeight(!0):0;$(".layout-col1 .wrap").height(t),$(".layout-col3 .wrap").height(t),$(".mainWrapper .mainTabs").height(t);var a=$(".webAppPageContent"),n=$(".pageHeader").outerHeight();if(webApp.googleTagAds.proccessAds(i,t),webApp.windowHeight=t,!(1<e.length&&(e.hasClass("predictor")||e.hasClass("bet-slip")||e.hasClass("receipt")))){if(1===e.length&&(e.hasClass("bet-slip")||e.hasClass("receipt")||e.hasClass("market-suspend-error")))return $(".webApp").css("height",t-r),void $(window).trigger("updateScroolSize");if(e.hasClass("predictor"))a.css("height",t-r);else{if(e.hasClass("ladb-home")||e.hasClass("ladb-top-up"))return void o.setFrameSize();a.css("height",t-webApp.$mainTabs.outerHeight()-n-r),$(".webApp").css("height",a.height()+n)}if(g)for(var s in g.scrolls)g.scrolls[s].refresh()}})},getHeight:function(){var e=$(window).height(),t=window.innerHeight,i=e<t?e:t;return 671==i&&(i=672),webApp.isIOS_6&&!webApp.isTablet&&(i=window.innerHeight),i},createPage:function(e){var t=this.renderTpl(u.templates.page);return t.attr("id",e+"-page").addClass(e),t.find("> .webAppPageContent").attr("id",e+"-scroll"),t},resetProcess:function(){d=null,d={name:"",$container:$([]),pages:{},scrolls:{},levels:{},blocks:{}}},_createBlockId:function(e,t){return e+"|"+$.param(t)},removeBlock:function(e,t){if(g&&g.blocks[e])for(var i in g.blocks[e]){var r=g.blocks[e][i];if(r.name==t){this._destroyBlock(g,e,i),g.levels[e][r.config.level].blockId="";break}}},_destroyBlock:function(e,t,i){e.blocks[t][i]&&(e.blocks[t][i].config.onDestroyClb(e.blocks[t][i].$),delete e.blocks[t][i])},_createLevelContainer:function(e){var t=this.renderTpl(u.templates.level,{});return t.addClass("level level-"+e),t},_drawBlock:function(e,t,i,r,a){var n=g.levels[e];if(!n[r]||n[r].blockId!=t){var s,o=!1,c=n[r];c?((s=c.container).removeClass(c.name),this._destroyBlock(g,e,c.blockId)):(s=this._createLevelContainer(r),o=!0),s.addClass(a),s.empty().append(i);var l=this;if(o){var u=g.pages[e].find("> .webAppPageContent"),h=u.find("> .scrollContent");if(s.find("> .pageHeader").length||s.hasClass("results-header"))s.insertBefore(u);else{var p=!1;for(var d in n)if(r<d){s.insertBefore(n[d].container),p=!0;break}p||h.append(s)}n[r]={},n[r].container=s}n[r].name=a,n[r].blockId=t,g.scrolls[e]&&g.scrolls[e].refresh(),this.scrollToTop(e),i.find("img").bind("load.fixScroll",function(){clearTimeout(f),f=setTimeout(function(){l.refreshAllScrolls()},320)})}},renderBlock:function(t,e,i,r,a){var n=this._createBlockId(e,a),s=i.level||null;if(null!=s&&!g.blocks[t][n]){var o=$([]);return"object"!=typeof r&&(r={}),!1===(r=i.beforeRenderClb(r))?!1:(o=this.renderTpl(i.template,r),this._drawBlock(t,n,o,s,e),g.blocks[t][n]={name:e,config:i,$:o},o.parent().find("a.btnBack").each(function(){var e=$(this).attr("href");e&&"#"!=e||$(this).attr("href",webApp.urlManager.getBackUrl(t))}),i.afterRenderClb(o),o)}},showBlocksPreloader:function(e,t){if(void 0!==g.levels[e]){var i="",r=null,a=g.levels[e];for(var n in t)if("ads"!=n){var s=this._createBlockId(n,t[n].keys);if(a[t[n].level]){if(a[t[n].level].blockId==s)continue}else this._drawBlock(e,s,$([]),t[n].level,n);null==r?(r=t[n].level,i=n):n.level<r&&(r=t[n].level,i=n)}if(r)for(var o in t){var c=a[t[o].level];if(c){var l=this.renderTpl(u.templates["block-preloader"]);s=c.blockId;this._destroyBlock(g,e,s),c.blockId="",c.container.removeClass(c.name).addClass(o).empty(),o==i&&c.container.html(l),c.name=o,this.scrollToTop(e),g.scrolls[e]&&g.scrolls[e].refresh()}}}},pageReady:function(e){if(d.pages.hasOwnProperty(e)){if(g&&this.clearAnimation(!0),n=null,n=g,g=null,g=d,this.resetProcess(),webApp.$appContainer.append(g.$container),webApp.configs.controllers[e])if(v=webApp.configs.controllers[e].defaultScroll,webApp.disableScroll=!v,v){for(var t in webApp.isIOS_6&&!webApp.isTablet&&$("#iOS6Height").hide(),$("body").removeClass("fixedMainBlocks flowMainBlocks"),a="frame"==v?"flowMainBlocks":"fixedMainBlocks",g.pages)g.pages[t].addClass(a);webApp.configs.controllers[e].hideMainTabs?a+=" hideMainTabs":$("body").removeClass("hideMainTabs")}else webApp.isIOS_6&&!webApp.isTablet&&$("#iOS6Height").show(),this.applyPageScroll();$("body").addClass(a)}},switchPage:function(e,t){if($(".mainTabs").show(),l.hide(),$("#"+e+"-scroll").find("> .scrollContent > .pageLoading").remove(),(t=t||e)==h){if(h="",m||($("body").addClass(a),m=!0),$(window).scrollTop(0),this.setScrollSize(e),c)switch(_){case"none":this.clearAnimation();break;case"left":webApp.$appContainer.addClass("slideToLeft goSlide");break;case"right":webApp.$appContainer.addClass("slideToRight goSlide");break;case"up":webApp.$appContainer.addClass("slideToUp goSlide");break;case"down":webApp.$appContainer.addClass("slideToDown goSlide")}else this.clearAnimation();!1===webApp.isMobile&&$(window).trigger("resize.viewm")}},applyPageScroll:function(){a="";var e={};for(var t in $("body").removeClass("fixedMainBlocks flowMainBlocks hideMainTabs"),g.pages){webApp.configs.controllers[t].hideMainTabs&&$("body").addClass("hideMainTabs");var i=g.pages[t].find("> .webAppPageContent"),r=!0;webApp.isAndroid_2&&(r=!i.find("input[type=text], input[type=password], input[type=number], select").length),e=webApp.isDesktop?{fadeScrollbars:!1,mouseWheel:!0,scrollbars:!0,scrollX:!1,mouseWheelSpeed:100,interactiveScrollbars:!0,preventDefault:!1,useTransition:!1,freeScroll:!0,useTransform:r,scrollbars:"custom",click:!1,tap:!1,disableMouse:!0}:{fadeScrollbars:webApp.isMobile&&!webApp.isAndroid_2,mouseWheel:!0,scrollbars:!0,scrollX:!1,mouseWheelSpeed:100,interactiveScrollbars:!1,preventDefault:!1,useTransition:!1,freeScroll:!0,useTransform:r,click:!1,tap:!1},g.scrolls[t]=new IScroll("#"+t+"-scroll",e),g.scrolls[t].name=t,g.scrolls[t].on("scrollEnd",function(){this.isInit&&(webApp.configs.controllers[this.name].scrollPos=0<this.y?0:this.y),$(document).trigger("endPageScroll",[this])}),this.setScrollSize(t)}setTimeout(function(){for(var e in g.scrolls)g.scrolls[e].isInit=!0},50)},setScrollSize:function(e){var t=g.pages[e].find("> .webAppPageContent");t.hide(),webApp.isAndroid&&(webApp.windowHeight=$(window).height()),webApp.$appContainer.css("minHeight",0).height(webApp.windowHeight-webApp.$mainTabs.outerHeight());var i=g.pages[e].find("> div");!1===webApp.isMobile&&$(window).trigger("resize.viewm");var r=0,a=0,n=!0;i.each(function(){$(this).hasClass("webAppPageContent")?n=!1:$(this).hasClass("overlay")||(n?r+=$(this).outerHeight():a+=$(this).outerHeight())}),t.css({top:r}).show();var s=t.find("> .scrollContent");s.find("> .floatBox").remove(),a&&s.html()&&s.append('<div class="floatBox" style="height:'+a+'px"></div>'),g.scrolls[e]&&g.scrolls[e].refresh()},setFrameSize:function(){if("frame"==v){var e=$(".whAdContainer").is(":visible")?$(".whAdContainer").outerHeight(!0):0,t=webApp.windowHeight-webApp.$mainTabs.outerHeight()-e;for(var i in webApp.$appContainer.css("minHeight",t).height("auto"),g.pages){var r=g.pages[i].find(".pageHeader");r.length&&(t-=r.outerHeight()),g.pages[i].find("iframe").height(t)}}},removeMainMenuOverlay:function(){1!==$(".webAppPage.receipt").length&&$(".mainMenuOverlay").removeClass("mainMenuOverlayShown")},clearAnimation:function(e){if(g.$container.removeClass("webAppPageLeft webAppPageRight webAppPageTop webAppPageBottom webAppPageNoAnimation"),webApp.$appContainer.removeClass("slideToRight slideToLeft slideToUp slideToDown goSlide"),e||$(window).trigger("switchpage",[g.name]),n){for(var t in l.hide(),n.blocks){var i=n.blocks[t];for(var r in i)this._destroyBlock(n,t,r)}for(var a in n.scrolls)n.scrolls[a].destroy(),n.scrolls[a]=null;n.$container.remove(),n=null,!1===webApp.isMobile&&$(window).trigger("resize.viewm")}this.removeMainMenuOverlay(),this.setFrameSize()},hideUrlBar:function(e){if(g.scrolls[e]&&("back"==this.animationType||"none"==this.animationType)){var t=webApp.configs.controllers[e].scrollPos,i=t||0;i&&g.scrolls[e].scrollTo(0,i,0)}},refreshAllScrolls:function(){if(g)for(var e in g.scrolls)g.scrolls[e].refresh()},scrollToTop:function(e){g.scrolls[e]&&g.scrolls[e].scrollTo(0,0,0)},enableScrolls:function(){if(g)for(var e in g.scrolls)g.scrolls[e]&&g.scrolls[e].enable()},disableScrolls:function(){if(g)for(var e in g.scrolls)g.scrolls[e]&&g.scrolls[e].disable()},getScroll:function(e){return g&&g.scrolls[e]?g.scrolls[e]:null},flash:function(e){if(g&&g.pages[e]){for(var t in g.blocks[e])this._destroyBlock(g,e,t);g.pages[e].find("> div").each(function(){$(this).hasClass("webAppPageContent")?$(this).find("> .scrollContent").empty():$(this).hasClass("overlay")||$(this).hasClass("rubiconFrame")||$(this).remove()}),g.levels[e]={},webApp.configs.controllers[e]&&(webApp.configs.controllers[e].scrollPos=0)}}}}(),(webApp=webApp||{}).Component=function(){var t;this.setCore=function(e){return t=e,this},this._core=function(){return t},this._helper=function(e){return this._core().getHelper(e)}};