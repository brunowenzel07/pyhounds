(function(s){function e(t,e,i,s){var n=i.lang();return n[t].call?n[t](i,s):n[t][e]}function t(e,i){return function(t){return n(e.call(this,t),i)}}function i(i){return function(t){var e=i.call(this,t);return e+this.lang().ordinal(e)}}function h(t,e,i){this._d=t,this._isUTC=!!e,this._a=t._a||null,this._lang=i||!1}function o(t){var e=this._data={},i=t.years||t.y||0,s=t.months||t.M||0,n=t.weeks||t.w||0,r=t.days||t.d||0,o=t.hours||t.h||0,a=t.minutes||t.m||0,h=t.seconds||t.s||0,l=t.milliseconds||t.ms||0;this._milliseconds=l+1e3*h+6e4*a+36e5*o,this._days=r+7*n,this._months=s+12*i,e.milliseconds=l%1e3,h+=u(l/1e3),e.seconds=h%60,a+=u(h/60),e.minutes=a%60,o+=u(a/60),e.hours=o%24,r+=u(o/24),r+=7*n,e.days=r%30,s+=u(r/30),e.months=s%12,i+=u(s/12),e.years=i,this._lang=!1}function u(t){return t<0?Math.ceil(t):Math.floor(t)}function n(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}function r(t,e,i){var s,n=e._milliseconds,r=e._days,o=e._months;n&&t._d.setTime(+t+n*i),r&&t.date(t.date()+r*i),o&&(s=t.date(),t.date(1).month(t.month()+o*i).date(Math.min(s,t.daysInMonth())))}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function l(t,e){var i,s=Math.min(t.length,e.length),n=Math.abs(t.length-e.length),r=0;for(i=0;i<s;i++)~~t[i]!=~~e[i]&&r++;return r+n}function c(t,e,i,s){var n,r,o=[];for(n=0;n<7;n++)o[n]=t[n]=null==t[n]?2===n?1:0:t[n];return t[7]=o[7]=e,null!=t[8]&&(o[8]=t[8]),t[3]+=i||0,t[4]+=s||0,r=new Date(0),e?(r.setUTCFullYear(t[0],t[1],t[2]),r.setUTCHours(t[3],t[4],t[5],t[6])):(r.setFullYear(t[0],t[1],t[2]),r.setHours(t[3],t[4],t[5],t[6])),r._a=o,r}function d(t,e){var i,s,n=[];for(!e&&_&&(e=require("./lang/"+t)),i=0;i<k.length;i++)e[k[i]]=e[k[i]]||T.en[k[i]];for(i=0;i<12;i++)s=b([2e3,i]),n[i]=new RegExp("^"+(e.months[i]||e.months(s,""))+"|^"+(e.monthsShort[i]||e.monthsShort(s,"")).replace(".",""),"i");return e.monthsParse=e.monthsParse||n,T[t]=e}function p(t){var e="string"==typeof t&&t||t&&t._lang||null;return e?T[e]||d(e):b}function m(e,t){function i(t){return e.lang().longDateFormat[t]||t}for(var s=5;s--&&M.test(t);)t=t.replace(M,i);return I[t]||(I[t]=function(i){var s,n,t,r=i.match(Y);for(s=0,n=r.length;s<n;s++)U[r[s]]?r[s]=U[r[s]]:r[s]=(t=r[s]).match(/\[.*\]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(t){var e="";for(s=0;s<n;s++)e+="function"==typeof r[s].call?r[s].call(t,i):r[s];return e}}(t)),I[t](e)}function f(t){switch(t){case"DDDD":return A;case"YYYY":return z;case"S":case"SS":case"SSS":case"DDD":return X;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return H;case"Z":case"ZZ":return L;case"T":return $;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return C;default:return new RegExp(t.replace("\\",""))}}function g(t,e,i,s){var n,r;switch(t){case"M":case"MM":i[1]=null==e?0:~~e-1;break;case"MMM":case"MMMM":for(n=0;n<12;n++)if(p().monthsParse[n].test(e)){i[1]=n,r=!0;break}r||(i[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":null!=e&&(i[2]=~~e);break;case"YY":i[0]=~~e+(70<~~e?1900:2e3);break;case"YYYY":i[0]=~~Math.abs(e);break;case"a":case"A":s.isPm="pm"===(e+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":i[3]=~~e;break;case"m":case"mm":i[4]=~~e;break;case"s":case"ss":i[5]=~~e;break;case"S":case"SS":case"SSS":i[6]=~~(1e3*("0."+e));break;case"Z":case"ZZ":s.isUTC=!0,(n=(e+"").match(B))&&n[1]&&(s.tzh=~~n[1]),n&&n[2]&&(s.tzm=~~n[2]),n&&"+"===n[0]&&(s.tzh=-s.tzh,s.tzm=-s.tzm)}null==e&&(i[8]=!1)}function v(t,e){var i,s,n=[0,0,1,0,0,0,0],r={tzh:0,tzm:0},o=e.match(Y);for(i=0;i<o.length;i++)(s=(f(o[i]).exec(t)||[])[0])&&(t=t.slice(t.indexOf(s)+s.length)),U[o[i]]&&g(o[i],s,n,r);return r.isPm&&n[3]<12&&(n[3]+=12),!1===r.isPm&&12===n[3]&&(n[3]=0),c(n,r.isUTC,r.tzh,r.tzm)}function y(t,i){b.fn[t]=function(t){var e=this._isUTC?"UTC":"";return null!=t?(this._d["set"+e+i](t),this):this._d["get"+e+i]()}}function F(t){b.duration.fn[t]=function(){return this._data[t]}}function x(t,e){b.duration.fn["as"+t]=function(){return+this/e}}for(var b,S,w=Math.round,T={},D="en",_="undefined"!=typeof module&&module.exports,k="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),E=/^\/?Date\((\-?\d+)/i,Y=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,M=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,P=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,C=/\d\d?/,X=/\d{1,3}/,A=/\d{3}/,z=/\d{1,4}/,H=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,L=/Z|[\+\-]\d\d:?\d\d/i,$=/T/i,W=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,R=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],B=/([\+\-]|\d\d)/gi,N="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),q={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},I={},j="DDD w M D d".split(" "),O="M D H h m s w".split(" "),U={M:function(){return this.month()+1},MMM:function(t){return e("monthsShort",this.month(),this,t)},MMMM:function(t){return e("months",this.month(),this,t)},D:function(){return this.date()},DDD:function(){return~~((new Date(this.year(),this.month(),this.date())-new Date(this.year(),0,1))/864e5+1.5)},d:function(){return this.day()},dd:function(t){return e("weekdaysMin",this.day(),this,t)},ddd:function(t){return e("weekdaysShort",this.day(),this,t)},dddd:function(t){return e("weekdays",this.day(),this,t)},w:function(){var t=new Date(this.year(),this.month(),this.date()-this.day()+5),e=new Date(t.getFullYear(),0,4);return~~((t-e)/864e5/7+1.5)},YY:function(){return n(this.year()%100,2)},YYYY:function(){return n(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return n(~~(this.milliseconds()/10),2)},SSS:function(){return n(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return t<0&&(t=-t,e="-"),e+n(~~(t/60),2)+":"+n(~~t%60,2)},ZZ:function(){var t=-this.zone(),e="+";return t<0&&(t=-t,e="-"),e+n(~~(10*t/6),4)}};j.length;)S=j.pop(),U[S+"o"]=i(U[S]);for(;O.length;)S=O.pop(),U[S+S]=t(U[S],2);for(U.DDDD=t(U.DDD,3),(b=function(t,e){return null===t||""===t?null:b.isMoment(t)?new h(new Date(+t._d),t._isUTC,t._lang):new h(e?a(e)?function(t,e){var i,s,n,r,o=t.match(P)||[],a=99;for(s=0;s<e.length;s++)(r=l(o,m(new h(n=v(t,e[s])),e[s]).match(P)||[]))<a&&(a=r,i=n);return i}(t,e):v(t,e):(i=E.exec(t),t===s?new Date:i?new Date(+i[1]):t instanceof Date?t:a(t)?c(t):"string"==typeof t?function(t){var e,i="YYYY-MM-DDT";if(W.exec(t)){for(e=0;e<4;e++)if(R[e][1].exec(t)){i+=R[e][0];break}return L.exec(t)?v(t,i+" Z"):v(t,i)}return new Date(t)}(t):new Date(t)));var i}).utc=function(t,e){return a(t)?new h(c(t,!0),!0):("string"==typeof t&&!L.exec(t)&&(t+=" +0000",e&&(e+=" Z")),b(t,e).utc())},b.unix=function(t){return b(1e3*t)},b.duration=function(t,e){var i,s=b.isDuration(t),n="number"==typeof t,r=s?t._data:n?{}:t;return n&&(e?r[e]=t:r.milliseconds=t),i=new o(r),s&&(i._lang=t._lang),i},b.humanizeDuration=function(t,e,i){return b.duration(t,!0===e?null:e).humanize(!0===e||i)},b.version="1.7.2",b.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",b.lang=function(t,e){var i;if(!t)return D;if((e||!T[t])&&d(t,e),T[t]){for(i=0;i<k.length;i++)b[k[i]]=T[t][k[i]];b.monthsParse=T[t].monthsParse,D=t}},b.langData=p,b.isMoment=function(t){return t instanceof h},b.isDuration=function(t){return t instanceof o},b.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(t,e,i){return 11<t?i?"pm":"PM":i?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"}}),b.fn=h.prototype={clone:function(){return b(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?null!=this._a[8]?!!this._a[8]:!l(this._a,(this._a[7]?b.utc(this._a):b(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(t){return m(this,t||b.defaultFormat)},add:function(t,e){return r(this,e?b.duration(+e,t):b.duration(t),1),this},subtract:function(t,e){return r(this,e?b.duration(+e,t):b.duration(t),-1),this},diff:function(t,e,i){var s,n=this._isUTC?b(t).utc():b(t).local(),r=6e4*(this.zone()-n.zone()),o=this._d-n._d-r,a=this.year()-n.year(),h=this.month()-n.month(),l=this.date()-n.date();return s="months"===e?12*a+h+l/30:"years"===e?a+(h+l/30)/12:"seconds"===e?o/1e3:"minutes"===e?o/6e4:"hours"===e?o/36e5:"days"===e?o/864e5:"weeks"===e?o/6048e5:o,i?s:w(s)},from:function(t,e){return b.duration(this.diff(t)).lang(this._lang).humanize(!e)},fromNow:function(t){return this.from(b(),t)},calendar:function(){var t=this.diff(b().sod(),"days",!0),e=this.lang().calendar,i=e.sameElse,s=t<-6?i:t<-1?e.lastWeek:t<0?e.lastDay:t<1?e.sameDay:t<2?e.nextDay:t<7?e.nextWeek:i;return this.format("function"==typeof s?s.apply(this):s)},isLeapYear:function(){var t=this.year();return t%4==0&&t%100!=0||t%400==0},isDST:function(){return this.zone()<b([this.year()]).zone()||this.zone()<b([this.year(),5]).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==t?e:this.add({d:t-e})},startOf:function(t){switch(t.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(t){return this.startOf(t).add(t.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return b.utc([this.year(),this.month()+1,0]).date()},lang:function(t){return t===s?p(this):(this._lang=t,this)}},S=0;S<N.length;S++)y(N[S].toLowerCase(),N[S]);for(S in y("year","FullYear"),b.duration.fn=o.prototype={weeks:function(){return u(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(t){var e,i,s,n,r,o,a,h,l,u=+this,c=this.lang().relativeTime,d=(e=u,i=!t,s=this.lang(),n=w(Math.abs(e)/1e3),r=w(n/60),o=w(r/60),a=w(o/24),h=w(a/365),(l=n<45&&["s",n]||1===r&&["m"]||r<45&&["mm",r]||1===o&&["h"]||o<22&&["hh",o]||1===a&&["d"]||a<=25&&["dd",a]||a<=45&&["M"]||a<345&&["MM",w(a/30)]||1===h&&["y"]||["yy",h])[2]=i,l[3]=0<e,l[4]=s,function(t,e,i,s,n){var r=n.relativeTime[t];return"function"==typeof r?r(e||1,!!i,t,s):r.replace(/%d/i,e||1)}.apply({},l)),p=u<=0?c.past:c.future;return t&&(d="function"==typeof p?p(d):p.replace(/%s/i,d)),d},lang:b.fn.lang},q)q.hasOwnProperty(S)&&(x(S,q[S]),F(S.toLowerCase()));x("Weeks",6048e5),_&&(module.exports=b),"undefined"==typeof ender&&(this.moment=b),"function"==typeof define&&define.amd&&define("moment",[],function(){return b})}).call(this);var panels={},betting={simulator:{},helpers:{},templates:{},cards:{}},soccer={cookie:{},badges:{},autocomplete:{}},diffusion={listeners:{},utils:{}},server={},utils={html:{}},common={domSorter:{}},sales={lot:{}},shop={},events={},reg={},tmpl={};function namespace(t,e){var i,s,n=this;for(i=String(t).split(".");i.length;)null==n[s=i.shift()]&&(n[s]={}),n=n[s];return $.isFunction(e)&&e.call(n,n),n}function extend(t,e,i){if(!$.isFunction(e))throw new Error(t+": Unable to extends not a function.");var s=function(){};return s.prototype=e.prototype,t.prototype=new s,(t.prototype.constructor=t).$super=e,$.isFunction(i)&&i.call(t.prototype,t,e.prototype),t}!function(c,t){var u,h=c.fn.domManip,l="_tmplitem",i=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,d={},p={},o={key:0,data:{}},m=0,f=0,r=[];function g(t,e,i,s){var n={data:s||(e?e.data:{}),_wrap:e?e._wrap:null,tmpl:null,parent:e||null,nodes:[],calls:b,nest:S,wrap:w,html:T,update:D};return t&&c.extend(n,t,{nodes:[],parent:e}),i&&(n.tmpl=i,n._ctnt=n._ctnt||n.tmpl(c,n),n.key=++m,(r.length?p:d)[m]=n),n}function a(e,t,i){var n,s=i?c.map(i,function(t){return"string"==typeof t?e.key?t.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+l+'="'+e.key+'" $2'):t:a(t,e,t._ctnt)}):e;return t?s:((s=s.join("")).replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,e,i,s){x(n=c(i).get()),e&&(n=v(e).concat(n)),s&&(n=n.concat(v(s)))}),n||v(s))}function v(t){var e=document.createElement("div");return e.innerHTML=t,c.makeArray(e.childNodes)}function s(t){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+c.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,e,i,s,n,r,o){var a,h,l,u=c.tmpl.tag[i];if(!u)throw"Template command not found: "+i;return a=u._default||[],r&&!/\w$/.test(n)&&(n+=r,r=""),l=n?(n=F(n),o=o?","+F(o)+")":r?")":"",h=r?-1<n.indexOf(".")?n+r:"("+n+").call($item"+o:n,r?h:"(typeof("+n+")==='function'?("+n+").call($item):("+n+"))"):h=a.$1||"null",s=F(s),"');"+u[e?"close":"open"].split("$notnull_1").join(n?"typeof("+n+")!=='undefined' && ("+n+")!=null":"true").split("$1a").join(l).split("$1").join(h).split("$2").join(s?s.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(t,e,i,s){return(s=s?","+s+")":i?")":"")?"("+e+").call($item"+s:t}):a.$2||"")+"_.push('"})+"');}return _;")}function y(t,e){t._wrap=a(t,!0,c.isArray(e)?e:[i.test(e)?e:c(e).html()]).join("")}function F(t){return t?t.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function x(t){var e,i,s,n,r,a="_"+f,h={};for(s=0,n=t.length;s<n;s++)if(1===(e=t[s]).nodeType){for(r=(i=e.getElementsByTagName("*")).length-1;0<=r;r--)o(i[r]);o(e)}function o(t){var e,i,s,n,r=t;if(n=t.getAttribute(l)){for(;r.parentNode&&1===(r=r.parentNode).nodeType&&!(e=r.getAttribute(l)););e!==n&&(r=r.parentNode?11===r.nodeType?0:r.getAttribute(l)||0:0,(s=d[n])||((s=g(s=p[n],d[r]||p[r],null,!0)).key=++m,d[m]=s),f&&o(n)),t.removeAttribute(l)}else f&&(s=c.data(t,"tmplItem"))&&(o(s.key),d[s.key]=s,r=(r=c.data(t.parentNode,"tmplItem"))?r.key:0);if(s){for(i=s;i&&i.key!=r;)i.nodes.push(t),i=i.parent;delete s._ctnt,delete s._wrap,c.data(t,"tmplItem",s)}function o(t){s=h[t+=a]=h[t]||g(s,d[s.parent.key+a]||s.parent,null,!0)}}}function b(t,e,i,s){if(!t)return r.pop();r.push({_:t,tmpl:e,item:this,data:i,options:s})}function S(t,e,i){return c.tmpl(c.template(t),e,i,this)}function w(t,e){var i=t.options||{};return i.wrapped=e,c.tmpl(c.template(t.tmpl),t.data,i,t.item)}function T(t,s){var e=this._wrap;return c.map(c(c.isArray(e)?e.join(""):e).filter(t||"*"),function(t){return s?t.innerText||t.textContent:t.outerHTML||(e=t,(i=document.createElement("div")).appendChild(e.cloneNode(!0)),i.innerHTML);var e,i})}function D(){var t=this.nodes;c.tmpl(null,null,null,this).insertBefore(t[0]),c(t).remove()}c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,l){c.fn[h]=function(t){var e,i,s,n,r=[],o=c(t),a=1===this.length&&this[0].parentNode;if(u=d||{},a&&11===a.nodeType&&1===a.childNodes.length&&1===o.length)o[l](this[0]),r=this;else{for(i=0,s=o.length;i<s;i++)e=(0<(f=i)?this.clone(!0):this).get(),c.fn[l].apply(c(o[i]),e),r=r.concat(e);f=0,r=this.pushStack(r,h,o.selector)}return n=u,u=null,c.tmpl.complete(n),r}}),c.fn.extend({tmpl:function(t,e,i){return c.tmpl(this[0],t,e,i)},tmplItem:function(){return c.tmplItem(this[0])},template:function(t){return c.template(t,this[0])},domManip:function(t,e,i,s){if(t[0]&&t[0].nodeType){for(var n,r=c.makeArray(arguments),o=t.length,a=0;a<o&&!(n=c.data(t[a++],"tmplItem")););1<o&&(r[0]=[c.makeArray(t)]),n&&f&&(r[2]=function(t){c.tmpl.afterManip(this,t,i)}),h.apply(this,r)}else h.apply(this,arguments);return f=0,u||c.tmpl.complete(d),this}}),c.extend({tmpl:function(e,t,i,s){var n,r=!s;if(r)s=o,e=c.template[e]||c.template(null,e),p={};else if(!e)return e=s.tmpl,(d[s.key]=s).nodes=[],s.wrapped&&y(s,s.wrapped),c(a(s,null,s.tmpl(c,s)));return e?("function"==typeof t&&(t=t.call(s||{})),i&&i.wrapped&&y(i,i.wrapped),n=c.isArray(t)?c.map(t,function(t){return t?g(i,s,e,t):null}):[g(i,s,e,t)],r?c(a(s,null,n)):n):[]},tmplItem:function(t){var e;for(t instanceof c&&(t=t[0]);t&&1===t.nodeType&&!(e=c.data(t,"tmplItem"))&&(t=t.parentNode););return e||o},template:function(t,e){return e?("string"==typeof e?e=s(e):e instanceof c&&(e=e[0]||{}),e.nodeType&&(e=c.data(e,"tmpl")||c.data(e,"tmpl",s(e.innerHTML))),"string"==typeof t?c.template[t]=e:e):t?"string"!=typeof t?c.template(null,t):c.template[t]||c.template(null,i.test(t)?t:c(t)):null},encode:function(t){return(""+t).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),c.extend(c.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(t){d={}},afterManip:function(t,e,i){var s=11===e.nodeType?c.makeArray(e.childNodes):1===e.nodeType?[e]:[];i.call(t,e),x(s),f++}})}(jQuery),function(l){l.extend(l.fn,{validate:function(t){if(this.length){var i=l.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new l.validator(t,this[0]),l.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target),l(t.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==l(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function t(){var t;return!i.settings.submitHandler||(i.submitButton&&(t=l("<input type='hidden'/>").attr("name",i.submitButton.name).val(l(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&t.remove(),!1)}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,t()):i.form()?i.pendingRequest?!(i.formSubmitted=!0):t():(i.focusInvalid(),!1)})),i)}t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){if(l(this[0]).is("form"))return this.validate().form();var t=!0,e=l(this[0].form).validate();return this.each(function(){t=t&&e.element(this)}),t},removeAttrs:function(t){var i={},s=this;return l.each(t.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(t,e){var i=this[0];if(t){var s=l.data(i.form,"validator").settings,n=s.rules,r=l.validator.staticRules(i);switch(t){case"add":l.extend(r,l.validator.normalizeRule(e)),delete r.messages,n[i.name]=r,e.messages&&(s.messages[i.name]=l.extend(s.messages[i.name],e.messages));break;case"remove":if(!e)return delete n[i.name],r;var o={};return l.each(e.split(/\s/),function(t,e){o[e]=r[e],delete r[e]}),o}}var a=l.validator.normalizeRules(l.extend({},l.validator.classRules(i),l.validator.attributeRules(i),l.validator.dataRules(i),l.validator.staticRules(i)),i);if(a.required){var h=a.required;delete a.required,a=l.extend({required:h},a)}return a}}),l.extend(l.expr[":"],{blank:function(t){return!l.trim(""+l(t).val())},filled:function(t){return!!l.trim(""+l(t).val())},unchecked:function(t){return!l(t).prop("checked")}}),l.validator=function(t,e){this.settings=l.extend(!0,{},l.validator.defaults,t),this.currentForm=e,this.init()},l.validator.format=function(i,t){return 1===arguments.length?function(){var t=l.makeArray(arguments);return t.unshift(i),l.validator.format.apply(this,t)}:(2<arguments.length&&t.constructor!==Array&&(t=l.makeArray(arguments).slice(1)),t.constructor!==Array&&(t=[t]),l.each(t,function(t,e){i=i.replace(RegExp("\\{"+t+"\\}","g"),function(){return e})}),i)},l.extend(l.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:l([]),errorLabelContainer:l([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(t)).hide())},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).addClass(e).removeClass(i):l(t).addClass(e).removeClass(i)},unhighlight:function(t,e,i){"radio"===t.type?this.findByName(t.name).removeClass(e).addClass(i):l(t).removeClass(e).addClass(i)}},setDefaults:function(t){l.extend(l.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:l.validator.format("Please enter no more than {0} characters."),minlength:l.validator.format("Please enter at least {0} characters."),rangelength:l.validator.format("Please enter a value between {0} and {1} characters long."),range:l.validator.format("Please enter a value between {0} and {1}."),max:l.validator.format("Please enter a value less than or equal to {0}."),min:l.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var e=l.data(this[0].form,"validator"),i="on"+t.type.replace(/^validate/,"");e.settings[i]&&e.settings[i].call(e,this[0],t)}this.labelContainer=l(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||l(this.currentForm),this.containers=l(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var s=this.groups={};l.each(this.settings.groups,function(i,t){"string"==typeof t&&(t=t.split(/\s/)),l.each(t,function(t,e){s[e]=i})});var i=this.settings.rules;l.each(i,function(t,e){i[t]=l.validator.normalizeRule(e)}),l(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&l(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),l.extend(this.submitted,this.errorMap),this.invalid=l.extend({},this.errorMap),this.valid()||l(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=l(t);var e=!1!==this.check(t);return e?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e},showErrors:function(e){if(e){for(var t in l.extend(this.errorMap,e),this.errorList=[],e)this.errorList.push({message:e[t],element:this.findByName(t)[0]});this.successList=l.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){l.fn.resetForm&&l(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0;for(var i in t)e++;return e},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{l(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var e=this.lastActive;return e&&1===l.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var t=this,e={};return l(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in e||!t.objectLength(l(this).rules()))&&(e[this.name]=!0)})},clean:function(t){return l(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return l(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=l([]),this.toHide=l([]),this.currentElements=l([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(t){var e=l(t).attr("type"),i=l(t).val();return"radio"===e||"checkbox"===e?l("input[name='"+l(t).attr("name")+"']:checked").val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(e){e=this.validationTargetFor(this.clean(e));var t,i=l(e).rules(),s=!1,n=this.elementValue(e);for(var r in i){var o={method:r,parameters:i[r]};try{if("dependency-mismatch"===(t=l.validator.methods[r].call(this,n,e,o.parameters))){s=!0;continue}if(s=!1,"pending"===t)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!t)return this.formatAndAdd(e,o),!1}catch(t){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+o.method+"' method.",t),t}}return s?void 0:(this.objectLength(i)&&this.successList.push(e),!0)},customDataMessage:function(t,e){return l(t).data("msg-"+e.toLowerCase())||t.attributes&&l(t).attr("data-msg-"+e.toLowerCase())},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;arguments.length>t;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(t,e){return this.findDefined(this.customMessage(t.name,e),this.customDataMessage(t,e),!this.settings.ignoreTitle&&t.title||void 0,l.validator.messages[e],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,e){var i=this.defaultMessage(t,e.method),s=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,e.parameters,t):s.test(i)&&(i=l.validator.format(i.replace(s,"{$1}"),e.parameters)),this.errorList.push({message:i,element:t}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e;for(t=0;this.errorList[t];t++){var i=this.errorList[t];this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return l(this.errorList).map(function(){return this.element})},showLabel:function(t,e){var i=this.errorsFor(t);i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.html(e)):(i=l("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(e||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,l(t)):i.insertAfter(t))),!e&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i,t)),this.toShow=this.toShow.add(i)},errorsFor:function(t){var e=this.idOrName(t);return this.errors().filter(function(){return l(this).attr("for")===e})},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name).not(this.settings.ignore)[0]),t},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(t){return l(this.currentForm).find("[name='"+t+"']")},getLength:function(t,e){switch(e.nodeName.toLowerCase()){case"select":return l("option:selected",e).length;case"input":if(this.checkable(e))return this.findByName(e.name).filter(":checked").length}return t.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{boolean:function(t){return t},string:function(t,e){return!!l(t,e.form).length},function:function(t,e){return t(e)}},optional:function(t){var e=this.elementValue(t);return!l.validator.methods.required.call(this,e,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(t,e){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(l(this.currentForm).submit(),this.formSubmitted=!1):!e&&0===this.pendingRequest&&this.formSubmitted&&(l(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return l.data(t,"previousValue")||l.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,e){t.constructor===String?this.classRuleSettings[t]=e:l.extend(this.classRuleSettings,t)},classRules:function(t){var e={},i=l(t).attr("class");return i&&l.each(i.split(" "),function(){this in l.validator.classRuleSettings&&l.extend(e,l.validator.classRuleSettings[this])}),e},attributeRules:function(t){var e={},i=l(t),s=i[0].getAttribute("type");for(var n in l.validator.methods){var r;r="required"===n?(""===(r=i.get(0).getAttribute(n))&&(r=!0),!!r):i.attr(n),/min|max/.test(n)&&(null===s||/number|range|text/.test(s))&&(r=Number(r)),r?e[n]=r:s===n&&"range"!==s&&(e[n]=!0)}return e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)&&delete e.maxlength,e},dataRules:function(t){var e,i,s={},n=l(t);for(e in l.validator.methods)void 0!==(i=n.data("rule-"+e.toLowerCase()))&&(s[e]=i);return s},staticRules:function(t){var e={},i=l.data(t.form,"validator");return i.settings.rules&&(e=l.validator.normalizeRule(i.settings.rules[t.name])||{}),e},normalizeRules:function(s,n){return l.each(s,function(t,e){if(!1!==e){if(e.param||e.depends){var i=!0;switch(typeof e.depends){case"string":i=!!l(e.depends,n.form).length;break;case"function":i=e.depends.call(n,n)}i?s[t]=void 0===e.param||e.param:delete s[t]}}else delete s[t]}),l.each(s,function(t,e){s[t]=l.isFunction(e)?e(n):e}),l.each(["minlength","maxlength"],function(){s[this]&&(s[this]=Number(s[this]))}),l.each(["rangelength","range"],function(){var t;s[this]&&(l.isArray(s[this])?s[this]=[Number(s[this][0]),Number(s[this][1])]:"string"==typeof s[this]&&(t=s[this].split(/[\s,]+/),s[this]=[Number(t[0]),Number(t[1])]))}),l.validator.autoCreateRanges&&(s.min&&s.max&&(s.range=[s.min,s.max],delete s.min,delete s.max),s.minlength&&s.maxlength&&(s.rangelength=[s.minlength,s.maxlength],delete s.minlength,delete s.maxlength)),s},normalizeRule:function(t){if("string"==typeof t){var e={};l.each(t.split(/\s/),function(){e[this]=!0}),t=e}return t},addMethod:function(t,e,i){l.validator.methods[t]=e,l.validator.messages[t]=void 0!==i?i:l.validator.messages[t],e.length<3&&l.validator.addClassRules(t,l.validator.normalizeRule(t))},methods:{required:function(t,e,i){if(!this.depend(i,e))return"dependency-mismatch";if("select"!==e.nodeName.toLowerCase())return this.checkable(e)?0<this.getLength(t,e):0<l.trim(t).length;var s=l(e).val();return s&&0<s.length},email:function(t,e){return this.optional(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(""+new Date(t))},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;for(var i=0,s=0,n=!1,r=(t=t.replace(/\D/g,"")).length-1;0<=r;r--){var o=t.charAt(r);s=parseInt(o,10),n&&9<(s*=2)&&(s-=9),i+=s,n=!n}return 0==i%10},minlength:function(t,e,i){var s=l.isArray(t)?t.length:this.getLength(l.trim(t),e);return this.optional(e)||i<=s},maxlength:function(t,e,i){var s=l.isArray(t)?t.length:this.getLength(l.trim(t),e);return this.optional(e)||s<=i},rangelength:function(t,e,i){var s=l.isArray(t)?t.length:this.getLength(l.trim(t),e);return this.optional(e)||s>=i[0]&&i[1]>=s},min:function(t,e,i){return this.optional(e)||i<=t},max:function(t,e,i){return this.optional(e)||t<=i},range:function(t,e,i){return this.optional(e)||t>=i[0]&&i[1]>=t},equalTo:function(t,e,i){var s=l(i);return this.settings.onfocusout&&s.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){l(e).valid()}),t===s.val()},remote:function(r,o,t){if(this.optional(o))return"dependency-mismatch";var a=this.previousValue(o);if(this.settings.messages[o.name]||(this.settings.messages[o.name]={}),a.originalMessage=this.settings.messages[o.name].remote,this.settings.messages[o.name].remote=a.message,t="string"==typeof t&&{url:t}||t,a.old===r)return a.valid;a.old=r;var h=this;this.startRequest(o);var e={};return e[o.name]=r,l.ajax(l.extend(!0,{url:t,mode:"abort",port:"validate"+o.name,dataType:"json",data:e,success:function(t){h.settings.messages[o.name].remote=a.originalMessage;var e=!0===t||"true"===t;if(e){var i=h.formSubmitted;h.prepareElement(o),h.formSubmitted=i,h.successList.push(o),delete h.invalid[o.name],h.showErrors()}else{var s={},n=t||h.defaultMessage(o,"remote");s[o.name]=a.message=l.isFunction(n)?n(r):n,h.invalid[o.name]=!0,h.showErrors(s)}a.valid=e,h.stopRequest(o,e)}},t)),"pending"}}}),l.format=l.validator.format}(jQuery),function(s){var n={};if(s.ajaxPrefilter)s.ajaxPrefilter(function(t,e,i){var s=t.port;"abort"===t.mode&&(n[s]&&n[s].abort(),n[s]=i)});else{var r=s.ajax;s.ajax=function(t){var e=("mode"in t?t:s.ajaxSettings).mode,i=("port"in t?t:s.ajaxSettings).port;return"abort"===e?(n[i]&&n[i].abort(),n[i]=r.apply(this,arguments),n[i]):r.apply(this,arguments)}}}(jQuery),function(n){n.extend(n.fn,{validateDelegate:function(i,t,s){return this.bind(t,function(t){var e=n(t.target);return e.is(i)?s.apply(e,arguments):void 0})}})}(jQuery),jQuery.cookie=function(t,e,i){if(void 0===e){var s=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var o=jQuery.trim(n[r]);if(o+"\r\n",o.substring(0,t.length+1)==t+"="){s=decodeURIComponent(o.substring(t.length+1));break}}return s}i=i||{},null===e&&(e="",i.expires=-1);var a,h="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(a=new Date).setTime(a.getTime()+24*i.expires*60*60*1e3):a=i.expires,h="; expires="+a.toUTCString());var l=i.path?"; path="+i.path:"",u=i.domain?"; domain="+i.domain:"",c=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),h,l,u,c].join("")},function(r,o,c){var m=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame||function(t){r.setTimeout(t,1e3/60)},f=function(){var s={},n=o.createElement("div").style,e=function(){for(var t=["t","webkitT","MozT","msT","OT"],e=0,i=t.length;e<i;e++)if(t[e]+"ransform"in n)return t[e].substr(0,t[e].length-1);return!1}();function t(t){return!1!==e&&(""===e?t:e+t.charAt(0).toUpperCase()+t.substr(1))}s.getTime=Date.now||function(){return(new Date).getTime()},s.extend=function(t,e){for(var i in e)t[i]=e[i]},s.addEvent=function(t,e,i,s){t.addEventListener(e,i,!!s)},s.removeEvent=function(t,e,i,s){t.removeEventListener(e,i,!!s)},s.momentum=function(t,e,i,s,n,r){var o,a,h=t-e,l=c.abs(h)/i;return a=l/(r=void 0===r?6e-4:r),(o=t+l*l/(2*r)*(h<0?-1:1))<s?(o=n?s-n/2.5*(l/8):s,a=(h=c.abs(o-t))/l):0<o&&(o=n?n/2.5*(l/8):0,a=(h=c.abs(t)+o)/l),{destination:c.round(o),duration:a}};var i=t("transform");return s.extend(s,{hasTransform:!1!==i,hasPerspective:t("perspective")in n,hasTouch:"ontouchstart"in r,hasPointer:navigator.msPointerEnabled,hasTransition:t("transition")in n}),s.isBadAndroid=/Android /.test(r.navigator.appVersion)&&!/Chrome\/\d/.test(r.navigator.appVersion),s.extend(s.style={},{transform:i,transitionTimingFunction:t("transitionTimingFunction"),transitionDuration:t("transitionDuration"),transitionDelay:t("transitionDelay"),transformOrigin:t("transformOrigin")}),s.hasClass=function(t,e){return new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},s.addClass=function(t,e){if(!s.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},s.removeClass=function(t,e){if(s.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},s.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},s.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},s.extend(s.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),s.extend(s.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return c.sqrt(1- --t*t)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){return(t-=1)*t*(5*t+4)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){return 0===t?0:1==t?1:.4*c.pow(2,-10*t)*c.sin((t-.055)*(2*c.PI)/.22)+1}}}),s.tap=function(t,e){var i=o.createEvent("Event");i.initEvent(e,!0,!0),i.pageX=t.pageX,i.pageY=t.pageY,t.target.dispatchEvent(i)},s.click=function(t){var e,i=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||((e=o.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,t.view,1,i.screenX,i.screenY,i.clientX,i.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),e._constructed=!0,i.dispatchEvent(e))},s}();function t(t,e){for(var i in this.wrapper="string"==typeof t?o.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0},e)this.options[i]=e[i];this.translateZ=this.options.HWCompositing&&f.hasPerspective?" translateZ(0)":"",this.options.useTransition=f.hasTransition&&this.options.useTransition,this.options.useTransform=f.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?f.ease[this.options.bounceEasing]||f.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function a(t,e,i){var s=o.createElement("div"),n=o.createElement("div");return!0===i&&(s.style.cssText="position:absolute;z-index:9999",n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),n.className="iScrollIndicator",s.className="h"==t?(!0===i&&(s.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",n.style.height="100%"),"iScrollHorizontalScrollbar"):(!0===i&&(s.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",n.style.width="100%"),"iScrollVerticalScrollbar"),s.style.cssText+=";overflow:hidden",e||(s.style.pointerEvents="none"),s.appendChild(n),s}function h(t,e){for(var i in this.wrapper="string"==typeof e.el?o.querySelector(e.el):e.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=t,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0},e)this.options[i]=e[i];this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(f.addEvent(this.indicator,"touchstart",this),f.addEvent(r,"touchend",this)),this.options.disablePointer||(f.addEvent(this.indicator,"MSPointerDown",this),f.addEvent(r,"MSPointerUp",this)),this.options.disableMouse||(f.addEvent(this.indicator,"mousedown",this),f.addEvent(r,"mouseup",this))),this.options.fade&&(this.wrapperStyle[f.style.transform]=this.scroller.translateZ,this.wrapperStyle[f.style.transitionDuration]=f.isBadAndroid?"0.001s":"0ms",this.wrapperStyle.opacity="0")}t.prototype={version:"5.1.1",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(t){if((1==f.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||f.eventType[t.type]===this.initiated)){!this.options.preventDefault||f.isBadAndroid||f.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,i=t.touches?t.touches[0]:t;this.initiated=f.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=f.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(c.round(e.x),c.round(e.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(t){if(this.enabled&&f.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,i,s,n,r=t.touches?t.touches[0]:t,o=r.pageX-this.pointX,a=r.pageY-this.pointY,h=f.getTime();if(this.pointX=r.pageX,this.pointY=r.pageY,this.distX+=o,this.distY+=a,s=c.abs(this.distX),n=c.abs(this.distY),!(300<h-this.endTime&&s<10&&n<10)){if(this.directionLocked||this.options.freeScroll||(s>n+this.options.directionLockThreshold?this.directionLocked="h":n>=s+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);o=0}o=this.hasHorizontalScroll?o:0,a=this.hasVerticalScroll?a:0,e=this.x+o,i=this.y+a,(0<e||e<this.maxScrollX)&&(e=this.options.bounce?this.x+o/3:0<e?0:this.maxScrollX),(0<i||i<this.maxScrollY)&&(i=this.options.bounce?this.y+a/3:0<i?0:this.maxScrollY),this.directionX=0<o?-1:o<0?1:0,this.directionY=0<a?-1:a<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,i),300<h-this.startTime&&(this.startTime=h,this.startX=this.x,this.startY=this.y)}}},_end:function(t){if(this.enabled&&f.eventType[t.type]===this.initiated){this.options.preventDefault&&!f.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();t.changedTouches&&t.changedTouches[0];var e,i,s=f.getTime()-this.startTime,n=c.round(this.x),r=c.round(this.y),o=c.abs(n-this.startX),a=c.abs(r-this.startY),h=0,l="";if(this.isInTransition=0,this.initiated=0,this.endTime=f.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(n,r),!this.moved)return this.options.tap&&f.tap(t,this.options.tap),this.options.click&&f.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&s<200&&o<100&&a<100)this._execEvent("flick");else{if(this.options.momentum&&s<300&&(e=this.hasHorizontalScroll?f.momentum(this.x,this.startX,s,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:n,duration:0},i=this.hasVerticalScroll?f.momentum(this.y,this.startY,s,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:r,duration:0},n=e.destination,r=i.destination,h=c.max(e.duration,i.duration),this.isInTransition=1),this.options.snap){var u=this._nearestSnap(n,r);this.currentPage=u,h=this.options.snapSpeed||c.max(c.max(c.min(c.abs(n-u.x),1e3),c.min(c.abs(r-u.y),1e3)),300),n=u.x,r=u.y,this.directionX=0,this.directionY=0,l=this.options.bounceEasing}if(n!=this.x||r!=this.y)return(0<n||n<this.maxScrollX||0<r||r<this.maxScrollY)&&(l=f.ease.quadratic),void this.scrollTo(n,r,h,l);this._execEvent("scrollEnd")}}}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||0<this.x?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||0<this.y?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(e!=this.x||i!=this.y)&&(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=f.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);-1<i&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;e<i;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,s){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,s)},scrollTo:function(t,e,i,s){s=s||f.ease.circular,this.isInTransition=this.options.useTransition&&0<i,!i||this.options.useTransition&&s.style?(this._transitionTimingFunction(s.style),this._transitionTime(i),this._translate(t,e)):this._animate(t,e,i,s.fn)},scrollToElement:function(t,e,i,s,n){if(t=t.nodeType?t:this.scroller.querySelector(t)){var r=f.offset(t);r.left-=this.wrapperOffset.left,r.top-=this.wrapperOffset.top,!0===i&&(i=c.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),!0===s&&(s=c.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),r.left-=i||0,r.top-=s||0,r.left=0<r.left?0:r.left<this.maxScrollX?this.maxScrollX:r.left,r.top=0<r.top?0:r.top<this.maxScrollY?this.maxScrollY:r.top,e=null==e||"auto"===e?c.max(c.abs(this.x-r.left),c.abs(this.y-r.top)):e,this.scrollTo(r.left,r.top,e,n)}},_transitionTime:function(t){if(t=t||0,this.scrollerStyle[f.style.transitionDuration]=t+"ms",!t&&f.isBadAndroid&&(this.scrollerStyle[f.style.transitionDuration]="0.001s"),this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTime(t)},_transitionTimingFunction:function(t){if(this.scrollerStyle[f.style.transitionTimingFunction]=t,this.indicators)for(var e=this.indicators.length;e--;)this.indicators[e].transitionTimingFunction(t)},_translate:function(t,e){if(this.options.useTransform?this.scrollerStyle[f.style.transform]="translate("+t+"px,"+e+"px)"+this.translateZ:(t=c.round(t),e=c.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(t){var e=t?f.removeEvent:f.addEvent,i=this.options.bindToWrapper?this.wrapper:r;e(r,"orientationchange",this),e(r,"resize",this),this.options.click&&e(this.wrapper,"click",this,!0),this.options.disableMouse||(e(this.wrapper,"mousedown",this),e(i,"mousemove",this),e(i,"mousecancel",this),e(i,"mouseup",this)),f.hasPointer&&!this.options.disablePointer&&(e(this.wrapper,"MSPointerDown",this),e(i,"MSPointerMove",this),e(i,"MSPointerCancel",this),e(i,"MSPointerUp",this)),f.hasTouch&&!this.options.disableTouch&&(e(this.wrapper,"touchstart",this),e(i,"touchmove",this),e(i,"touchcancel",this),e(i,"touchend",this)),e(this.scroller,"transitionend",this),e(this.scroller,"webkitTransitionEnd",this),e(this.scroller,"oTransitionEnd",this),e(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var t,e,i=r.getComputedStyle(this.scroller,null);return e=this.options.useTransform?(t=+((i=i[f.style.transform].split(")")[0].split(", "))[12]||i[4]),+(i[13]||i[5])):(t=+i.left.replace(/[^-\d.]/g,""),+i.top.replace(/[^-\d.]/g,"")),{x:t,y:e}},_initIndicators:function(){var t,e=this.options.interactiveScrollbars,i="string"!=typeof this.options.scrollbars,s=[],n=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:a("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),s.push(t)),this.options.scrollX&&(t={el:a("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:i,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),s.push(t))),this.options.indicators&&(s=s.concat(this.options.indicators));for(var r=s.length;r--;)this.indicators.push(new h(this,s[r]));function o(t){for(var e=n.indicators.length;e--;)t.call(n.indicators[e])}this.options.fadeScrollbars&&(this.on("scrollEnd",function(){o(function(){this.fade()})}),this.on("scrollCancel",function(){o(function(){this.fade()})}),this.on("scrollStart",function(){o(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){o(function(){this.fade(1,!0)})})),this.on("refresh",function(){o(function(){this.refresh()})}),this.on("destroy",function(){o(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){f.addEvent(this.wrapper,"wheel",this),f.addEvent(this.wrapper,"mousewheel",this),f.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){f.removeEvent(this.wrapper,"wheel",this),f.removeEvent(this.wrapper,"mousewheel",this),f.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(t){if(this.enabled){t.preventDefault(),t.stopPropagation();var e,i,s,n,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in t)i=1===t.deltaMode?(e=t.deltaX<0?this.options.mouseWheelSpeed:-this.options.mouseWheelSpeed,t.deltaY<0?this.options.mouseWheelSpeed:-this.options.mouseWheelSpeed):(e=-t.deltaX,-t.deltaY);else if("wheelDeltaX"in t)e=t.wheelDeltaX/120*this.options.mouseWheelSpeed,i=t.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in t)e=i=t.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in t))return;e=i=-t.detail/3*this.options.mouseWheelSpeed}if(e*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(e=i,i=0),this.options.snap)return s=this.currentPage.pageX,n=this.currentPage.pageY,0<e?s--:e<0&&s++,0<i?n--:i<0&&n++,void this.goToPage(s,n);s=this.x+c.round(this.hasHorizontalScroll?e:0),n=this.y+c.round(this.hasVerticalScroll?i:0),0<s?s=0:s<this.maxScrollX&&(s=this.maxScrollX),0<n?n=0:n<this.maxScrollY&&(n=this.maxScrollY),this.scrollTo(s,n,0)}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,i,s,n,r,o=0,a=0,h=0,l=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(i=c.round(l/2),s=c.round(u/2);h>-this.scrollerWidth;){for(this.pages[o]=[],n=t=0;n>-this.scrollerHeight;)this.pages[o][t]={x:c.max(h,this.maxScrollX),y:c.max(n,this.maxScrollY),width:l,height:u,cx:h-i,cy:n-s},n-=u,t++;h-=l,o++}else for(t=(r=this.options.snap).length,e=-1;o<t;o++)(0===o||r[o].offsetLeft<=r[o-1].offsetLeft)&&(a=0,e++),this.pages[a]||(this.pages[a]=[]),h=c.max(-r[o].offsetLeft,this.maxScrollX),n=c.max(-r[o].offsetTop,this.maxScrollY),i=h-c.round(r[o].offsetWidth/2),s=n-c.round(r[o].offsetHeight/2),this.pages[a][e]={x:h,y:n,width:r[o].offsetWidth,height:r[o].offsetHeight,cx:i,cy:s},h>this.maxScrollX&&a++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=c.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.x-this.startX),1e3),c.min(c.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,s=this.pages.length,n=0;if(c.abs(t-this.absStartX)<this.snapThresholdX&&c.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(0<t?t=0:t<this.maxScrollX&&(t=this.maxScrollX),0<e?e=0:e<this.maxScrollY&&(e=this.maxScrollY);i<s;i++)if(t>=this.pages[i][0].cx){t=this.pages[i][0].x;break}for(s=this.pages[i].length;n<s;n++)if(e>=this.pages[0][n].cy){e=this.pages[0][n].y;break}return i==this.currentPage.pageX&&((i+=this.directionX)<0?i=0:i>=this.pages.length&&(i=this.pages.length-1),t=this.pages[i][0].x),n==this.currentPage.pageY&&((n+=this.directionY)<0?n=0:n>=this.pages[0].length&&(n=this.pages[0].length-1),e=this.pages[0][n].y),{x:t,y:e,pageX:i,pageY:n}},goToPage:function(t,e,i,s){s=s||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:t<0&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:e<0&&(e=0);var n=this.pages[t][e].x,r=this.pages[t][e].y;i=void 0===i?this.options.snapSpeed||c.max(c.max(c.min(c.abs(n-this.x),1e3),c.min(c.abs(r-this.y),1e3)),300):i,this.currentPage={x:n,y:r,pageX:t,pageY:e},this.scrollTo(n,r,i,s)},next:function(t,e){var i=this.currentPage.pageX,s=this.currentPage.pageY;++i>=this.pages.length&&this.hasVerticalScroll&&(i=0,s++),this.goToPage(i,s,t,e)},prev:function(t,e){var i=this.currentPage.pageX,s=this.currentPage.pageY;--i<0&&this.hasVerticalScroll&&(i=0,s--),this.goToPage(i,s,t,e)},_initKeys:function(t){var e,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(e in this.options.keyBindings)"string"==typeof this.options.keyBindings[e]&&(this.options.keyBindings[e]=this.options.keyBindings[e].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(e in i)this.options.keyBindings[e]=this.options.keyBindings[e]||i[e];f.addEvent(r,"keydown",this),this.on("destroy",function(){f.removeEvent(r,"keydown",this)})},_key:function(t){if(this.enabled){var e,i=this.options.snap,s=i?this.currentPage.pageX:this.x,n=i?this.currentPage.pageY:this.y,r=f.getTime(),o=this.keyTime||0;switch(this.options.useTransition&&this.isInTransition&&(e=this.getComputedPosition(),this._translate(c.round(e.x),c.round(e.y)),this.isInTransition=!1),this.keyAcceleration=r-o<200?c.min(this.keyAcceleration+.25,50):0,t.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?s+=i?1:this.wrapperWidth:n+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?s-=i?1:this.wrapperWidth:n-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:s=i?this.pages.length-1:this.maxScrollX,n=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:n=s=0;break;case this.options.keyBindings.left:s+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:s-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=i?1:5+this.keyAcceleration>>0;break;default:return}i?this.goToPage(s,n):(0<s?(s=0,this.keyAcceleration=0):s<this.maxScrollX&&(s=this.maxScrollX,this.keyAcceleration=0),0<n?(n=0,this.keyAcceleration=0):n<this.maxScrollY&&(n=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(s,n,0),this.keyTime=r)}},_animate:function(r,o,a,h){var l=this,u=this.x,c=this.y,d=f.getTime(),p=d+a;this.isAnimating=!0,function t(){var e,i,s,n=f.getTime();if(p<=n)return l.isAnimating=!1,l._translate(r,o),void(l.resetPosition(l.options.bounceTime)||l._execEvent("scrollEnd"));s=h(n=(n-d)/a),e=(r-u)*s+u,i=(o-c)*s+c,l._translate(e,i),l.isAnimating&&m(t)}()},handleEvent:function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},h.prototype={handleEvent:function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t)}},destroy:function(){this.options.interactive&&(f.removeEvent(this.indicator,"touchstart",this),f.removeEvent(this.indicator,"MSPointerDown",this),f.removeEvent(this.indicator,"mousedown",this),f.removeEvent(r,"touchmove",this),f.removeEvent(r,"MSPointerMove",this),f.removeEvent(r,"mousemove",this),f.removeEvent(r,"touchend",this),f.removeEvent(r,"MSPointerUp",this),f.removeEvent(r,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},isClickEnabled:!0,_start:function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),e.isClickEnabled){e.isClickEnabled=!1;var i=t.touches?t.touches[0]:t;this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=i.pageX,this.lastPointY=i.pageY,this.startTime=f.getTime(),this.options.disableTouch||f.addEvent(r,"touchmove",this),this.options.disablePointer||f.addEvent(r,"MSPointerMove",this),this.options.disableMouse||f.addEvent(r,"mousemove",this),this.scroller._execEvent("beforeScrollStart"),r.setTimeout(function(){e.isClickEnabled=!0},500),webApp.isDesktop&&$("#overlay").show()}},_move:function(t){var e,i,s,n,r=t.touches?t.touches[0]:t;f.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,e=r.pageX-this.lastPointX,this.lastPointX=r.pageX,i=r.pageY-this.lastPointY,this.lastPointY=r.pageY,s=this.x+e,n=this.y+i,this._pos(s,n),t.preventDefault(),t.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),f.removeEvent(r,"touchmove",this),f.removeEvent(r,"MSPointerMove",this),f.removeEvent(r,"mousemove",this),this.scroller.options.snap){var e=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),i=this.options.snapSpeed||c.max(c.max(c.min(c.abs(this.scroller.x-e.x),1e3),c.min(c.abs(this.scroller.y-e.y),1e3)),300);this.scroller.x==e.x&&this.scroller.y==e.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=e,this.scroller.scrollTo(e.x,e.y,i,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd"),webApp.isDesktop&&$("#overlay").hide()}},transitionTime:function(t){t=t||0,this.indicatorStyle[f.style.transitionDuration]=t+"ms",!t&&f.isBadAndroid&&(this.indicatorStyle[f.style.transitionDuration]="0.001s")},transitionTimingFunction:function(t){this.indicatorStyle[f.style.transitionTimingFunction]=t},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(f.addClass(this.wrapper,"iScrollBothScrollbars"),f.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(f.removeClass(this.wrapper,"iScrollBothScrollbars"),f.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=c.max(c.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=8-this.indicatorWidth,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=c.max(c.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=8-this.indicatorHeight,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var t=this.options.listenX&&c.round(this.sizeRatioX*this.scroller.x)||0,e=this.options.listenY&&c.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(t<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=c.max(this.indicatorWidth+t,8),this.indicatorStyle.width=this.width+"px"),t=this.minBoundaryX):t>this.maxBoundaryX?t="scale"==this.options.shrink?(this.width=c.max(this.indicatorWidth-(t-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",this.maxPosX+this.indicatorWidth-this.width):this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),e<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=c.max(this.indicatorHeight+3*e,8),this.indicatorStyle.height=this.height+"px"),e=this.minBoundaryY):e>this.maxBoundaryY?e="scale"==this.options.shrink?(this.height=c.max(this.indicatorHeight-3*(e-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",this.maxPosY+this.indicatorHeight-this.height):this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=t,this.y=e,this.scroller.options.useTransform?this.indicatorStyle[f.style.transform]="translate("+t+"px,"+e+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=t+"px",this.indicatorStyle.top=e+"px")},_pos:function(t,e){t<0?t=0:t>this.maxPosX&&(t=this.maxPosX),e<0?e=0:e>this.maxPosY&&(e=this.maxPosY),t=this.options.listenX?c.round(t/this.sizeRatioX):this.scroller.x,e=this.options.listenY?c.round(e/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(t,e)},fade:function(t,e){if(!e||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=t?250:500,s=t?0:300;t=t?"1":"0",this.wrapperStyle[f.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(t){this.wrapperStyle.opacity=t,this.visible=+t}.bind(this,t),s)}}},t.utils=f,"undefined"!=typeof module&&module.exports?module.exports=t:r.IScroll=t}(window,document,Math);var webApp=webApp||{};webApp.extend=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,(t.prototype.constructor=t).superclass=e.prototype};