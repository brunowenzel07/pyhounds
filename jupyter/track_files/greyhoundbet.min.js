(webApp=webApp||{}).sortByCollection={number:"Horse number",draw:"Draw",odds:"Odds",tips:"Tips",rpr:"RP Rating",ts:"Topspeed",weight:"Weight",age:"Age",name:"Horse A - Z"},webApp.oddsCollection={fractional:"Fractional",decimal:"Decimal"},webApp.commentsCollection={true:"Show",false:"Hide"},webApp.bookiesCollection={wh:{name:"William Hill",diffName:"WH_OXI",terms:webApp.WH_TERMS_REDIRECT_URL,webSite:"WilliamHill.com",openAccountUrl:"#wh-register",id:"B16"},ladb:{name:"Ladbrokes",diffName:"LADB",terms:webApp.LADB_TERMS_REDIRECT_URL,webSite:"Ladbrokes.com",openAccountUrl:"#ladb-home/action=registration",id:"B11"}},(webApp=webApp||{}).sortByCollection=$.extend(webApp.sortByCollection||{},{number:"Trap",topSpeed:"Topspeed"}),(greyhoundbet=greyhoundbet||{}).predictorSettings=function(){var e=webApp.isMobile?106:150,t=$(window).width(),i=(t-64-e)/e;return{raceLineLength:i,dogSize:e/(t-64)*100,scale:i/.36}}(),(webApp=webApp||{}).GaEventTracker=function(){window._gaq=window._gaq||[];var o=[],s="";this.EVENT_CLICK_TRACK_EVENT="click.trackEvent";this.ATTR_EVENT_ID="data-eventid",this.ATTR_EVENT_LABEL="data-eventlabel",this.setEventsConfig=function(e){return e,this},this.setDeviceOrientation=function(e){s=e},this._pushCall=function(e,t){window._gaq.push(e)},this.trackEvent=function(e,t,i,r,n){var a=["_trackEvent"];if(!e||!t)throw{name:"ParamError",message:"Event category and action are required"};a.push(e,t),void 0!==i&&a.push(i),void 0!==r&&a.push(r),void 0!==n&&a.push(n),this.setCustomVar(1,s,e+":"+t,3),this._pushCall(a),o=$.merge([],arguments)},this.trackEventById=function(e,t){},this.trackEventByElement=function(e){var t=e.data("eventid"),i=e.data("eventlabel");this.trackEventById(t,i)},this.setCustomVar=function(e,t,i,r){var n=["_setCustomVar"];if(!e||!t||!i)throw{name:"ParamError",message:"Variable slot, name and value are required"};n.push(e,t,i),void 0!==r&&n.push(r),this._pushCall(n,!0)},this.trackChangeOrientation=function(e){this.setDeviceOrientation(e),o.length&&this.trackEvent.apply(this,o)},this.getEventAttrs=function(e,t){var i="";return i+=this.getEventIdAttr(e),t&&(i+=" "+this.getEventLabelAttr(t)),i},this.getEventIdAttr=function(e){return this.ATTR_EVENT_ID+"="+e},this.getEventLabelAttr=function(e){return this.ATTR_EVENT_LABEL+"="+JSON.stringify(e,'"',"-")},this.bindEventTracking=function(e){var t=[],i=this;e&&0!=e.length&&(t=e.find("["+this.ATTR_EVENT_ID+"]")).length&&t.bind(this.EVENT_CLICK_TRACK_EVENT,function(e){i.processElem(this,e)})},this.processElem=function(e,t){var i=$(e),r=i.attr(this.ATTR_EVENT_ID),n=i.attr(this.ATTR_EVENT_LABEL);r&&this.trackEventById(r,n)},this.getTrackingId=function(){return webApp.isIosWrapper&&webApp.isIPad?webApp.IPAD_WRAPPER_GA_ACCOUNT_ID:webApp.isTablet?webApp.TABLET_GA_ACCOUNT_ID:webApp.SERVER_SERVER_GA_TRACKER_ID}},(webApp=webApp||{}).GaEventTrackerSender=function(e){this.eventTracker=e,this.operate=function(e,t){this[e]&&this[e](t)}},(webApp=webApp||{}).prefBookmaker=function(){var a={wh:"pref_wh",ladb:"pref_ladb"};return{sessionPrefBookmaker:"",get:function(){var e=this.sessionPrefBookmaker?this.sessionPrefBookmaker:webApp.userSettings.get("bookie");return e||"wh"},set:function(e){var t=this.get(),i=!(e&&t==e),r=$("body");if(e){if(!a.hasOwnProperty(e)||!i)return;r.removeClass(a[t])}else e=t;r.addClass(a[e]);var n=webApp.bookieCollection.getBookieParams(e);webApp.PREFERRED_BOOKMAKER=n.diffName,diffusion.utils.topic.setPreferredBookmaker(webApp.PREFERRED_BOOKMAKER),this.sessionPrefBookmaker=e,webApp.userSettings.set("bookie",e),i&&($(window).trigger("changebookie",[e]),webApp.whRadio.stop())},setWithMessage:function(e,t){webApp.prefBookmaker.set(e),webApp.confirmMessage.show(t)}}}(),(webApp=webApp||{}).UserBalanceHelper={init:function(e){var t=webApp.userSettings.get("showUserBalance"),i=e.find("#userBalance"),r=e.find("#showBalance"),n=e.find("#userStat");t?(i.show(),r.hide()):(i.hide(),r.show()),n.click(function(){webApp.UserBalanceHelper.toggle()})},toggle:function(){var e=webApp.userSettings.get("showUserBalance");webApp.userSettings.set("showUserBalance",!e),e?($("#userBalance").hide(),$("#showBalance").show()):($("#userBalance").show(),$("#showBalance").hide())}},(webApp=webApp||{}).SwipeToEditPlugin=function(e){var t,i,r=".swipeToEditNs",n="resize"+r+" "+webApp.EVENT_CHANGE_ORIENTATION+r,a=this,o=null;this.init=function(e){t=s(),e&&$.extend(t,e),i=webApp.swipeToEdit[t.captureClickStrategy],this._getSwipeElementsBySelector().on("swipe",function(e,t,i){l(i)&&"left"===t&&a.switchToEditMode($(this))})},this.beforeEditModeOn=function(e){},this.afterEditModeOn=function(e){},this.leaveEditMode=function(){c()&&(i.destroy(),d(),this.onLeaveEditMode(o),o=null)},this.onLeaveEditMode=function(){},this.switchToEditMode=function(e){c()||!1!==a.beforeEditModeOn(e)&&(o=e,i.init(e,$.proxy(a.leaveEditMode,a),t.captureClickStrategyOptions),p(e),a.afterEditModeOn(e))},this._getSwipeElementsBySelector=function(){return $(e)};var s=function(){return{captureClickStrategy:"nonCapturingStrategy",timeThreshold:800,captureClickStrategyOptions:{trackClickOverlapping:!0,clickOverlappingThreshold:14}}},p=function(e){e.on("swipe",function(e,t,i){l(i)&&"right"===t&&a.leaveEditMode()})},l=function(e){return e<t.timeThreshold},c=function(){return!!o},d=function(){$(window).off(n),$(document.body).off(r),o.off(r)}};var greyhoundbet,webApp=webApp||{};function scrollDebug(){$("#debugConent").height()>$("#debug").height()&&$("#debugConent").css("top",parseInt($("#debugConent").css("top"))-14)}function appBootstrap(){if(webApp.ajaxManager.init(webApp.routes),webApp.registry=new rp.Registry,webApp.userSettings.setStorage(utils.localStorage),webApp.userSettings.setDefaults(2),"y"==window.localStorage.getItem("isSupportStorage")?webApp.cacheManager.init(localStorage,2e6):webApp.cacheManager.init(null,2e6),webApp.cacheManager.getCacheDateChanged()&&webApp.cacheManager.clearAllCache(),webApp.bookiesCollection.wh.diffName=webApp.WH_DIFFUSION_NAME,webApp.deviceDependentSettings.setLadbApiKey(webApp.LADB_API_KEY),webApp.deviceDependentSettings.setDeviceTypeMobile(),webApp.bookieCollection.init(),webApp.overlay.init(),webApp.landing.init(),diffusion.utils.topic.setPreferredBookmaker(webApp.PREFERRED_BOOKMAKER),webApp.eventTracker=new webApp.GaEventTracker,webApp.eventTracker.setEventsConfig(webApp.gaEvents),webApp.eventTracker.setDeviceOrientation(webApp.core.getOrientation()),webApp.core.addHelper("eventTracker",webApp.eventTracker),webApp.eventTrackerSender=new webApp.GaEventTrackerSender(webApp.eventTracker),webApp.core.addHelper("GaEventTrackerSender",webApp.eventTrackerSender),$(document).bind(webApp.EVENT_VIEW_RENDER_TPL,function(e,t){var i=t.$content||{};webApp.eventTracker.bindEventTracking(i)}),webApp.$appContainer=$("#webApp"),webApp.$mainTabs=$("#mainTabs"),webApp.$mainTabsLinks=webApp.$mainTabs.find("> ul a"),$(window).bind(webApp.EVENT_CHANGE_ORIENTATION,function(e,t){t.orientation&&webApp.eventTracker.trackChangeOrientation(t.orientation)}),$(window).bind(webApp.EVENT_CHANGE_HASH,function(e,t){t&&t[0]&&window._gaq.push(["_trackPageview","/"+t[0]])}),webApp.ErrorHandler.setErrorTracker(webApp.eventTracker),webApp.genericWhErrorHandler=new webApp.WhErrorHandler({user:function(e){alert(e)},developer:function(e){var t=webApp.ErrorHandler.actionWh;"topUpController"==e.errorSource&&(t="Top Up Error Message"),webApp.ErrorHandler.process(e.statusMessage,null,t)}}).generic,webApp.radioSupport=webApp.isIDevice,webApp.isRadioDisplayed=webApp.isIDevice||webApp.isAndroid||webApp.isDesktop,webApp.clickReportHandler=new utils.clickReport("betClk",webApp.appletUrl),webApp.clickReportHandler.init(),webApp.selectionsAlert.init(),webApp.SelectionsManager.init(),utils.localStorage.get("userId")||utils.localStorage.set("userId",Math.floor(1e12*Math.random()+1)),$("#firstLoadingAnimation").remove(),webApp.checkDeviseAppSupport(),webApp.isImportJS||$(window).trigger("load"),webApp.core.init(webApp.configs),webApp.isIOS_8){function e(e){var t,i=e.target,r=e.originalEvent.touches[0],n=r.pageX,a=r.pageY,o=10,s=$(this),p=!1;function l(){clearTimeout(t),s.off("touchmove",d).off("touchend",c)}function c(e){l(),i===e.target&&p&&s[0].click()}function d(e){var t=e.originalEvent.touches[0],i=t.pageX,r=t.pageY;p=!0,(Math.abs(i-n)>o||Math.abs(r-a)>o)&&l()}t=setTimeout(l,300),s.on("touchmove",d).on("touchend",c)}$("body").on("touchstart","a",e),$("body").on("touchstart",".betButton",e)}webApp.isDesktop&&($(".futureBtn").on("click",function(e){webApp.urlManager.isTransitionNotNeeded("meeting-list")&&e.preventDefault(),setTimeout(function(){webApp.BottomMenuControl.showCalendar()},200)}),$(".archiveCalendar").on("click",function(e){webApp.urlManager.isTransitionNotNeeded("results-list")&&e.preventDefault(),setTimeout(function(){webApp.Calendar.show()},200)})),window._gaq.push(["_setAccount",webApp.eventTracker.getTrackingId()]),window._gaq.push(["_trackPageview"])}!function(){webApp.swipeToEdit=webApp.swipeToEdit||{};var r,n,p;webApp.swipeToEdit.nonCapturingStrategy={init:function(e,t,i){r=webApp.EVENT_TAP_START+".swipeToEditNs",n=t,a(e),p=i||{}},destroy:function(){}};var a=function(t){$(document.body).on(r,function(e){t.has(e.target).length||i(t,e)||n()})},i=function(e,t){if(!p.trackClickOverlapping)return!0;var i,r;if(t.originalEvent.touches)i=t.originalEvent.touches[0].pageX,r=t.originalEvent.touches[0].pageY;else{if(void 0===t.pageX)return!1;i=t.pageX,r=t.pageY}var n=e.offset().top,a=e.offset().left,o=n+e.outerHeight(),s=a+e.outerWidth();return Math.min(l(i,a),l(i,s),l(r,n),l(r,o))<p.clickOverlappingThreshold},l=function(e,t){return Math.abs(e-t)}}(),(webApp=webApp||{}).PriceHandlerHelper=function(e){this.unsubscribePrices=function(){DiffusionConnector.unsubscribe(r)};var t=function(n){n.price=n.toString();var e=l+n.selectionName,t=h("diffusionName",n.selectionName).name||"",a="#"+e+" span";if(t){var o=webApp.bookieCollection.getCurrentBookieParams(),i=webApp.viewManager.renderTpl("price-button",{price:n,bookie:o}),r={selectionName:t,raceTs:n.raceTs};$.extend(r,p);var s=new rp.betting.Selection({id:n.selectionId,price:"SP"===n.fractional?null:{num:n.numerator,den:n.denominator},isSP:!("SP"!==n.fractional),data:r});n.isSuspended||i.bind("click.betClick",$.proxy(function(){var e,t,i,r;webApp.registry.set("backUrlHash",d),u(n),e=s,t=webApp.eventTracker,i=webApp.bookieCollection.getCurrentBookieParams(),r=e.data().courseName+" "+moment.unix(e.data().raceTs).utc().format("h:mm")+", "+e.data().selectionName+" - "+i.name+" - "+c,t.trackEventById("bets_price_click",r),s.eachWay(b),s.data().isBOG=f,webApp.SelectionsManager.processPriceClick(s,a,g,o)},this)),$("#"+e).html(i),webApp.SelectionsManager.getSelections().length&&webApp.SelectionsManager.isSelected(s)&&webApp.SelectionsManager.highlightSelectionPrice(a)}},i=e.topic,r=e.diffusionListener,p=e.selectionData,l=e.selectorPrefix,c=e.trackingLabel,d=e.backUrl,u=e.clickReportCallback,h=e.selectionNameCallback,g=e.firstSelectionCallback,b=null,f=null;!function(){if(""!==i){var e=new webApp.SimplePriceListener({price:$.proxy(function(e){t(e)},this),eachWay:$.proxy(function(e){b=e},this),bestOdds:$.proxy(function(e){f="1"===e.data[0]},this)});DiffusionConnector.subscribe(i,e,[["/PRC","(/PRC)?"]]),r=e}}()},(webApp=webApp||{}).WhRegisterValidation=function(e){var t=function(e,t){var i=t[0];void 0!==i&&($(i.element).addClass("error"),alert(i.message))};jQuery.validator.addMethod("tel",function(e,t){return new RegExp("^[0-9-()+]+$").test(e)});var i="This is a required field",r=[6,15],n=[6,15],a=[2,60],o=[2,60],s=[6],p="Minimum length is %s%.",l="Maximum length is %s%.";e[0].validate({onfocusout:!1,onkeyup:!1,onsubmit:!1,showErrors:t,rules:{firstName:{required:!0,minlength:a[0],maxlength:a[1]},surname:{required:!0,minlength:o[0],maxlength:o[1]},day:"required",month:"required",year:"required",email:{required:!0,email:!0},tel:{required:!0,tel:!0,minlength:s[0]},title:"required"},messages:{firstName:{maxlength:l.replace("%s%",a[1]),minlength:p.replace("%s%",a[0]),required:i},surname:{maxlength:l.replace("%s%",o[1]),minlength:p.replace("%s%",o[0]),required:i},email:{email:"Not a valid email address",required:i},tel:{minlength:p.replace("%s%",s[0]),required:i,tel:"Not a valid phone number"},title:{required:i},day:{required:i},month:{required:i},year:{required:i}}}),e[1].validate({onfocusout:!1,onkeyup:!1,onsubmit:!1,showErrors:t,rules:{address1:"required",city:"required",country:"required",postcode:"required"},messages:{address1:{required:i},city:{required:i},country:{required:i},postcode:{required:"Postcode/ZIP"}}}),e[2].validate({onfocusout:!1,onkeyup:!1,onsubmit:!1,showErrors:t,rules:{login:{required:!0,minlength:n[0],maxlength:n[1]},password:{required:!0,minlength:r[0],maxlength:r[1]},confirmation:{equalTo:"#password"},agree:"required",answer:"required",currency:"required",question:"required"},messages:{login:{required:i,maxlength:l.replace("%s%",n[1]),minlength:p.replace("%s%",n[0])},password:{required:i,maxlength:l.replace("%s%",r[1]),minlength:p.replace("%s%",r[0])},confirmation:{equalTo:"Passwords must match"},question:{required:"Please specify a security question"},answer:{required:"Please provide an answer to your security question"},currency:{required:i},agree:{required:"You need to accept Terms & Conditions"}}})},(webApp=webApp||{}).deviceDependentSettings=function(){var t=null,e=function(){return{ladbApiKey:""}},i=new e;i.ladbApiKey="l7xx57db2af1975044948cc37c841e86ffa6";var r=new e;r.ladbApiKey="LADa36ee65ef357406c83404bfe789859d9";var n={};n.mobile=i,n.tablet=r;var a=function(e){return function(){return t&&n[t][e]||null}},o={},s=new e;for(var p in s)o[p]=new a(p);return o.setDeviceTypeTablet=function(){t="tablet"},o.setDeviceTypeMobile=function(){t="mobile"},o.setLadbApiKey=function(e){i.ladbApiKey=e},o}(),(webApp=webApp||{}).whRadio=function(){var i=null,r=null,n=!1,a=null;return{play:function(e){webApp.HorseDetailsController?e.append('<audio id="whRadioAudio" src="http://rp.whill.tscplayer.net/wh/whr/mp3.m3u" preload="auto" ></audio>'):e.append('<audio id="whRadioAudio" src="http://rp.whill.tscplayer.net/wh-hls/dogs/playlist.m3u8" preload="auto" ></audio>'),i=document.getElementById("whRadioAudio");var t=this;i.addEventListener("play",function(){!0}),i.addEventListener("suspend",function(){!0}),i.addEventListener("playing",function(){!0,t.isPlaying()?"function"==typeof r&&r():t.stop()}),n=!!1,i.play()},stop:function(){i&&($("#whRadioAudio").remove(),n=!1,i.pause(),i.src="")},setOnPlayingCallBack:function(e){r=e},isPlaying:function(){return n},initDesktopRadio:function(e){var t=this;$(window).bind("changebookie",function(){"ladb"===webApp.prefBookmaker.get()&&(t.stopDesktopRadio(),n=!1)}),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")?e.append('<video id="radioPlayer" height="100" width="100" type="video/rtmp" src="rtmp://rp.whill.tscplayer.net/wh/dogs"></video>'):e.append('<video id="radioPlayer" height="0" width="0" ><source type="video/rtmp" src="rtmp://rp.whill.tscplayer.net/wh/dogs" /></video>'),a=new MediaElementPlayer("#radioPlayer",{features:[],alwaysShowControls:!1})},playDesktopRadio:function(){a.setSrc("rtmp://rp.whill.tscplayer.net/wh/dogs"),a.play(),n=!0},stopDesktopRadio:function(){a.pause(),n=!1}}}(),(webApp=webApp||{}).bookieCollection=function(){var n={},t=null;return{init:function(){var e,t,i,r;n={wh:(t=webApp.WH_API_URL,utils.string.url(t).scheme,utils.string.url(window.location).scheme,i=webApp.SERVER_TIMESTAMP-(new Date).getTime()/1e3,r=webApp.bookieCollection.getBookieParams("wh"),e=new rp.betting.LocalProxy(webApp.SERVER_WH_PROXY_URL),new rp.betting.mint.Provider({url:t,proxy:e,params:{deviceType:webApp.isTablet?"tablet":"mobile"},settings:{serverDateDelta:i,timeZone:webApp.SERVER_TIMEZONE,bookmakerId:r.id,gaSiteCode:webApp.SERVER_GA_TRACKER_ID,affiliateId:webApp.AFFILIATE_ID,minStake:.03}})),ladb:function(){namespace("rp.betting.ladbrokes");var e=webApp.SERVER_TIMESTAMP-(new Date).getTime()/1e3,t=rp.betting.ladbrokes.Command,i={};return i[t.CUSTOMER_API]=webApp.LADB_CUSTOMER_API_VERSION||"",i[t.BETTING_API]=webApp.LADB_BETTING_API_VERSION||"",i[t.BANKING_API]=webApp.LADB_BANKING_API_VERSION||"",i[t.SPORTSBOOK_API]=webApp.LADB_SPORTSBOOK_API_VERSION||"",new rp.betting.ladbrokes.Provider({url:"https://api.ladbrokes.com/",apiVersions:i,params:{locale:"en-GB","api-key":webApp.deviceDependentSettings.ladbApiKey()},settings:{apiKey:webApp.deviceDependentSettings.ladbApiKey(),redirectUrl:webApp.LADB_REDIRECT_URL,timeZone:webApp.SERVER_TIMEZONE,tokenRefreshTime:webApp.LADB_TOKEN_REFRESH_TIME,serverDateDelta:e,openBetsPeriodMonths:6,settledBetsChunksPeriodDays:21,settledBetsRetryLimit:3,minStake:.1}})}()}},getAllProviders:function(){return n},getCurrentProvider:function(){var e=webApp.prefBookmaker.get();return n[e]?t=n[e]:(t=null,console.log("ERROR: Provider for current Preferred bookmaker is not available!")),t},getProvider:function(e){return n[e]?n[e]:(console.log("ERROR: Provider for current Preferred bookmaker is not available!"),!1)},getProviderName:function(e){return(e=this.getBookieParams(e)).name},getCurrentProviderName:function(){var e=webApp.prefBookmaker.get();return this.getProviderName(e)},getErrorClassName:function(e){switch(e){case"wh":return rp.betting.mint.Error;case"ladb":return rp.betting.ladbrokes.Error;default:return rp.betting.Error}},getCurrentErrorClassName:function(){var e=webApp.prefBookmaker.get();return this.getErrorClassName(e)},getLoggedInBookies:function(){var r=webApp.bookiesCollection;return $.map(r,function(e,t){var i=webApp.bookieCollection.getProvider(t);if(Boolean(i.isLoggedIn())&&Boolean(i.user()))return r[t].name}).join(",")},getBookieParams:function(e){var t=webApp.bookiesCollection;return t[e]?t[e]:(console.log("ERROR: Provider for current Preferred bookmaker is not available! Preferred bookmaker is"+e+"."),!1)},getCurrentBookieParams:function(){var e=webApp.prefBookmaker.get();return this.getBookieParams(e)}}}(),(webApp=webApp||{}).cmsAds=function(e){this.adsTemplate="",this.adsPlace=null,this.adsList=null,this.adsContainer=null,this.adMarkerClass="webAppHaveAd",this.currentIndex=0,this._config={},this.init(e)},webApp.cmsAds.prototype={_adTimeId:null,_orientationChange:null,init:function(e){return this.adsTemplate=e.template||"",this.adsContainer=$(e.containerId)||null,this.adsList=e.data||[],this._config=e.config||{},this.name=e.name,this.checkOrientation(),this},next:function(){return void 0!==this.adsList[this.currentIndex+1]?this.currentIndex=this.currentIndex+1:void 0!==this.adsList[0]&&(this.currentIndex=0),this},checkOrientation:function(){this.run();var e=this;return this._orientationChange=$(window).unbind(".addOrientation").bind(webApp.EVENT_CHANGE_ORIENTATION+".addOrientation",function(){setTimeout(function(){e.run()},200)}),this},run:function(){"Portrait"==webApp.orientation&&this._config.vertical?this.display().start():"Landscape"==webApp.orientation&&this._config.horizontal?this.display().start():this.stop().hide()},hide:function(){return $("body").removeClass("webAppHaveAd"),this.adsContainer.html(""),this},stop:function(){return null!=this._adTimeId&&(clearInterval(this._adTimeId),this._adTimeId=null),this},start:function(){clearInterval(this._adTimeId);var e=this;return 1<this.adsList.length&&(this._adTimeId=setInterval(function(){e.next().checkOrientation()},1e3*e.adsList[this.currentIndex].duration)),this},display:function(){if(null==this.adsList||0==this.adsList.length)return this;var e=$.tmpl(this.adsTemplate,this.adsList[this.currentIndex]);return this.adsContainer.html(e),"Landscape"==webApp.orientation?this.adsContainer.insertBefore($("#"+this.name+"-content").find("> .appFooter")):this.adsContainer.insertBefore(webApp.$appHeader),$("body").addClass("webAppHaveAd"),this.adsContainer.find(".adImage").css("opacity","1"),this},kill:function(){this.stop().hide(),null!=this._orientationChange&&($(window).unbind(webApp.EVENT_CHANGE_ORIENTATION,this._orientationChange),this._orientationChange=null),this.adsList=[]}},(webApp=webApp||{}).simplePager=function(e){this.opt={upSelector:"#pager-up",downSelector:"#pager-down",countSelector:"",disabledClass:"disablePagerButton",urlValue:"story_id",loop:!0},this.$upBtn=null,this.$downBtn=null,this.$count=null,this.currentIndex=0,this.dataLength=0,this.clickFlag=!1,this.init(e)},webApp.simplePager.prototype={init:function(e){if(!e)throw{name:"ParamError",message:"Provide options"};if(!e.data)throw{name:"ParamError",message:"Provide data for pager"};if(!e.urlParams)throw{name:"ParamError",message:"Provide url params for pager"};if($.extend(this.opt,e),this.$upBtn=$(this.opt.upSelector),this.$downBtn=$(this.opt.downSelector),this.opt.countSelector&&(this.$count=$(this.opt.countSelector)),this.dataLength=this.opt.data.length-1,this.saveCurrentIndex(),-1==this.currentIndex||this.dataLength<1)$.few(this.$upBtn,this.$downBtn).hide();else{$.few(this.$upBtn,this.$downBtn).attr("href",webApp.urlManager.getHash()),this.setHrefs(),this.$count&&this.setCount(),this.addEvents();var r=this;$(window).bind(webApp.EVENT_CHANGE_HASH+".simplePagerChangeHash",function(e,t){if(r.clickFlag)r.clickFlag=!1;else{r.opt.urlParams=t[1];var i=r.currentIndex;r.saveCurrentIndex(),i!=r.currentIndex&&(r.setHrefs(),r.$count&&r.setCount())}}),$(window).bind(webApp.EVENT_CHANGE_CONTROLLER+".simplePagerChangeController",function(){$(window).unbind(".simplePagerChangeHash"),$(window).unbind(".simplePagerChangeController")})}},saveCurrentIndex:function(){var e=this.opt.urlParams[this.opt.urlValue];for(var t in this.currentIndex=-1,this.opt.data)if(this.opt.data[t]==e){this.currentIndex=parseInt(t);break}},setHrefs:function(){this.opt.loop||$.few(this.$downBtn,this.$upBtn).removeClass(this.opt.disabledClass),0==this.currentIndex?this.opt.loop?this.setHref(this.$upBtn,this.dataLength):(this.$upBtn.addClass(this.opt.disabledClass),this.setHref(this.$upBtn,this.currentIndex)):this.setHref(this.$upBtn,this.currentIndex-1),this.currentIndex==this.dataLength?this.opt.loop?this.setHref(this.$downBtn,0):(this.$downBtn.addClass(this.opt.disabledClass),this.setHref(this.$downBtn,this.currentIndex)):this.setHref(this.$downBtn,this.currentIndex+1);var e=webApp.viewManager.getScroll(webApp.currentControllerName);e&&e.scrollTo(0,0,0)},setCount:function(){this.$count.html(this.currentIndex+1+" of "+(this.dataLength+1))},addEvents:function(){var t=this;this.$upBtn.bind("click.simplePagerClick",function(e){0!=t.currentIndex||t.opt.loop?(t.currentIndex--,t.currentIndex<0&&(t.currentIndex=t.dataLength),t.$count&&t.setCount(),t.clickFlag=!0,setTimeout(function(){t.setHrefs()},10)):e.preventDefault()}),this.$downBtn.bind("click.simplePagerClick",function(e){t.currentIndex!=t.dataLength||t.opt.loop?(t.currentIndex++,t.currentIndex>t.dataLength&&(t.currentIndex=0),t.$count&&t.setCount(),t.clickFlag=!0,setTimeout(function(){t.setHrefs()},10)):e.preventDefault()})},renew:function(e){this.opt.urlParams[this.opt.urlValue]=e;var t=!1;return this.saveCurrentIndex(),-1==this.currentIndex?t=!0:this.setHrefs(),t},setHref:function(e,t){var i={};i[this.opt.urlValue]=this.opt.data[t],webApp.urlManager.changeLink(e,i)}},(webApp=webApp||{}).SimpleCircle=function(e,t){this.currentEl=0,this.dataArray=[],this.elPos={},this.htmlEl="",t?this.initDesktopSimpleCircle(e):this.init(e)},webApp.SimpleCircle.prototype={init:function(e){for(var t=e.data,i=0;i<t.length;i++){var r=t[i];for(var n in r){this.setVal(n,r[n]);break}}return this.htmlEl=$("#"+e.id),this.setBtnSize(),this.bind(),this.rotate(),this},initDesktopSimpleCircle:function(e){for(var t=e.data,i=0;i<t.length;i++){var r=t[i];for(var n in r){this.setVal(n,r[n]);break}}return this.htmlEl=$("#"+e.id),this.setBtnSize(),this.displayDesktop(),this},setBtnSize:function(){this.htmlEl.css("maxWidth",this.htmlEl.parent().width()-26)},bind:function(){var e=this;return this.htmlEl.bind("click.titleToggle",function(){e.rotate()}),this},setVal:function(e,t){return""==t||(void 0!==this.elPos[e]?this.dataArray[this.elPos[e]]=t:(this.dataArray.push(t),this.elPos[e]=this.dataArray.length-1)),this},getVal:function(e){return void 0!==this.elPos[e]&&this.dataArray[this.elPos[e]]},getNextVal:function(){if(void 0===this.dataArray[this.getCurrentPos()])return"";var e=this.getCurrentPos(),t=this.dataArray[e];return this.setCurrentPos(++e),t},setCurrentPos:function(e){return this.currentEl=e,this},getCurrentPos:function(){return(this.currentEl>=this.dataArray.length||this.currentEl<0)&&(this.currentEl=0),this.currentEl},displayByName:function(e){return void 0!==this.elPos[e]&&(this.display(this.dataArray[this.elPos[e]]),this.setCurrentPos(this.elPos[e]+1)),this},display:function(e){return this.htmlEl.html(e),this},displayDesktop:function(){for(var e="",t=0;t<this.dataArray.length;t++)e=e+""+this.dataArray[t];return this.htmlEl.html(e),this},rotate:function(){var e=this.getNextVal();return this.display(e),this}},(greyhoundbet=greyhoundbet||{}).racePager=function(e){this.opt={prevSelector:"#pagerPrevCard",nextSelector:"#pagerNextCard",timeSelector:"#pagerCardTime",urlValue:["race_id"],dataValue:["raceId"],speed:600,enableSwipe:!0,maxCount:15},this.$prevBlock=$([]),this.$nextBlock=$([]),this.$prevCount=$([]),this.$nextCount=$([]),this.$prevBtn=$([]),this.$nextBtn=$([]),this.$timeBlock=$([]),this.size=0,this.index=0,this.prevIndex=0,this.nextIndex=0,this.clickFlag=!1,this.init(e)},greyhoundbet.racePager.prototype={init:function(e){if(!e)throw{name:"ParamError",message:"Provide options"};if(!e.data)throw{name:"ParamError",message:"Provide data for pager"};if(!e.urlParams)throw{name:"ParamError",message:"Provide url params for pager"};if($.extend(this.opt,e),this.$prevBlock=$(this.opt.prevSelector),this.$prevBtn=this.$prevBlock.find("> a"),this.$prevCount=this.$prevBlock.find("> div"),this.$nextBlock=$(this.opt.nextSelector),this.$nextBtn=this.$nextBlock.find("> a"),this.$nextCount=this.$nextBlock.find("> div"),0!==$(".webAppPage.card-meeting-result").length&&0!==$(".webAppPage.result-meeting-result").length?this.$timeBlock=$(".result-meeting-result #pagerResultTime"):this.$timeBlock=$(this.opt.timeSelector),this.size=this.opt.data.length,this.saveIndex(),0<this.size&&-1!=this.index&&this.$timeBlock.html(this.getRaceTime()),!(-1==this.index||this.size<2)){this.appendPagerCount(),this.setButtonsDefaultHref(),this.$prevBlock.show(),this.$nextBlock.show(),this.addEvents();var r=this;$(window).bind(webApp.EVENT_CHANGE_HASH+".racePagerChangeHash",function(e,t){if(r.clickFlag)r.clickFlag=!1;else{r.opt.urlParams=t[1];var i=r.index;r.saveIndex(),i!=r.index&&-1!=r.index&&(r.$timeBlock.html(r.getRaceTime()),r.appendPagerCount(),r.setButtonsDefaultHref(),"function"==typeof r.opt.callback&&r.opt.callback(r.getCurrentData(r.index)))}}),$(window).bind(webApp.EVENT_CHANGE_CONTROLLER+".racePagerChangeController",function(){$(window).unbind(".racePagerChangeHash"),$(window).unbind(".racePagerChangeController")})}},getRaceTime:function(){return utils.date.fromString("2012-01-01 "+this.opt.data[this.index].raceTime,0).format("hh:mn")},appendPagerCount:function(){for(var e=[],t=0;t<this.index&&(e.push("<i></i>"),t!=this.opt.maxCount);t++);if(this.$prevCount.html(e.join("")),this.index<this.opt.maxCount){e=[];for(t=this.index+1;t<this.size&&(e.push("<i></i>"),t!=this.opt.maxCount);t++);this.$nextCount.html(e.join(""))}},setButtonsDefaultHref:function(){var e=webApp.urlManager.getHash();this.$prevBtn.attr("href",e),this.$nextBtn.attr("href",e),this.setButtonsHref()},setButtonsHref:function(){0==this.index?this.setHref(this.$prevBtn,this.size-1):this.setHref(this.$prevBtn,this.index-1),this.index==this.size-1?this.setHref(this.$nextBtn,0):this.setHref(this.$nextBtn,this.index+1)},saveIndex:function(){var e={};for(var t in this.opt.urlValue)e[this.opt.dataValue[t]]=this.opt.urlParams[this.opt.urlValue[t]];for(var t in this.index=-1,this.opt.data){var i=0;for(var r in e){if(this.opt.data[t][r]!=e[r])break;i++}if(i==this.opt.urlValue.length){this.index=parseInt(t);break}}},setHref:function(e,t){var i={};for(var r in this.opt.urlValue)i[this.opt.urlValue[r]]=this.opt.data[t][this.opt.dataValue[r]];webApp.urlManager.changeLink(e,i)},addEvents:function(){var i=this;this.$prevBtn.bind("click.racePagerClick",function(e){i.index--,i.checkIndex()&&i.index<i.opt.maxCount&&(i.$prevCount.find("> i").eq(0).remove(),i.$nextCount.append("<i></i>")),i.$timeBlock.html(i.getRaceTime()),i.clickFlag=!0,setTimeout(function(){i.setButtonsHref()},10),"function"==typeof i.opt.callback&&i.opt.callback(i.getCurrentData(i.index))}),this.$nextBtn.bind("click.racePagerClick",function(e){i.index++,i.checkIndex()&&i.index<i.opt.maxCount+1&&(i.$nextCount.find("> i").eq(0).remove(),i.$prevCount.append("<i></i>")),i.$timeBlock.html(i.getRaceTime()),i.clickFlag=!0,setTimeout(function(){i.setButtonsHref()},10),"function"==typeof i.opt.callback&&i.opt.callback(i.getCurrentData(i.index))}),this.opt.enableSwipe&&this.$timeBlock.closest(".racePager").bind("swipe.racePagerSwipe",function(e,t){"left"===t?webApp.urlManager.setHash(i.$nextBtn.attr("href")):webApp.urlManager.setHash(i.$prevBtn.attr("href"))})},getCurrentData:function(e){return this.opt.data[e]},checkIndex:function(){return this.index<0?(this.index=this.size-1,this.$nextCount.find("i").appendTo(this.$prevCount),!1):this.index!=this.size||(this.index=0,this.$prevCount.find("i").appendTo(this.$nextCount),!1)},setButtonsHrefParam:function(e){webApp.urlManager.changeLink(this.$prevBtn,e),webApp.urlManager.changeLink(this.$nextBtn,e)}},(webApp=webApp||{}).googleTagAds=function(){var i=".js-ladbAdContainer",a=".js-cardAdContainer",r=".js-ladbSideAd",t=".js-whTopAd",n=".js-prgtvSideAd",o=".js-cardTabAdd",s={whTop:!1,ladbSide:!1,rpgtvSide:!1,cardPage:!1};function p(e){e?s.whTop||(googletag.cmd.push(function(){googletag.whAdSlot=googletag.defineSlot("/5614/greyhounds/cards",[970,90],"div-gpt-ad-1445252014425-0").addService(googletag.pubads()),googletag.enableServices(),googletag.display("div-gpt-ad-1445252014425-0")}),googletag&&googletag.pubadsReady&&googletag.pubads().refresh([googletag.whAdSlot]),s.whTop=!0):s.whTop&&($(t).empty(),s.whTop=!1)}function l(e,t){e&&t?s.ladbSide||($(i).show(),googletag.cmd.push(function(){googletag.ladbAdSlot=googletag.defineSlot("/5614/greyhounds/ghtv",[300,250],"div-gpt-ad-1445252554342-0").addService(googletag.pubads()),googletag.enableServices(),googletag.display("div-gpt-ad-1445252554342-0")}),googletag&&googletag.pubadsReady&&googletag.pubads().refresh([googletag.ladbAdSlot]),s.ladbSide=!0):s.ladbSide&&($(r).empty(),$(i).hide(),s.ladbSide=!1)}function c(e,t){var i=!!$(n)[0];e&&i&&"advanced-video"===t?s.rpgtvSide||(googletag.cmd.push(function(){googletag.rpgSideAdPos1=googletag.defineSlot("/5614/greyhounds/ghtv",[300,75],"div-gpt-ad-1445251158808-0").setTargeting("pos",["one"]).addService(googletag.pubads()),googletag.rpgSideAdPos2=googletag.defineSlot("/5614/greyhounds/ghtv",[300,75],"div-gpt-ad-1445251253030-0").setTargeting("pos",["two"]).addService(googletag.pubads()),googletag.rpgSideAdPos3=googletag.defineSlot("/5614/greyhounds/ghtv",[300,75],"div-gpt-ad-1445251340614-0").setTargeting("pos",["three"]).addService(googletag.pubads()),googletag.rpgSideAdPos4=googletag.defineSlot("/5614/greyhounds/ghtv",[300,75],"div-gpt-ad-1445251380728-0").setTargeting("pos",["four"]).addService(googletag.pubads()),googletag.rpgSideAdPos5=googletag.defineSlot("/5614/greyhounds/ghtv",[300,75],"div-gpt-ad-1445251411709-0").setTargeting("pos",["five"]).addService(googletag.pubads()),googletag.rpgSideAdPos6=googletag.defineSlot("/5614/greyhounds/ghtv",[300,75],"div-gpt-ad-1445251472470-0").setTargeting("pos",["six"]).addService(googletag.pubads()),googletag.rpgSideAdPos7=googletag.defineSlot("/5614/greyhounds/ghtv",[300,75],"div-gpt-ad-1495191588231-0").setTargeting("pos",["7"]).addService(googletag.pubads()),googletag.rpgSideAdPos8=googletag.defineSlot("/5614/greyhounds/ghtv",[300,75],"div-gpt-ad-1495191836811-0").setTargeting("pos",["8"]).addService(googletag.pubads()),googletag.enableServices(),googletag.display("div-gpt-ad-1445251158808-0"),googletag.display("div-gpt-ad-1445251253030-0"),googletag.display("div-gpt-ad-1445251340614-0"),googletag.display("div-gpt-ad-1445251380728-0"),googletag.display("div-gpt-ad-1445251411709-0"),googletag.display("div-gpt-ad-1445251472470-0"),googletag.display("div-gpt-ad-1495191588231-0"),googletag.display("div-gpt-ad-1495191836811-0")}),googletag&&googletag.pubadsReady&&googletag.pubads().refresh([googletag.rpgSideAdPos1,googletag.rpgSideAdPos2,googletag.rpgSideAdPos3,googletag.rpgSideAdPos4,googletag.rpgSideAdPos5,googletag.rpgSideAdPos6,googletag.rpgSideAdPos7,googletag.rpgSideAdPos8]),s.rpgtvSide=!0):s.rpgtvSide&&($(n).empty(),s.rpgtvSide=!1)}function d(e,t,i){var r=!!$(a)[0],n=i.isCardTabDestroyed||!1;e&&r&&"card"===t?s.cardPage?n&&($(o).empty(),s.cardPage=!1):(googletag.cmd.push(function(){googletag.cardTabAdSlot=googletag.defineSlot("/5614/greyhounds/cards",[468,60],"div-gpt-ad-1445251928649-0").addService(googletag.pubads()),googletag.enableServices(),googletag.display("div-gpt-ad-1445251928649-0")}),googletag&&googletag.pubadsReady&&googletag.pubads().refresh([googletag.cardTabAdSlot]),s.cardPage=!0):s.cardPage&&($(o).empty(),s.cardPage=!1)}return{proccessAds:function(e,t,i){if(googletag){var r=1140<=e,n=755<=t,a=webApp.urlManager.getControllerName();i=i||{};p(r),l(r,n),c(r,a),d(r,a,i)}}}}(),(webApp=webApp||{}).confirmPopup=function(e){$("#confirm").remove();var t={okCallback:null,cancelCallback:null};"object"==typeof e&&$.extend(t,e);var i=t.tpl||"confirm",r=webApp.viewManager.renderTpl(i,t);if(webApp.HorseDetailsController?(webApp.overlay.show(),r.appendTo($("body")).css("marginTop",r.outerHeight()/2*-1)):(webApp.overlay.showContentOverlay(),r.appendTo($("#webApp")).css("marginTop",-1*r.outerHeight())),"function"==typeof t.okCallback&&r.find(".confirmOK").bind("click.confirmOK",t.okCallback),"function"==typeof t.cancelCallback&&r.find(".confirmCancel").bind("click.confirmCancel",t.cancelCallback),r.find("> .buttons > .confirmBtn").bind("click.hideConfirm",function(){webApp.HorseDetailsController?webApp.overlay.hide():webApp.overlay.hideContentOverlay(),r.remove()}),r.hasClass("scrollable")){var n=r.find(".scroll-wrapper").attr("id"),a={fadeScrollbars:webApp.isMobile,mouseWheel:!0,scrollbars:!0,scrollX:!1,mouseWheelSpeed:100,interactiveScrollbars:!0,preventDefault:!1,freeScroll:!1,useTransition:!1,useTransform:!0,click:!1,tap:!1};new IScroll("#"+n,a)}},(webApp=webApp||{}).overlay=function(){var t=null;return{init:function(){t=$("#overlay")},show:function(e){t.show()},hide:function(){t.hide()},showContentOverlay:function(){$(".contentOverlay").show()},hideContentOverlay:function(){$(".contentOverlay").hide()}}}(),(webApp=webApp||{}).dataLoading={show:function(e,t){this.hide();var i=e||"Connect to William Hill...",r=webApp.viewManager.renderTpl("view-preloader",{text:i});!1!==t&&webApp.overlay.show(),webApp.HorseDetailsController?r.appendTo($("body")):r.appendTo($(".webApp")),r.css("marginTop",-1*(r.height()/2+48))},hide:function(){$("#data-loading").remove(),webApp.overlay.hide()},showContentLoading:function(){this.hideContentLoading();var e=webApp.viewManager.renderTpl("view-page-preloader");webApp.isFirstCall?e.appendTo($("body")):e.appendTo($(".webApp"))},hideContentLoading:function(){$(".pageLoading").remove()}},(webApp=webApp||{}).SelectBtn=function(e){this.opt={$select:$([]),requestParam:""},$.extend(this.opt,e),this.$btn=this.opt.$select.parent(),this.$btnText=this.$btn.find("em"),this.init()},webApp.SelectBtn.prototype={init:function(){var e=webApp.urlManager.getHash(),t=webApp.urlManager.parseHash(e)[1],i=t[this.opt.requestParam];t[this.opt.requestParam]&&this.opt.$select.val(i),this.setBtnText();var o=this,r=this.opt.$select.attr("id");$(window).unbind(webApp.EVENT_CHANGE_HASH+"."+r).bind(webApp.EVENT_CHANGE_HASH+"."+r,function(){var e=o.getHashArray();if(e[1][o.opt.requestParam]){var t=e[1][o.opt.requestParam];o.opt.$select.val(t),o.opt.$select.find("option:selected").length?t!=i&&(o.setBtnText(),i=t,"function"==typeof o.opt.callback&&o.opt.callback(o.opt.$select)):o.opt.$select.val(i)}});var s=webApp.urlManager.getControllerName();$(window).bind("switchpage."+r,function(e,t){s!=t&&$(window).unbind(webApp.EVENT_CHANGE_HASH+"."+r).unbind("switchpage."+r)}),this.$btn.bind("click.showSelectClick",function(){"function"==typeof o.opt.showCallback&&o.opt.showCallback(o.opt.$select)}),this.opt.$select.bind("change.changeSelectBtn",function(){var e=$(this).find("option:selected");if($(this).data("tracklabel")){var t=e.text().replace(/ \(.*/,"");webApp.eventTracker.trackEventById($(this).data("tracklabel"),t)}var i=$(this).val();if(-1==i.indexOf("#")){var r=webApp.urlManager.getControllerName();s!=r&&webApp.urlManager.replaseHash(webApp.urlManager.getBackUrlFor(s));var n=o.getHashArray();if(n[1][o.opt.requestParam]=i,o.opt.controllerName){n[0]=o.opt.controllerName;var a=webApp.urlManager.createHash(n);webApp.urlManager.setHash(a)}else o.opt.dataUrl?webApp.urlManager.changeParams(e.data(o.opt.dataUrl)):webApp.urlManager.changeParams(n[1])}else webApp.urlManager.setHash(i.substring(1))})},getHashArray:function(){var e=webApp.urlManager.getHash();return webApp.urlManager.parseHash(e)},setBtnText:function(){var e=this.opt.$select.find("option:selected");e.data("short")?this.$btnText.html(e.data("short")):this.$btnText.html(e.text())}},(webApp=webApp||{}).accountSettingsList=function(e,a,o,s,p){if("bookie"===a)var t=webApp.prefBookmaker.get();else t=null!=webApp.userSettings.get(a)?webApp.userSettings.get(a):"number";var l=$("#"+e+" > li"),i=l;($("#"+a+"-"+t).addClass("tick"),o)&&(i=l.find(o));i.bind("click.cardSortClick",function(){l.removeClass("tick");var e=o?$(this).closest("li"):$(this);e.addClass("tick");var t=e.attr("id").split("-");if("bookie"!=a)webApp.userSettings.set(a,t[1]),"function"==typeof p&&p(t[1]),s&&$(s.selector).html(s.collection?s.collection[t[1]]:t[1]);else{var i=webApp.prefBookmaker.get(),r=webApp.userSettings.get("bookieChanges");if(r=r?parseInt(r):0,webApp.prefBookmaker.set(t[1]),r<3&&i!=t[1]){var n=webApp.bookieCollection.getProviderName(t[1])+" prices will now be displayed";webApp.confirmMessage.show(n),webApp.userSettings.set("bookieChanges",r+1)}}})},(webApp=webApp||{}).blockScroll=function(e){e.blockId&&(this.opt={space:14,active:0,isWindow:!1,minHeight:210,contentHeight:!1},$.extend(this.opt,e),this.$block=$("#"+this.opt.blockId),this.$parent=this.$block.parent(),this.$wrapper=this.opt.isWindow?this.$block.closest(".scrollParent"):this.$block.closest(".scrollContent"),this.$wrapper&&!this.$wrapper.parent().hasClass("webAppPageContent")||(this.$wrapper=this.$block.closest(".webAppPage")),this.iscroll=null,this.$items=$([]),this.forController=webApp.currentControllerName,this.active=this.opt.active,this.init())},webApp.blockScroll.prototype={init:function(){var e,i=this;setTimeout(function(){i.setSize(),i.setScroll()},0),$(window).unbind("updateScroolSize."+this.opt.blockId).bind("updateScroolSize."+this.opt.blockId,function(){clearTimeout(e),e=setTimeout(function(){i.setSize(),i.opt.isSnap&&i.iscroll&&(i.iscroll.goToPage(i.active,0,0),i.refresh())},440)}),$(window).unbind("switchpage."+this.opt.blockId).bind("switchpage."+this.opt.blockId,function(e,t){i.opt.isWindow||(i.forController&&i.forController!=t?i.destroy():setTimeout(function(){i.setSize()},100))})},setSize:function(){this.$block.show();var e=this.$block.find("> .scrollContent");if(this.opt.isSnap){e.data("snap",!0),this.$items.length||(this.$items=$(this.opt.itemsSelector));var t=this.$block.width();e.width(t*this.$items.length),this.$items.each(function(e){$(this).width(t).css("left",e*t)})}var i=e.height();this.$block.hide().height("auto");var r=0,n=this.$wrapper.outerHeight();if(this.opt.isWindow)if(i=this.opt.displayNear?(this.$wrapper.addClass("landingDisplayNear"),this.$block.show(),e.height()):(r=webApp.windowHeight-r-2*this.opt.space)<i?r:i,this.$block.height(i).css("overflow","hidden").show(),this.opt.displayNear){var a=$(this.opt.displayNear);a.is(":visible")?this.$wrapper.css({bottom:webApp.windowHeight-a.offset().top+24,left:a.offset().left+a.innerWidth()/2-215}):(this.$wrapper.css("marginLeft","-149px"),this.$wrapper.css("bottom","25px"))}else i==r?this.$wrapper.css("top",this.opt.space):this.$wrapper.css("top",webApp.windowHeight/2-this.$wrapper.outerHeight()/2);else{var o,s=this.$wrapper;if(this.$wrapper.data("snap")&&(s=this.$block.parent()),s.find("> div").each(function(){"none"!=$(this).css("display")&&(r+=$(this).height())}),i=r=n-r||r,this.opt.contentHeight)this.$block.show(),o=(r=e.outerHeight())<i?this.opt.minHeight>r?this.opt.minHeight:r:i,this.$block.height(o).css("overflow","hidden");else this.$block.height(i).css("overflow","hidden").show()}this.refresh()},setScroll:function(){this.iscroll&&(this.iscroll.destroy(),this.iscroll=null);var e=!0;webApp.isAndroid_2&&(e=!this.$block.find("input[type=text], input[type=password], input[type=number], select").length);var t={fadeScrollbars:!webApp.isAndroid_2,mouseWheel:!0,scrollbars:!!webApp.isMobile||"custom",scrollX:!1,mouseWheelSpeed:100,interactiveScrollbars:!1,preventDefault:!1,freeScroll:!1,useTransition:!1,useTransform:e,click:!1,tap:!1};this.opt.isSnap&&$.extend(t,{snap:!0,momentum:!1,bounce:!1,scrollbars:!1,snapThreshold:26,scrollX:!0}),this.iscroll=new IScroll("#"+this.opt.blockId,t),this.iscroll.on("beforeScrollStart",function(){webApp.disableScroll=!0}),this.iscroll.on("scrollEnd",$.proxy(function(){this.iscroll&&this.opt.isSnap&&this.iscroll.currentPage.pageX!=this.opt.active&&(this.opt.active=this.iscroll.currentPage.pageX,"function"==typeof this.opt.callback&&(this.active=this.iscroll.currentPage.pageX,this.opt.callback(this.iscroll.currentPage.pageX)))},this)),this.opt.isSnap&&this.iscroll&&this.iscroll.goToPage(this.opt.active,0,0)},destroy:function(){this.iscroll&&(this.iscroll.destroy(),this.iscroll=null,webApp.viewManager.enableScrolls()),this.$block.height("auto").css("overflow","visible"),$(window).unbind("changeorientaion."+this.opt.blockId).unbind("switchpage."+this.opt.blockId)},refresh:function(){this.iscroll&&this.iscroll.refresh()}},(webApp=webApp||{}).confirmMessage={show:function(e,t){this.hide();t=t||"account-bookie-change";var i=webApp.viewManager.renderTpl(t,{text:e});webApp.HorseDetailsController?i.appendTo($("body")):i.appendTo($(".webApp")),setTimeout($.proxy(function(){this.hide()},this),1500)},hide:function(){$("#confirm-message").remove()}},(webApp=webApp||{}).choicePopup={$box:null,$container:null,opt:{},show:function(e){this.hide(),this.opt=e,this.$box=webApp.viewManager.renderTpl("choice-popup"),this.$container=this.opt.$el.closest(".scrollContent"),this.$box.find("> .choicePopupHeadline").html(this.opt.headline),this.$box.find("> .choicePopupContent").html(webApp.viewManager.renderTpl(this.opt.template)),this.setPosition(),this.$container.append(this.$box),"function"==typeof this.opt.showCallback&&this.opt.showCallback();var t,i=this;setTimeout(function(){$(document).bind("click.hideChoicePopup",function(){i.hide()})},10),$(window).bind("resize.resizeChoicePopup",function(){clearTimeout(t),t=setTimeout(function(){i.setPosition()},300)})},setPosition:function(){var e=this.opt.$el.offset().top-this.$container.offset().top+this.opt.$el.outerHeight()/2+18,t=this.opt.$el.offset().left+(this.opt.$el.outerWidth()/2-150);this.$box.css({top:e,left:t})},hide:function(){this.$box&&this.$box.remove(),$(document).unbind(".hideChoicePopup"),$(window).unbind(".resizeChoicePopup")}},(webApp=webApp||{}).selectionsConfirm=function(e,t){(t=t||{}).count=e,t.tpl="bet-confirm",webApp.confirmPopup(t)},(webApp=webApp||{}).BottomMenuControl=function(){var c={},d=$([]);function u(e,t,i,r){var n=utils.date.fromString(e+" 00:00",0),a={btnText:n.format("mmm dd"),urlParam:e,text:"<em>"+n.format("mmm")+"</em><span>"+n.format("dd")+"</span><i>"+n.format("ddd")+"</i>"};return!0===r&&(a.text=a.text.replace("<em>",'<em class="firstDay">')),!1===i?a.disabled=!0:e===t&&(a.active=!0),a}function n(){h();var e=c?webApp.urlManager.getParams()[1][c.urlParam]:(new Date).format("yyyy-0mm-0dd"),t={items:{}};for(var i in c.items){var r=c.items[i],n=[];if("date"==i)if(r.days)for(var a=0;a<r.days.length;a++)-1!==r.days[a].day.search(/-01$/)&&parseInt(e.split("-")[1],10)<parseInt(r.days[a].day.split("-")[1],10)?r.days[a].isFirstDay=!0:r.days[a].isFirstDay=!1,n.push(u(r.days[a].day,e,r.days[a].racesAvailable,r.days[a].isFirstDay));else{if("today"==r.start&&(r.start=utils.moment.getSynchronizedToServerNow(0,"YYYY-MM-DD")),n.push(u(r.start,e)),r.prevDays)for(var o=new Date(r.start),s=r.prevDays;0<s;s--){o.setDate(o.getDate()-1);var p=utils.date.toString(o);n.unshift(u(p,e))}if(r.nextDays)for(o=new Date(r.start),s=r.nextDays;0<s;s--){o.setDate(o.getDate()+1);p=utils.date.toString(o);n.push(u(p,e))}}else{var l={btnText:r.btnText,urlParam:r.urlParamValue,text:r.text};e==r.urlParamValue&&(l.active=!0),n.push(l)}t.items[i]=n}d=$.tmpl("bottom-menu-control",t),webApp.isMobile?d.appendTo($("body")).find(".overlay").css("bottom",d.innerHeight()):d.appendTo($("body")),$(window).bind(webApp.EVENT_CHANGE_HASH+".hideBottomMenu",function(){h()}),d.find(".cancel").on("click",function(){h()}),d.find("strong:not(.disabled)").on("click",function(){var e={},t=$(this).data("param");e[c.urlParam]=t,webApp.urlManager.changeParams(e),$(c.btnSelector).html($(this).data("btntext")),"function"==typeof c.callback&&c.callback(t),h()})}function h(){var e=$(".date-picker-container");1<=e.length?(e.remove(),$(".date-picker-overlay").remove()):$("#bottomMenuControl").remove(),d=$([]),$(window).unbind(webApp.EVENT_CHANGE_ORIENTATION+".hideBottomMenuOrient").unbind(webApp.EVENT_CHANGE_ORIENTATION+".hideBottomMenuOrient")}return{init:function(e){c=e;var t=webApp.urlManager.getParams()[1][c.urlParam],i=utils.date.fromString(t+" 00:00",0).format("mmm dd");if(" "==i)for(var r in c.items)if(c.items[r].urlParamValue==t){i=c.items[r].btnText;break}$(c.btnSelector).html(i).on("click",$.proxy(function(){n()},this))},showCalendar:function(){c&&c.items?n():$.ajax({url:"meeting/blocks.sd",data:{r_date:(new Date).format("yyyy-0mm-0dd"),blocks:"header"},type:"GET",dataType:"json",cache:!0,timeout:6e4,success:function(e){c.items.date={},c.items.date.days=e.header,n()},error:function(e){console.log(e)},complete:function(){}})}}}(),(webApp=webApp||{}).Calendar=function(){var w=null,n=new Date(webApp.urlManager.getParams()[1].r_date),m=5,a=7,o=$([]),s=function(e){webApp.urlManager.changeParams({r_date:e}),webApp.Calendar.hide(),webApp.eventTracker.trackEventById("results_date_select",e)},p=function(){webApp.Calendar.hide();var e=utils.date.getSynchronizedToServerNow().format("yyyy-0mm-0dd");webApp.urlManager.changeParams({r_date:e}),webApp.eventTracker.trackEventById("results_date_select",e)},l=null,c=null,d=["M","T","W","T","F","S","S"],v=utils.date.getSynchronizedToServerNow();function u(){l=n.getMonth(),c=n.getFullYear(),n.getDate()}function h(){u();var e=n.format("mmm yyyy"),t=c==v.getFullYear()&&l==v.getMonth(),i=c==v.getFullYear()-m&&l==v.getMonth(),r={items:function(e,t){for(var i=[],r={text:"&nbsp;",isCurrDate:!1,disabled:!0},n=e.getFullYear(),a=e.getMonth(),o=new Date(n,a+1,0).getDate(),s=1,p=new Date(v.getFullYear()-m,v.getMonth(),v.getDate()),l=new Date(n,a,1).getDay(),c=0==l?6:l-1;s<=o;){for(var d=[],u=0;u<t;u++)if(u<c&&s<=1||o<s)d.push(r);else{var h=new Date(n,a,s),g=h.format("yyyy-0mm-0dd"),b=g==w.format("yyyy-0mm-0dd"),f=v<h||h<p;d.push({text:s,isCurrDate:b,disabled:f,date:g}),s++}i.push(d)}return i}(n,a),monthAndYear:e,monthForwardDisabled:t,monthBackwardDisabled:i,daysAbbreviations:d};o=$.tmpl("calendar",r),webApp.isMobile?o.appendTo($("body")).find(".overlay").css("bottom",o.innerHeight()):o.appendTo($("body")),$(".calMonthBack:not(.disabled)").on("click",function(){g(),n=new Date(c,l-1,1),h()}),$(".calMonthForward:not(.disabled)").on("click",function(){g(),n=new Date(c,l+1,1),h()}),$(".calToday").on("click",function(){p()}),$(".calCancel").on("click",function(){n=w,g()}),o.find("[data-date]:not(.disabled)").on("click",function(){var e=$(this).data("date");s(e)})}function g(){var e=$(".date-picker-container");1<=e.length?(e.remove(),$(".date-picker-overlay").remove()):$("#bottomMenuControl").remove(),o=$([])}function t(e){webApp.isMobile?o.appendTo($("body")).find(".overlay").css("bottom",o.innerHeight()):o.appendTo($("body"))}return v=new Date(v.getFullYear(),v.getMonth(),v.getDate()),{init:function(e){e.$appendTo||null,e.orientation||null,m=e.maxYearsBack||m,t(),u()},show:function(){w=webApp.urlManager.getParams()[1]?new Date(webApp.urlManager.getParams()[1].r_date):new Date,n=w,h()},hide:function(){g()},setOrientation:function(e){t()}}}(),(webApp=webApp||{}).landing={iscroll:null,$container:$([]),init:function(){this.$container=$("#webAppLanding")},show:function(e){this.hide(),this.$container.height(webApp.windowHeight).show();var t=e.templateData||{};if(this.$container.append($.tmpl(e.template,t)),this.$bubble=this.$container.find("> .landingBubble").eq(0),this.$bubble.show(),this.showBubble(e.full),webApp.userSettings.get("isDefaultBookieSet")&&!webApp.userSettings.get("isLandingJourneyComplete")){var i=webApp.prefBookmaker.get();this.changeBubble($("#landing"+i.toUpperCase()))}$(window).bind("changeorientaion.bookieLanding",$.proxy(function(){this.$container.height(webApp.windowHeight)},this)),"function"==typeof e.callback&&e.callback()},showBubble:function(e){this.iscroll&&(this.iscroll.destroy(),this.iscroll=null),this.iscroll=new webApp.blockScroll({blockId:this.$bubble.find("> .landingBubbleWrapper").attr("id"),isWindow:!0,displayNear:!(!webApp.isTablet||e)&&"#accountMenu"}),webApp.HorseDetailsController||$.each($(".website-display"),function(e,t){$.each($(t).children(),function(e,t){$(t).html($(t).html().replace(/\bapp\b/,"site"))})})},changeBubble:function(e){webApp.userSettings.set("isDefaultBookieSet",!0),0<$("#prefBookieList").length&&$("#prefBookieList").find("li").each(function(e,t){$(t).removeClass("tick")}),webApp.accountSettingsList("prefBookieList","bookie",".colA"),this.$bubble.hide(),this.$bubble=e,this.$bubble.show(),this.showBubble()},bookieCallback:function(){var i=$("#landingBookiesList"),e=webApp.landing;e._shuffle(i.children()).each(function(e,t){i.append(t)});var t=" Selected",r=" Register",n=" Start using the app";e.$container.find(".setLandingJourneyComplete").bind("click",function(){webApp.userSettings.set("isLandingJourneyComplete",!0)}),e.$container.find("#showLandingWH").bind("click.gaEvent",function(){webApp.eventTracker.trackEventById("pref_bookie_select",webApp.bookieCollection.getProviderName("wh")+t)}),e.$container.find("#showLandingLADB").bind("click.gaEvent",function(){webApp.eventTracker.trackEventById("pref_bookie_select",webApp.bookieCollection.getProviderName("ladb")+t)}),e.$container.find("#landingWHLogin").bind("click.gaEvent",function(){webApp.eventTracker.trackEventById("pref_bookie_login",webApp.bookieCollection.getProviderName("wh")+" Login")}),e.$container.find("#landingWHRegister").bind("click.gaEvent",function(){webApp.eventTracker.trackEventById("pref_bookie_register",webApp.bookieCollection.getProviderName("wh")+r)}),e.$container.find("#landingWHStart").bind("click.gaEvent",function(){webApp.eventTracker.trackEventById("pref_bookie_start",webApp.bookieCollection.getProviderName("wh")+n)}),e.$container.find("#landingLADBLogin").bind("click.gaEvent",function(){webApp.eventTracker.trackEventById("pref_bookie_login",webApp.bookieCollection.getProviderName("ladb")+" Login")}),e.$container.find("#landingLADBRegister").bind("click.gaEvent",function(){webApp.eventTracker.trackEventById("pref_bookie_register",webApp.bookieCollection.getProviderName("ladb")+r)}),e.$container.find("#landingLADBStart").bind("click.gaEvent",function(){webApp.eventTracker.trackEventById("pref_bookie_start",webApp.bookieCollection.getProviderName("ladb")+n)}),$("#showLandingWH").bind("click",function(){webApp.prefBookmaker.set("wh"),$("#showLandingWH").addClass("tick"),setTimeout(function(){e.changeBubble($("#landingWH"))},500)}),$("#showLandingLADB").bind("click",function(){webApp.prefBookmaker.set("ladb"),$("#showLandingLADB").addClass("tick"),setTimeout(function(){e.changeBubble($("#landingLADB"))},500)}),e.$container.find(".hideWebAppLanding").bind("click",function(){e.hide()})},hide:function(){this.iscroll&&(this.iscroll.destroy(),this.iscroll=null),this.$container.empty().hide(),$(window).unbind(".bookieLanding")},initDesktopLanding:function(){var e=this._shuffle(["wh","ladb"])[0];webApp.prefBookmaker.set(e),webApp.userSettings.set("isDefaultBookieSet",!0),webApp.userSettings.set("isLandingJourneyComplete",!0)},_shuffle:function(e){for(var t,i,r=e.length;r;t=parseInt(Math.random()*r),i=e[--r],e[r]=e[t],e[t]=i);return e}},(webApp=webApp||{}).sortOrder={date:"desc",track:"asc",dis:"asc",trp:"asc",split:"asc",pos:"asc",fin:"asc",by:"asc",win:"asc",rem:"asc",wt:"asc",go:"asc",wght:"asc",sp:"asc",grade:"asc",cal:"asc"},webApp.sortableColumns=function(){"use strict";function r(e){var i,r,n,a,o,s,t={date:"raceTime",track:"trackShortName",dis:"distMetre",trp:"trapNum",split:"secTimeS",pos:"bndPos",fin:"rOutcomeDesc",by:"by",win:"otherDogName",rem:"closeUpCmnt",wt:"winnersTimeS",go:"goingType",wght:"weight",sp:"oddsDesc",grade:"rGradeCde",cal:"calcRTimeS"};"asc"===webApp.sortOrder[e]?("dis"!==e&&"track"!==e&&"split"!==e&&"trp"!==e&&"go"!==e&&"wt"!==e&&"cal"!==e&&"wght"!==e||webApp.dogCareerDataForSort.forms.sort((s=t[e],function(e,t){if(""!==e[s]&&"N"!==e[s]||(e[s]=0),""!==t[s]&&"N"!==t[s]||(t[s]=0),"secTimeS"!==s&&"distMetre"!==s&&"goingTime"!==s&&"weight"!==s&&"winnersTimeS"!==s&&"calcRTimeS"!==s||(e[s]=parseFloat(e[s]),t[s]=parseFloat(t[s])),parseFloat(e[s])&&parseFloat(t[s])&&(e[s]=parseFloat(e[s]),t[s]=parseFloat(t[s])),e[s]<t[s])return-1;if(e[s]>t[s])return 1;if(e[s]===t[s]){if(e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]])return 1;if(e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]])return-1}return 0})),"fin"===e&&webApp.dogCareerDataForSort.forms.sort((o=t[e],function(e,t){if("NR"===e[o]&&(e[o]=18),"NR"===t[o]&&(t[o]=18),""===e[o]&&(e[o]=10),""===t[o]&&(t[o]=10),e[o]=parseFloat(e[o]),t[o]=parseFloat(t[o]),e[o]<t[o])return-1;if(e[o]>t[o])return 1;if(e[o]===t[o]){if(e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]])return 1;if(e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]])return-1}return 0})),"date"===e&&webApp.dogCareerDataForSort.forms.sort((a=t[e],function(e,t){return e[a].split(" ")[0]<t[a].split(" ")[0]?1:e[a].split(" ")[0]>t[a].split(" ")[0]?-1:0})),"by"===e&&webApp.dogCareerDataForSort.forms.sort(function(e,t){var i=l(e),r=l(t);if(i<r)return-1;if(r<i)return 1;if(i===r){if(e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]])return 1;if(e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]])return-1}return 0}),"sp"===e&&webApp.dogCareerDataForSort.forms.sort(function(e,t){var i=c(e),r=c(t),n=d(e),a=d(t);if(n<a)return-1;if(a<n)return 1;if(n===a){if(i<r)return 1;if(r<i)return-1;if(i===r)return e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]]?1:e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]]?-1:0}}),"grade"===e&&webApp.dogCareerDataForSort.forms.sort(function(e,t){var i=h(e),r=h(t),n=g(e),a=g(t),o=u(e),s=u(t);if(o<s)return 1;if(s<o)return-1;if(o===s&&0!==o)return e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]]?1:e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]]?-1:0;if(o===s&&0===o){if(i<r)return-1;if(r<i)return 1;if(i===r){if(n<a)return-1;if(a<n)return 1;if(n===a)return e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]]?1:e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]]?-1:0}}}),p(e)):"desc"===webApp.sortOrder[e]&&("dis"!==e&&"track"!==e&&"split"!==e&&"trp"!==e&&"go"!==e&&"wt"!==e&&"cal"!==e&&"wght"!==e||webApp.dogCareerDataForSort.forms.sort((n=t[e],function(e,t){if(""!==e[n]&&"N"!==e[n]||(e[n]=0),""!==t[n]&&"N"!==t[n]||(t[n]=0),"secTimeS"!==n&&"distMetre"!==n&&"goingTime"!==n&&"weight"!==n&&"winnersTimeS"!==n&&"calcRTimeS"!==n||(e[n]=parseFloat(e[n]),t[n]=parseFloat(t[n])),e[n]<t[n])return 1;if(e[n]>t[n])return-1;if(e[n]===t[n]){if(e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]])return 1;if(e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]])return-1}return 0})),"fin"===e&&webApp.dogCareerDataForSort.forms.sort((r=t[e],function(e,t){if("NR"===e[r]&&(e[r]=18),"NR"===t[r]&&(t[r]=18),""===e[r]&&(e[r]=10),""===t[r]&&(t[r]=10),e[r]=parseFloat(e[r]),t[r]=parseFloat(t[r]),e[r]<t[r])return 1;if(e[r]>t[r])return-1;if(e[r]===t[r]){if(e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]])return 1;if(e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]])return-1}return 0})),"date"===e&&webApp.dogCareerDataForSort.forms.sort((i=t[e],function(e,t){return e[i].split(" ")[0]<t[i].split(" ")[0]?-1:e[i].split(" ")[0]>t[i].split(" ")[0]?1:0})),"by"===e&&webApp.dogCareerDataForSort.forms.sort(function(e,t){var i=l(e),r=l(t);if(i<r)return 1;if(r<i)return-1;if(i===r){if(e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]])return 1;if(e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]])return-1}return 0}),"sp"===e&&webApp.dogCareerDataForSort.forms.sort(function(e,t){var i=c(e),r=c(t),n=d(e),a=d(t);if(n<a)return 1;if(a<n)return-1;if(n===a){if(i<r)return-1;if(r<i)return 1;if(i===r)return e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]]?1:e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]]?-1:0}}),"grade"===e&&webApp.dogCareerDataForSort.forms.sort(function(e,t){var i=h(e),r=h(t),n=g(e),a=g(t),o=u(e),s=u(t);if(o<s)return-1;if(s<o)return 1;if(o===s&&0!==o)return e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]]?1:e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]]?-1:0;if(o===s&&0===o){if(i<r)return 1;if(r<i)return-1;if(i===r){if(n<a)return 1;if(a<n)return-1;if(n===a)return e["raceTime".split(" ")[0]]<t["raceTime".split(" ")[0]]?1:e["raceTime".split(" ")[0]]>t["raceTime".split(" ")[0]]?-1:0}}}),p(e))}function p(e){var t=webApp.sortOrder[e];webApp.sortOrder={date:"asc",track:"asc",dis:"asc",trp:"asc",split:"asc",pos:"asc",fin:"asc",by:"asc",win:"asc",rem:"asc",wt:"asc",go:"asc",wght:"asc",sp:"asc",grade:"asc",cal:"asc"},webApp.sortOrder[e]="asc"===t?"desc":"asc"}function l(e){if("shd"===e.by)return.15;if("hd"===e.by)return.25;if("nk"===e.by)return.4;if("dist"===e.by)return 85;if(""===e.by)return 0;var t,i=e.by.split("&frac"),r=parseFloat(i[0])||0;return i[1]?(""===i[0]&&(r=0),t=i[1].split(""),r+=parseFloat(t[0])/parseFloat(t[1])):r}function c(e){switch(e.oddsDesc.slice(-1)){case"F":return 3;case"J":return 2;case"C":return 1;default:return 0}}function d(e){if(""===e.oddsDesc)return 0;if(-1!==e.oddsDesc.search("Evs"))return 1;var t=e.oddsDesc.split("/");return parseFloat(parseFloat(t[0]))/parseFloat(t[1])}function u(e){switch(""===e.rGradeCde&&(e.rGradeCde=e.trialFlag),e.rGradeCde.slice(0,2)){case"OR":return 2;case"IV":return 1;default:return 0}}function h(e){return""===e.rGradeCde&&(e.rGradeCde=e.trialFlag),e.rGradeCde.slice(0,1)}function g(e){return""===e.rGradeCde&&(e.rGradeCde=e.trialFlag),parseInt(e.rGradeCde.slice(1),10)}return{init:function(i){i.on("click",function(e){var t;!$(e.target).parent().hasClass("columnHeaders")||$(e.target).hasClass("win")||$(e.target).hasClass("rem")||$(e.target).hasClass("pos")||(t=$(e.target),webApp.highlightedSortableHeader&&!1===$(".date").hasClass("black-text")&&!webApp.highlightedSortableHeader.hasClass("date")?webApp.highlightedSortableHeader.removeClass("black-text"):$(".date.black-text").removeClass("black-text"),(webApp.highlightedSortableHeader=t).addClass("black-text"),r(t.attr("class").split(" ")[0]),function(e){var t=e.children().detach().children(),i=t[0],r=document.createDocumentFragment();r.appendChild(i);for(var n=0;n<t.length-1;n++)r.appendChild(t[webApp.dogCareerDataForSort.forms[n].index+1]);e.append("<tbody></tbody>").append(r)}(i),function(){for(var e=0;e<webApp.dogCareerDataForSort.forms.length;e++)webApp.dogCareerDataForSort.forms[e].index=e}())})}}}(),(webApp=webApp||{}).printForm=function(){"use strict";function t(){var e=$("#sortContainer");$("body").append(e.clone().addClass("printContainer")),$(".printContainer").prepend('<div class="printHeader"></div>'),$(".printHeader").append('<div class="printRaceName"></div><div class="headerRaceDetails"></div><div class="headerDate"></div>'),""!==webApp.raceInfo[0].postPick?$(".headerRaceDetails").html($("#pagerCardTime").html()+" "+webApp.raceInfo[0].raceTitle+" ("+webApp.raceInfo[0].raceGrade+") - "+webApp.raceInfo[0].distance+"m - Post Pick: "+webApp.raceInfo[0].postPick):$(".headerRaceDetails").html($("#pagerCardTime").html()+" "+webApp.raceInfo[0].raceTitle+" ("+webApp.raceInfo[0].raceGrade+") - "+webApp.raceInfo[0].distance+"m ");var t,i=webApp.raceInfo[2],r=((t=function(e){for(var t,i=e.split("-"),r=1;r<i.length-1;r++)"0"===(t=i[r].split(""))[0]&&(i[r]=t[1]);return i}(i))[1]={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}[t[1]],t[2]+" "+t[1]+" "+t[0]);$(".headerDate").html(r),function(){var e,t,i,r,n,a,o,s,p,l=$(".runnerBlock"),c=$(".dogInfo"),d=$(".printContainer .runner"),u=[];for(d.append('<div class="dogDetails"></div>'),d.append('<div class="brtAndTrainer"><div class="brt"></div><div class="trainer"></div></div>'),e=$(".runner .dogDetails"),t=$(".runner .brt"),i=$(".runner .trainer"),o=0;o<l.length;o++)!0===$($(l[o]).children()[1]).hasClass("info")?u.push({trapNumber:o,isVacant:!1}):u.push({trapNumber:o,isVacant:!0});for(o=p=0;o<d.length;o++)!1===u[o].isVacant&&(s=$(c[p].children).children(),r=$(s[0]).children()[0].innerHTML,n=$(s[1]).children()[0].innerHTML.replace("<em>","").replace("</em>",""),a=$(s[1]).children()[1].innerHTML.replace("<em>","").replace("</em>",""),e[o].innerHTML=r,t[o].innerHTML=n,i[o].innerHTML=a,p+=1)}()}return{init:function(e){t(),e.on("click",function(){window.print()})},remove:function(){$(".printContainer").remove()}}}(),webApp.isSupportTablet=!1,console.error=function(e){if("string"==typeof e||"number"==typeof e)$("#debugConent").append("<div>"+e+"</div>"),scrollDebug();else if("boolean"==typeof e)$("#debugConent").append("<div>"+(e?"true":"false")+"</div>"),scrollDebug();else if("object"==typeof e)for(var t in e)$("#debugConent").append("<div>"+t+" : "+e[t]+"</div>"),scrollDebug()},$(document).ready(appBootstrap);var wh=wh||{};(webApp=webApp||{}).placeBet=function(e,n,a){var s,o,p=function(r,e){var i=[];r.takeSp&&(r.priceNum="1",r.priceDen="1"),r.hasOwnProperty("freebets")&&0<r.freebets.length&&$.each(r.freebets,function(e,t){i.push({tokenId:t})});var t={whoPlaceBetRequest:{affiliateId:webApp.AFFILIATE_ID,returnBetDelays:!0,whoBets:[{betNumber:1,stake:r.unitStake,legType:r.eachWay?"EachWay":"Win",whoBetType:{betTypeCode:"SGL",minStake:r.minStake,maxStake:r.maxStake,betTypeName:"Single",betNoOfLines:1},whoSelections:[{selectionId:r.selectionId,status:"active",legType:r.eachWay?"E":"W",priceType:r.takeSp?"S":"L",priceNum:"Evs"===r.priceNum?1:r.priceNum,priceDen:"Evs"===r.priceNum?1:r.priceDen,priceDec:r.decimal,eachWayPlaces:null,includedInMultiple:!1,singleAvailable:!0,ewAvailable:r.eachWay,spAvailable:r.takeSp,priceChanged:!1,statusChanged:!1}],whoFailures:[],whoFreeBets:i}]}};void 0!==e&&(t.whoPlaceBetRequest.whoBets[0].delayToken=e),wh.mint.Client.placeBet(t,function(e){var t=e.whoPlaceBetResponse.whoBetPlacements[0],i=$.extend({betReference:t.betReceipt,totalStake:t.totalStake,estimatedReturns:r.estimated},r);webApp.registry.set("lastReceipt",i),"function"==typeof n&&n(e),webApp.openBets.saveOpenBets(r),s("wh-receipt")},function(e){o(e,a,r)})};s=function(e){webApp.urlManager.setHash(webApp.urlManager.createHash([e]))},wh.mint.Client.isLoggedIn()?(p(e),o=function(e,t,i){var r={},n=!1;switch(e.hasOwnProperty("whoPlaceBetResponse")&&e.whoPlaceBetResponse.hasOwnProperty("whoBets")&&void 0!==e.whoPlaceBetResponse.whoBets[0]&&e.whoPlaceBetResponse.whoBets[0].hasOwnProperty("whoFailures")&&(void 0!==e.whoPlaceBetResponse.whoBets[0].whoFailures[0]&&(r=e.whoPlaceBetResponse.whoBets[0].whoFailures[0]),$.each(e.whoPlaceBetResponse.whoBets[0].whoFailures,function(e,t){t.hasOwnProperty("betFailureType")&&"whoStatusChanged"===t.betFailureType&&(n=!0)})),r.hasOwnProperty("betFailureType")&&("whoInsufficientFunds"===r.betFailureType&&(e.statusMessage="Insufficient funds to place bet."),"whoPriceChanged"===r.betFailureType&&(e.statusMessage="The price for the selected bet has changed.",e.statusCode=62)),n&&(e.statusMessage="Selection status changed",e.statusCode=70),"function"==typeof t&&t(e),e.statusCode){case 60:s("wh-generic-error");break;case 61:case 68:case 70:s("wh-market-suspend-error");break;case 62:var a=$.extend({stake:i.unitStake,oldNum:i.priceNum,oldDen:i.priceDen},i,{priceNum:r.priceNum,priceDen:r.priceDen,priceDec:r.priceDec});webApp.registry.set("lastPrice",a),s("wh-price-changed-error/r="+Math.random());break;case 71:var o=e.whoPlaceBetResponse.whoBetDelays;setTimeout(function(){p(i,o.whoBetDelay[0].delayToken)},1e3*o.delayPeriod);webApp.dataLoading.show();break;default:webApp.genericWhErrorHandler(e)}}):s("wh-home")},(webApp=webApp||{}).openBets={maxSecondsToStore:36e5,_getBookieUser:function(e){var t=webApp.bookieCollection.getProvider(e);return t?t.user():null},setUserOpenBets:function(e,t){var i=this._getBookieUser(t);if(i){var r=t+"_"+i.login();webApp.userSettings.set(r,e)}},getUserOpenBets:function(e){var t=this._getBookieUser(e);if(!t)return null;var i=e+"_"+t.login(),r=webApp.userSettings.get(i)||{};return this.clearOpenBets(r,e)},saveOpenBets:function(e,t){t=t||webApp.prefBookmaker.get();var i=e.race_id,r=e.race_ts,n=this.getUserOpenBets(t),a={},o=e.selectionId+"_"+(new Date).getTime();n[r]&&n[r][i]&&(a=n[r][i]),a[o]=e.unitStake,n[r]=n[r]||{},n[r][i]=a,this.setUserOpenBets(n,t)},clearOpenBets:function(e,t){var i=e||{};if(0==$.isEmptyObject(e)){for(var r in e){var n=new Date;n.setTime(1e3*r+1e3*n.getTimezoneOffset());var a=utils.date.getSynchronizedToServerNow();utils.date.datesDiff(a,n)>=this.maxSecondsToStore&&delete i[r]}this.setUserOpenBets(i,t)}return i}};